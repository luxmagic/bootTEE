ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 2
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"uart.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.uart_init,"ax",%progbits
  20              		.align	1
  21              		.p2align 2,,3
  22              		.global	uart_init
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	uart_init:
  28              	.LVL0:
  29              	.LFB132:
  30              		.file 1 "Core/uart.c"
   1:Core/uart.c   **** #include "main.h"
   2:Core/uart.c   **** #include "uart.h"
   3:Core/uart.c   **** 
   4:Core/uart.c   **** void uart_init(uint32_t baudrate)
   5:Core/uart.c   **** {
  31              		.loc 1 5 1 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		@ link register save eliminated.
   6:Core/uart.c   ****     // Enable RCC for  UART1 и GPIOA
   7:Core/uart.c   ****     RCC->APB2ENR |= RCC_APB2ENR_USART1EN;
  36              		.loc 1 7 5 view .LVU1
  37              		.loc 1 7 18 is_stmt 0 view .LVU2
  38 0000 0F4A     		ldr	r2, .L4
   8:Core/uart.c   ****     RCC->AHB1ENR |= RCC_AHB1ENR_GPIOAEN;
   9:Core/uart.c   **** 
  10:Core/uart.c   ****     // Settings PA9 (TX) and PA10 (RX) how alternative function
  11:Core/uart.c   ****     GPIOA->MODER |= (GPIO_MODER_MODER9_1 | GPIO_MODER_MODER10_1);
  39              		.loc 1 11 18 view .LVU3
  40 0002 104B     		ldr	r3, .L4+4
   7:Core/uart.c   ****     RCC->AHB1ENR |= RCC_AHB1ENR_GPIOAEN;
  41              		.loc 1 7 18 view .LVU4
  42 0004 516C     		ldr	r1, [r2, #68]
  43 0006 41F01001 		orr	r1, r1, #16
   5:Core/uart.c   ****     // Enable RCC for  UART1 и GPIOA
  44              		.loc 1 5 1 view .LVU5
  45 000a 10B4     		push	{r4}
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s 			page 2


  46              	.LCFI0:
  47              		.cfi_def_cfa_offset 4
  48              		.cfi_offset 4, -4
   7:Core/uart.c   ****     RCC->AHB1ENR |= RCC_AHB1ENR_GPIOAEN;
  49              		.loc 1 7 18 view .LVU6
  50 000c 5164     		str	r1, [r2, #68]
   8:Core/uart.c   ****     RCC->AHB1ENR |= RCC_AHB1ENR_GPIOAEN;
  51              		.loc 1 8 5 is_stmt 1 view .LVU7
   8:Core/uart.c   ****     RCC->AHB1ENR |= RCC_AHB1ENR_GPIOAEN;
  52              		.loc 1 8 18 is_stmt 0 view .LVU8
  53 000e 116B     		ldr	r1, [r2, #48]
  12:Core/uart.c   ****     GPIOA->AFR[1] |= (7 << 4) | (7 << 8); // AF7 для UART1
  13:Core/uart.c   **** 
  14:Core/uart.c   ****     USART1->BRR = SystemCoreClock / baudrate;
  54              		.loc 1 14 17 view .LVU9
  55 0010 0D4C     		ldr	r4, .L4+8
   8:Core/uart.c   **** 
  56              		.loc 1 8 18 view .LVU10
  57 0012 41F00101 		orr	r1, r1, #1
  58 0016 1163     		str	r1, [r2, #48]
  11:Core/uart.c   ****     GPIOA->AFR[1] |= (7 << 4) | (7 << 8); // AF7 для UART1
  59              		.loc 1 11 5 is_stmt 1 view .LVU11
  11:Core/uart.c   ****     GPIOA->AFR[1] |= (7 << 4) | (7 << 8); // AF7 для UART1
  60              		.loc 1 11 18 is_stmt 0 view .LVU12
  61 0018 1A68     		ldr	r2, [r3]
  62              		.loc 1 14 35 view .LVU13
  63 001a 0C49     		ldr	r1, .L4+12
  11:Core/uart.c   ****     GPIOA->AFR[1] |= (7 << 4) | (7 << 8); // AF7 для UART1
  64              		.loc 1 11 18 view .LVU14
  65 001c 42F42012 		orr	r2, r2, #2621440
  66 0020 1A60     		str	r2, [r3]
  12:Core/uart.c   ****     GPIOA->AFR[1] |= (7 << 4) | (7 << 8); // AF7 для UART1
  67              		.loc 1 12 5 is_stmt 1 view .LVU15
  12:Core/uart.c   ****     GPIOA->AFR[1] |= (7 << 4) | (7 << 8); // AF7 для UART1
  68              		.loc 1 12 19 is_stmt 0 view .LVU16
  69 0022 5A6A     		ldr	r2, [r3, #36]
  70 0024 42F4EE62 		orr	r2, r2, #1904
  71 0028 5A62     		str	r2, [r3, #36]
  72              		.loc 1 14 5 is_stmt 1 view .LVU17
  15:Core/uart.c   ****     USART1->CR1 = USART_CR1_TE | USART_CR1_RE | USART_CR1_UE;
  73              		.loc 1 15 17 is_stmt 0 view .LVU18
  74 002a 42F20C02 		movw	r2, #8204
  14:Core/uart.c   ****     USART1->CR1 = USART_CR1_TE | USART_CR1_RE | USART_CR1_UE;
  75              		.loc 1 14 35 view .LVU19
  76 002e 0B68     		ldr	r3, [r1]
  77 0030 B3FBF0F0 		udiv	r0, r3, r0
  78              	.LVL1:
  14:Core/uart.c   ****     USART1->CR1 = USART_CR1_TE | USART_CR1_RE | USART_CR1_UE;
  79              		.loc 1 14 17 view .LVU20
  80 0034 A060     		str	r0, [r4, #8]
  81              		.loc 1 15 5 is_stmt 1 view .LVU21
  82              		.loc 1 15 17 is_stmt 0 view .LVU22
  83 0036 E260     		str	r2, [r4, #12]
  16:Core/uart.c   **** 
  17:Core/uart.c   ****     // SET_BIT(USART1->CR1, USART_CR1_RXNEIE);
  18:Core/uart.c   ****     // SET_BIT(USART1->CR1, USART_CR1_TXEIE);
  19:Core/uart.c   **** 
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s 			page 3


  20:Core/uart.c   ****     // NVIC_EnableIRQ(USART1_IRQn);
  21:Core/uart.c   ****     // NVIC_SetPriority(USART1_IRQn, 1);
  22:Core/uart.c   **** }
  84              		.loc 1 22 1 view .LVU23
  85 0038 5DF8044B 		ldr	r4, [sp], #4
  86              	.LCFI1:
  87              		.cfi_restore 4
  88              		.cfi_def_cfa_offset 0
  89 003c 7047     		bx	lr
  90              	.L5:
  91 003e 00BF     		.align	2
  92              	.L4:
  93 0040 00380240 		.word	1073887232
  94 0044 00000240 		.word	1073872896
  95 0048 00100140 		.word	1073811456
  96 004c 00000000 		.word	SystemCoreClock
  97              		.cfi_endproc
  98              	.LFE132:
 100              		.section	.text.uart_send,"ax",%progbits
 101              		.align	1
 102              		.p2align 2,,3
 103              		.global	uart_send
 104              		.syntax unified
 105              		.thumb
 106              		.thumb_func
 108              	uart_send:
 109              	.LVL2:
 110              	.LFB133:
  23:Core/uart.c   **** 
  24:Core/uart.c   **** void uart_send(const uint8_t *data, uint32_t len)
  25:Core/uart.c   **** {
 111              		.loc 1 25 1 is_stmt 1 view -0
 112              		.cfi_startproc
 113              		@ args = 0, pretend = 0, frame = 0
 114              		@ frame_needed = 0, uses_anonymous_args = 0
 115              		@ link register save eliminated.
  26:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 116              		.loc 1 26 5 view .LVU25
 117              	.LBB2:
 118              		.loc 1 26 10 view .LVU26
 119              		.loc 1 26 26 view .LVU27
 120              		.loc 1 26 5 is_stmt 0 view .LVU28
 121 0000 59B1     		cbz	r1, .L6
 122 0002 4318     		adds	r3, r0, r1
  27:Core/uart.c   ****     {
  28:Core/uart.c   ****         while (!(USART1->SR & USART_SR_TXE));
 123              		.loc 1 28 24 view .LVU29
 124 0004 054A     		ldr	r2, .L16
 125 0006 411E     		subs	r1, r0, #1
 126              	.LVL3:
 127              		.loc 1 28 24 view .LVU30
 128 0008 581E     		subs	r0, r3, #1
 129              	.LVL4:
 130              	.L8:
 131              		.loc 1 28 45 is_stmt 1 discriminator 1 view .LVU31
 132              		.loc 1 28 15 discriminator 1 view .LVU32
 133              		.loc 1 28 24 is_stmt 0 discriminator 1 view .LVU33
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s 			page 4


 134 000a 1368     		ldr	r3, [r2]
 135              		.loc 1 28 15 discriminator 1 view .LVU34
 136 000c 1B06     		lsls	r3, r3, #24
 137 000e FCD5     		bpl	.L8
  29:Core/uart.c   ****         USART1->DR = data[i];
 138              		.loc 1 29 9 is_stmt 1 discriminator 2 view .LVU35
 139              		.loc 1 29 26 is_stmt 0 discriminator 2 view .LVU36
 140 0010 11F8013F 		ldrb	r3, [r1, #1]!	@ zero_extendqisi2
 141              		.loc 1 29 20 discriminator 2 view .LVU37
 142 0014 5360     		str	r3, [r2, #4]
  26:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 143              		.loc 1 26 35 is_stmt 1 discriminator 2 view .LVU38
 144              	.LVL5:
  26:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 145              		.loc 1 26 26 discriminator 2 view .LVU39
  26:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 146              		.loc 1 26 5 is_stmt 0 discriminator 2 view .LVU40
 147 0016 8142     		cmp	r1, r0
 148 0018 F7D1     		bne	.L8
 149              	.LVL6:
 150              	.L6:
  26:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 151              		.loc 1 26 5 discriminator 2 view .LVU41
 152              	.LBE2:
  30:Core/uart.c   ****     }
  31:Core/uart.c   **** }
 153              		.loc 1 31 1 view .LVU42
 154 001a 7047     		bx	lr
 155              	.L17:
 156              		.align	2
 157              	.L16:
 158 001c 00100140 		.word	1073811456
 159              		.cfi_endproc
 160              	.LFE133:
 162              		.section	.text.uart_receive,"ax",%progbits
 163              		.align	1
 164              		.p2align 2,,3
 165              		.global	uart_receive
 166              		.syntax unified
 167              		.thumb
 168              		.thumb_func
 170              	uart_receive:
 171              	.LVL7:
 172              	.LFB134:
  32:Core/uart.c   **** 
  33:Core/uart.c   **** int uart_receive(uint8_t *data, uint32_t len)
  34:Core/uart.c   **** {
 173              		.loc 1 34 1 is_stmt 1 view -0
 174              		.cfi_startproc
 175              		@ args = 0, pretend = 0, frame = 0
 176              		@ frame_needed = 0, uses_anonymous_args = 0
 177              		@ link register save eliminated.
  35:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 178              		.loc 1 35 5 view .LVU44
 179              	.LBB3:
 180              		.loc 1 35 10 view .LVU45
 181              		.loc 1 35 26 view .LVU46
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s 			page 5


 182              		.loc 1 35 5 is_stmt 0 view .LVU47
 183 0000 59B1     		cbz	r1, .L19
 184 0002 4318     		adds	r3, r0, r1
  36:Core/uart.c   ****     {
  37:Core/uart.c   ****         while (!(USART1->SR & USART_SR_RXNE));
 185              		.loc 1 37 24 view .LVU48
 186 0004 064A     		ldr	r2, .L28
 187 0006 411E     		subs	r1, r0, #1
 188              	.LVL8:
 189              		.loc 1 37 24 view .LVU49
 190 0008 581E     		subs	r0, r3, #1
 191              	.LVL9:
 192              	.L20:
 193              		.loc 1 37 46 is_stmt 1 discriminator 1 view .LVU50
 194              		.loc 1 37 15 discriminator 1 view .LVU51
 195              		.loc 1 37 24 is_stmt 0 discriminator 1 view .LVU52
 196 000a 1368     		ldr	r3, [r2]
 197              		.loc 1 37 15 discriminator 1 view .LVU53
 198 000c 9B06     		lsls	r3, r3, #26
 199 000e FCD5     		bpl	.L20
  38:Core/uart.c   ****         data[i] = USART1->DR;
 200              		.loc 1 38 9 is_stmt 1 discriminator 2 view .LVU54
 201              		.loc 1 38 25 is_stmt 0 discriminator 2 view .LVU55
 202 0010 5368     		ldr	r3, [r2, #4]
 203              		.loc 1 38 17 discriminator 2 view .LVU56
 204 0012 01F8013F 		strb	r3, [r1, #1]!
  35:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 205              		.loc 1 35 35 is_stmt 1 discriminator 2 view .LVU57
 206              	.LVL10:
  35:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 207              		.loc 1 35 26 discriminator 2 view .LVU58
  35:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 208              		.loc 1 35 5 is_stmt 0 discriminator 2 view .LVU59
 209 0016 8142     		cmp	r1, r0
 210 0018 F7D1     		bne	.L20
 211              	.LVL11:
 212              	.L19:
  35:Core/uart.c   ****     for (uint32_t i = 0; i < len; i++)
 213              		.loc 1 35 5 discriminator 2 view .LVU60
 214              	.LBE3:
  39:Core/uart.c   ****     }
  40:Core/uart.c   ****     return 0;
 215              		.loc 1 40 5 is_stmt 1 view .LVU61
  41:Core/uart.c   **** }...
 216              		.loc 1 41 1 is_stmt 0 view .LVU62
 217 001a 0020     		movs	r0, #0
 218 001c 7047     		bx	lr
 219              	.L29:
 220 001e 00BF     		.align	2
 221              	.L28:
 222 0020 00100140 		.word	1073811456
 223              		.cfi_endproc
 224              	.LFE134:
 226              		.text
 227              	.Letext0:
 228              		.file 2 "d:\\gcc arm\\10 2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 229              		.file 3 "d:\\gcc arm\\10 2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s 			page 6


 230              		.file 4 "CMSIS/Device/ST/STM32F4xx/Include/stm32f401xc.h"
 231              		.file 5 "CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 uart.c
C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s:20     .text.uart_init:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s:27     .text.uart_init:00000000 uart_init
C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s:93     .text.uart_init:00000040 $d
C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s:101    .text.uart_send:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s:108    .text.uart_send:00000000 uart_send
C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s:158    .text.uart_send:0000001c $d
C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s:163    .text.uart_receive:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s:170    .text.uart_receive:00000000 uart_receive
C:\Users\clay0\AppData\Local\Temp\ccm3wDGm.s:222    .text.uart_receive:00000020 $d

UNDEFINED SYMBOLS
SystemCoreClock
