ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 2
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"socket.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.close.part.0,"ax",%progbits
  20              		.align	1
  21              		.p2align 2,,3
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	close.part.0:
  27              	.LVL0:
  28              	.LFB12:
  29              		.file 1 "ioLIB/socket.c"
   1:ioLIB/socket.c **** //*****************************************************************************
   2:ioLIB/socket.c **** //
   3:ioLIB/socket.c **** //! \file socket.c
   4:ioLIB/socket.c **** //! \brief SOCKET APIs Implements file.
   5:ioLIB/socket.c **** //! \details SOCKET APIs like as Berkeley Socket APIs. 
   6:ioLIB/socket.c **** //! \version 1.0.3
   7:ioLIB/socket.c **** //! \date 2013/10/21
   8:ioLIB/socket.c **** //! \par  Revision history
   9:ioLIB/socket.c **** //!       <2015/02/05> Notice
  10:ioLIB/socket.c **** //!        The version history is not updated after this point.
  11:ioLIB/socket.c **** //!        Download the latest version directly from GitHub. Please visit the our GitHub repository
  12:ioLIB/socket.c **** //!        >> https://github.com/Wiznet/ioLibrary_Driver
  13:ioLIB/socket.c **** //!       <2014/05/01> V1.0.3. Refer to M20140501
  14:ioLIB/socket.c **** //!         1. Implicit type casting -> Explicit type casting.
  15:ioLIB/socket.c **** //!         2. replace 0x01 with PACK_REMAINED in recvfrom()
  16:ioLIB/socket.c **** //!         3. Validation a destination ip in connect() & sendto(): 
  17:ioLIB/socket.c **** //!            It occurs a fatal error on converting unint32 address if uint8* addr parameter is no
  18:ioLIB/socket.c **** //!            Copy 4 byte addr value into temporary uint32 variable and then compares it.
  19:ioLIB/socket.c **** //!       <2013/12/20> V1.0.2 Refer to M20131220
  20:ioLIB/socket.c **** //!                    Remove Warning.
  21:ioLIB/socket.c **** //!       <2013/11/04> V1.0.1 2nd Release. Refer to "20131104".
  22:ioLIB/socket.c **** //!                    In sendto(), Add to clear timeout interrupt status (Sn_IR_TIMEOUT)
  23:ioLIB/socket.c **** //!       <2013/10/21> 1st Release
  24:ioLIB/socket.c **** //! \author MidnightCow
  25:ioLIB/socket.c **** //! \copyright
  26:ioLIB/socket.c **** //!
  27:ioLIB/socket.c **** //! Copyright (c)  2013, WIZnet Co., LTD.
  28:ioLIB/socket.c **** //! All rights reserved.
  29:ioLIB/socket.c **** //! 
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 2


  30:ioLIB/socket.c **** //! Redistribution and use in source and binary forms, with or without 
  31:ioLIB/socket.c **** //! modification, are permitted provided that the following conditions 
  32:ioLIB/socket.c **** //! are met: 
  33:ioLIB/socket.c **** //! 
  34:ioLIB/socket.c **** //!     * Redistributions of source code must retain the above copyright 
  35:ioLIB/socket.c **** //! notice, this list of conditions and the following disclaimer. 
  36:ioLIB/socket.c **** //!     * Redistributions in binary form must reproduce the above copyright
  37:ioLIB/socket.c **** //! notice, this list of conditions and the following disclaimer in the
  38:ioLIB/socket.c **** //! documentation and/or other materials provided with the distribution. 
  39:ioLIB/socket.c **** //!     * Neither the name of the <ORGANIZATION> nor the names of its 
  40:ioLIB/socket.c **** //! contributors may be used to endorse or promote products derived 
  41:ioLIB/socket.c **** //! from this software without specific prior written permission. 
  42:ioLIB/socket.c **** //! 
  43:ioLIB/socket.c **** //! THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  44:ioLIB/socket.c **** //! AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
  45:ioLIB/socket.c **** //! IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  46:ioLIB/socket.c **** //! ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
  47:ioLIB/socket.c **** //! LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
  48:ioLIB/socket.c **** //! CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
  49:ioLIB/socket.c **** //! SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  50:ioLIB/socket.c **** //! INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
  51:ioLIB/socket.c **** //! CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
  52:ioLIB/socket.c **** //! ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF 
  53:ioLIB/socket.c **** //! THE POSSIBILITY OF SUCH DAMAGE.
  54:ioLIB/socket.c **** //
  55:ioLIB/socket.c **** //*****************************************************************************
  56:ioLIB/socket.c **** #include "socket.h"
  57:ioLIB/socket.c **** 
  58:ioLIB/socket.c **** //M20150401 : Typing Error
  59:ioLIB/socket.c **** //#define SOCK_ANY_PORT_NUM  0xC000;
  60:ioLIB/socket.c **** #define SOCK_ANY_PORT_NUM  0xC000
  61:ioLIB/socket.c **** 
  62:ioLIB/socket.c **** static uint16_t sock_any_port = SOCK_ANY_PORT_NUM;
  63:ioLIB/socket.c **** static uint16_t sock_io_mode = 0;
  64:ioLIB/socket.c **** static uint16_t sock_is_sending = 0;
  65:ioLIB/socket.c **** 
  66:ioLIB/socket.c **** static uint16_t sock_remained_size[_WIZCHIP_SOCK_NUM_] = {0,0,};
  67:ioLIB/socket.c **** 
  68:ioLIB/socket.c **** //M20150601 : For extern decleation
  69:ioLIB/socket.c **** //static uint8_t  sock_pack_info[_WIZCHIP_SOCK_NUM_] = {0,};
  70:ioLIB/socket.c **** uint8_t  sock_pack_info[_WIZCHIP_SOCK_NUM_] = {0,};
  71:ioLIB/socket.c **** //
  72:ioLIB/socket.c **** 
  73:ioLIB/socket.c **** #if _WIZCHIP_ == 5200
  74:ioLIB/socket.c ****    static uint16_t sock_next_rd[_WIZCHIP_SOCK_NUM_] ={0,};
  75:ioLIB/socket.c **** #endif
  76:ioLIB/socket.c **** 
  77:ioLIB/socket.c **** //A20150601 : For integrating with W5300
  78:ioLIB/socket.c **** #if _WIZCHIP_ == 5300
  79:ioLIB/socket.c ****    uint8_t sock_remained_byte[_WIZCHIP_SOCK_NUM_] = {0,}; // set by wiz_recv_data()
  80:ioLIB/socket.c **** #endif
  81:ioLIB/socket.c **** 
  82:ioLIB/socket.c **** 
  83:ioLIB/socket.c **** #define CHECK_SOCKNUM()   \
  84:ioLIB/socket.c ****    do{                    \
  85:ioLIB/socket.c ****       if(sn > _WIZCHIP_SOCK_NUM_) return SOCKERR_SOCKNUM;   \
  86:ioLIB/socket.c ****    }while(0);             \
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 3


  87:ioLIB/socket.c **** 
  88:ioLIB/socket.c **** #define CHECK_SOCKMODE(mode)  \
  89:ioLIB/socket.c ****    do{                     \
  90:ioLIB/socket.c ****       if((getSn_MR(sn) & 0x0F) != mode) return SOCKERR_SOCKMODE;  \
  91:ioLIB/socket.c ****    }while(0);              \
  92:ioLIB/socket.c **** 
  93:ioLIB/socket.c **** #define CHECK_SOCKINIT()   \
  94:ioLIB/socket.c ****    do{                     \
  95:ioLIB/socket.c ****       if((getSn_SR(sn) != SOCK_INIT)) return SOCKERR_SOCKINIT; \
  96:ioLIB/socket.c ****    }while(0);              \
  97:ioLIB/socket.c **** 
  98:ioLIB/socket.c **** #define CHECK_SOCKDATA()   \
  99:ioLIB/socket.c ****    do{                     \
 100:ioLIB/socket.c ****       if(len == 0) return SOCKERR_DATALEN;   \
 101:ioLIB/socket.c ****    }while(0);              \
 102:ioLIB/socket.c **** 
 103:ioLIB/socket.c **** 
 104:ioLIB/socket.c **** 
 105:ioLIB/socket.c **** int8_t socket(uint8_t sn, uint8_t protocol, uint16_t port, uint8_t flag)
 106:ioLIB/socket.c **** {
 107:ioLIB/socket.c **** 	CHECK_SOCKNUM();
 108:ioLIB/socket.c **** 	switch(protocol)
 109:ioLIB/socket.c **** 	{
 110:ioLIB/socket.c ****       case Sn_MR_TCP :
 111:ioLIB/socket.c ****          {
 112:ioLIB/socket.c ****             //M20150601 : Fixed the warning - taddr will never be NULL
 113:ioLIB/socket.c **** 		    /*
 114:ioLIB/socket.c ****             uint8_t taddr[4];
 115:ioLIB/socket.c ****             getSIPR(taddr);
 116:ioLIB/socket.c ****             */
 117:ioLIB/socket.c ****             uint32_t taddr;
 118:ioLIB/socket.c ****             getSIPR((uint8_t*)&taddr);
 119:ioLIB/socket.c ****             if(taddr == 0) return SOCKERR_SOCKINIT;
 120:ioLIB/socket.c **** 	    break;
 121:ioLIB/socket.c ****          }
 122:ioLIB/socket.c ****       case Sn_MR_UDP :
 123:ioLIB/socket.c ****       case Sn_MR_MACRAW :
 124:ioLIB/socket.c **** 	  case Sn_MR_IPRAW :
 125:ioLIB/socket.c ****          break;
 126:ioLIB/socket.c ****    #if ( _WIZCHIP_ < 5200 )
 127:ioLIB/socket.c ****       case Sn_MR_PPPoE :
 128:ioLIB/socket.c ****          break;
 129:ioLIB/socket.c ****    #endif
 130:ioLIB/socket.c ****       default :
 131:ioLIB/socket.c ****          return SOCKERR_SOCKMODE;
 132:ioLIB/socket.c **** 	}
 133:ioLIB/socket.c **** 	//M20150601 : For SF_TCP_ALIGN & W5300
 134:ioLIB/socket.c **** 	//if((flag & 0x06) != 0) return SOCKERR_SOCKFLAG;
 135:ioLIB/socket.c **** 	if((flag & 0x04) != 0) return SOCKERR_SOCKFLAG;
 136:ioLIB/socket.c **** #if _WIZCHIP_ == 5200
 137:ioLIB/socket.c ****    if(flag & 0x10) return SOCKERR_SOCKFLAG;
 138:ioLIB/socket.c **** #endif
 139:ioLIB/socket.c **** 	   
 140:ioLIB/socket.c **** 	if(flag != 0)
 141:ioLIB/socket.c **** 	{
 142:ioLIB/socket.c ****    	switch(protocol)
 143:ioLIB/socket.c ****    	{
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 4


 144:ioLIB/socket.c ****    	   case Sn_MR_TCP:
 145:ioLIB/socket.c ****    		  //M20150601 :  For SF_TCP_ALIGN & W5300
 146:ioLIB/socket.c ****           #if _WIZCHIP_ == 5300
 147:ioLIB/socket.c ****    		     if((flag & (SF_TCP_NODELAY|SF_IO_NONBLOCK|SF_TCP_ALIGN))==0) return SOCKERR_SOCKFLAG;
 148:ioLIB/socket.c ****           #else
 149:ioLIB/socket.c ****    		     if((flag & (SF_TCP_NODELAY|SF_IO_NONBLOCK))==0) return SOCKERR_SOCKFLAG;
 150:ioLIB/socket.c ****           #endif
 151:ioLIB/socket.c **** 
 152:ioLIB/socket.c ****    	      break;
 153:ioLIB/socket.c ****    	   case Sn_MR_UDP:
 154:ioLIB/socket.c ****    	      if(flag & SF_IGMP_VER2)
 155:ioLIB/socket.c ****    	      {
 156:ioLIB/socket.c ****    	         if((flag & SF_MULTI_ENABLE)==0) return SOCKERR_SOCKFLAG;
 157:ioLIB/socket.c ****    	      }
 158:ioLIB/socket.c ****    	      #if _WIZCHIP_ == 5500
 159:ioLIB/socket.c ****       	      if(flag & SF_UNI_BLOCK)
 160:ioLIB/socket.c ****       	      {
 161:ioLIB/socket.c ****       	         if((flag & SF_MULTI_ENABLE) == 0) return SOCKERR_SOCKFLAG;
 162:ioLIB/socket.c ****       	      }
 163:ioLIB/socket.c ****    	      #endif
 164:ioLIB/socket.c ****    	      break;
 165:ioLIB/socket.c ****    	   default:
 166:ioLIB/socket.c ****    	      break;
 167:ioLIB/socket.c ****    	}
 168:ioLIB/socket.c ****    }
 169:ioLIB/socket.c **** 	close(sn);
 170:ioLIB/socket.c **** 	//M20150601
 171:ioLIB/socket.c **** 	#if _WIZCHIP_ == 5300
 172:ioLIB/socket.c **** 	   setSn_MR(sn, ((uint16_t)(protocol | (flag & 0xF0))) | (((uint16_t)(flag & 0x02)) << 7) );
 173:ioLIB/socket.c ****     #else
 174:ioLIB/socket.c **** 	   setSn_MR(sn, (protocol | (flag & 0xF0)));
 175:ioLIB/socket.c ****     #endif
 176:ioLIB/socket.c **** 	if(!port)
 177:ioLIB/socket.c **** 	{
 178:ioLIB/socket.c **** 	   port = sock_any_port++;
 179:ioLIB/socket.c **** 	   if(sock_any_port == 0xFFF0) sock_any_port = SOCK_ANY_PORT_NUM;
 180:ioLIB/socket.c **** 	}
 181:ioLIB/socket.c ****    setSn_PORT(sn,port);	
 182:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_OPEN);
 183:ioLIB/socket.c ****    while(getSn_CR(sn));
 184:ioLIB/socket.c ****    //A20150401 : For release the previous sock_io_mode
 185:ioLIB/socket.c ****    sock_io_mode &= ~(1 <<sn);
 186:ioLIB/socket.c ****    //
 187:ioLIB/socket.c **** 	sock_io_mode |= ((flag & SF_IO_NONBLOCK) << sn);   
 188:ioLIB/socket.c ****    sock_is_sending &= ~(1<<sn);
 189:ioLIB/socket.c ****    sock_remained_size[sn] = 0;
 190:ioLIB/socket.c ****    //M20150601 : repalce 0 with PACK_COMPLETED
 191:ioLIB/socket.c ****    //sock_pack_info[sn] = 0;
 192:ioLIB/socket.c ****    sock_pack_info[sn] = PACK_COMPLETED;
 193:ioLIB/socket.c ****    //
 194:ioLIB/socket.c ****    while(getSn_SR(sn) == SOCK_CLOSED);
 195:ioLIB/socket.c ****    return (int8_t)sn;
 196:ioLIB/socket.c **** }	   
 197:ioLIB/socket.c **** 
 198:ioLIB/socket.c **** int8_t close(uint8_t sn)
  30              		.loc 1 198 8 view -0
  31              		.cfi_startproc
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 5


  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
 199:ioLIB/socket.c **** {
 200:ioLIB/socket.c **** 	CHECK_SOCKNUM();
  34              		.loc 1 200 2 view .LVU1
  35              		.loc 1 200 17 view .LVU2
 201:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 202:ioLIB/socket.c **** #if   (_WIZCHIP_ == 5300) 
 203:ioLIB/socket.c ****    //M20160503 : Wrong socket parameter. s -> sn 
 204:ioLIB/socket.c ****    //if( ((getSn_MR(s)& 0x0F) == Sn_MR_TCP) && (getSn_TX_FSR(s) != getSn_TxMAX(s)) ) 
 205:ioLIB/socket.c ****    if( ((getSn_MR(sn)& 0x0F) == Sn_MR_TCP) && (getSn_TX_FSR(sn) != getSn_TxMAX(sn)) ) 
 206:ioLIB/socket.c ****    { 
 207:ioLIB/socket.c ****       uint8_t destip[4] = {0, 0, 0, 1};
 208:ioLIB/socket.c ****       // TODO
 209:ioLIB/socket.c ****       // You can wait for completing to sending data;
 210:ioLIB/socket.c ****       // wait about 1 second;
 211:ioLIB/socket.c ****       // if you have completed to send data, skip the code of erratum 1
 212:ioLIB/socket.c ****       // ex> wait_1s();
 213:ioLIB/socket.c ****       //     if (getSn_TX_FSR(s) == getSn_TxMAX(s)) continue;
 214:ioLIB/socket.c ****       // 
 215:ioLIB/socket.c ****       //M20160503 : The socket() of close() calls close() itself again. It occures a infinite loop 
 216:ioLIB/socket.c ****       //socket(s,Sn_MR_UDP,0x3000,0);
 217:ioLIB/socket.c ****       //sendto(s,destip,1,destip,0x3000); // send the dummy data to an unknown destination(0.0.0.1)
 218:ioLIB/socket.c ****       setSn_MR(sn,Sn_MR_UDP);
 219:ioLIB/socket.c ****       setSn_PORTR(sn, 0x3000);
 220:ioLIB/socket.c ****       setSn_CR(sn,Sn_CR_OPEN);
 221:ioLIB/socket.c ****       while(getSn_CR(sn) != 0);
 222:ioLIB/socket.c ****       while(getSn_SR(sn) != SOCK_UDP);
 223:ioLIB/socket.c ****       sendto(sn,destip,1,destip,0x3000); // send the dummy data to an unknown destination(0.0.0.1).
 224:ioLIB/socket.c ****    };   
 225:ioLIB/socket.c **** #endif 
 226:ioLIB/socket.c **** 	setSn_CR(sn,Sn_CR_CLOSE);
  36              		.loc 1 226 2 view .LVU3
 198:ioLIB/socket.c **** {
  37              		.loc 1 198 8 is_stmt 0 view .LVU4
  38 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  39              	.LCFI0:
  40              		.cfi_def_cfa_offset 24
  41              		.cfi_offset 3, -24
  42              		.cfi_offset 4, -20
  43              		.cfi_offset 5, -16
  44              		.cfi_offset 6, -12
  45              		.cfi_offset 7, -8
  46              		.cfi_offset 14, -4
  47              		.loc 1 226 2 view .LVU5
  48 0002 4501     		lsls	r5, r0, #5
  49 0004 05F58476 		add	r6, r5, #264
 198:ioLIB/socket.c **** {
  50              		.loc 1 198 8 view .LVU6
  51 0008 0746     		mov	r7, r0
  52              		.loc 1 226 2 view .LVU7
  53 000a 1021     		movs	r1, #16
  54 000c 3046     		mov	r0, r6
  55              	.LVL1:
  56              		.loc 1 226 2 view .LVU8
  57 000e 0835     		adds	r5, r5, #8
  58 0010 FFF7FEFF 		bl	WIZCHIP_WRITE
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 6


  59              	.LVL2:
 227:ioLIB/socket.c ****    /* wait to process the command... */
 228:ioLIB/socket.c **** 	while( getSn_CR(sn) );
  60              		.loc 1 228 2 is_stmt 1 view .LVU9
  61              	.L2:
  62              		.loc 1 228 23 view .LVU10
  63              		.loc 1 228 7 view .LVU11
  64              		.loc 1 228 9 is_stmt 0 view .LVU12
  65 0014 3046     		mov	r0, r6
  66 0016 FFF7FEFF 		bl	WIZCHIP_READ
  67              	.LVL3:
  68              		.loc 1 228 7 view .LVU13
  69 001a 0446     		mov	r4, r0
  70 001c 0028     		cmp	r0, #0
  71 001e F9D1     		bne	.L2
 229:ioLIB/socket.c **** 	/* clear all interrupt of the socket. */
 230:ioLIB/socket.c **** 	setSn_IR(sn, 0xFF);
  72              		.loc 1 230 2 is_stmt 1 view .LVU14
  73 0020 05F50070 		add	r0, r5, #512
  74 0024 1F21     		movs	r1, #31
  75 0026 FFF7FEFF 		bl	WIZCHIP_WRITE
  76              	.LVL4:
 231:ioLIB/socket.c **** 	//A20150401 : Release the sock_io_mode of socket n.
 232:ioLIB/socket.c **** 	sock_io_mode &= ~(1<<sn);
  77              		.loc 1 232 2 view .LVU15
  78              		.loc 1 232 15 is_stmt 0 view .LVU16
  79 002a 0D48     		ldr	r0, .L8
 233:ioLIB/socket.c **** 	//
 234:ioLIB/socket.c **** 	sock_is_sending &= ~(1<<sn);
  80              		.loc 1 234 18 view .LVU17
  81 002c 0D49     		ldr	r1, .L8+4
 232:ioLIB/socket.c **** 	//
  82              		.loc 1 232 15 view .LVU18
  83 002e 0288     		ldrh	r2, [r0]
 232:ioLIB/socket.c **** 	//
  84              		.loc 1 232 21 view .LVU19
  85 0030 0123     		movs	r3, #1
  86 0032 BB40     		lsls	r3, r3, r7
 232:ioLIB/socket.c **** 	//
  87              		.loc 1 232 15 view .LVU20
  88 0034 DB43     		mvns	r3, r3
  89 0036 1BB2     		sxth	r3, r3
  90 0038 1A40     		ands	r2, r2, r3
  91 003a 0280     		strh	r2, [r0]	@ movhi
  92              		.loc 1 234 2 is_stmt 1 view .LVU21
  93              		.loc 1 234 18 is_stmt 0 view .LVU22
  94 003c 0A88     		ldrh	r2, [r1]
  95 003e 1340     		ands	r3, r3, r2
  96 0040 0B80     		strh	r3, [r1]	@ movhi
 235:ioLIB/socket.c **** 	sock_remained_size[sn] = 0;
  97              		.loc 1 235 2 is_stmt 1 view .LVU23
  98              		.loc 1 235 25 is_stmt 0 view .LVU24
  99 0042 094A     		ldr	r2, .L8+8
 236:ioLIB/socket.c **** 	sock_pack_info[sn] = 0;
 100              		.loc 1 236 21 view .LVU25
 101 0044 094B     		ldr	r3, .L8+12
 235:ioLIB/socket.c **** 	sock_remained_size[sn] = 0;
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 7


 102              		.loc 1 235 25 view .LVU26
 103 0046 22F81740 		strh	r4, [r2, r7, lsl #1]	@ movhi
 104              		.loc 1 236 2 is_stmt 1 view .LVU27
 105              		.loc 1 236 21 is_stmt 0 view .LVU28
 106 004a DC55     		strb	r4, [r3, r7]
 237:ioLIB/socket.c **** 	while(getSn_SR(sn) != SOCK_CLOSED);
 107              		.loc 1 237 2 is_stmt 1 view .LVU29
 108              		.loc 1 237 8 is_stmt 0 view .LVU30
 109 004c 05F54075 		add	r5, r5, #768
 110              	.L3:
 111              		.loc 1 237 36 is_stmt 1 view .LVU31
 112              		.loc 1 237 7 view .LVU32
 113              		.loc 1 237 8 is_stmt 0 view .LVU33
 114 0050 2846     		mov	r0, r5
 115 0052 FFF7FEFF 		bl	WIZCHIP_READ
 116              	.LVL5:
 117              		.loc 1 237 7 view .LVU34
 118 0056 0028     		cmp	r0, #0
 119 0058 FAD1     		bne	.L3
 238:ioLIB/socket.c **** 	return SOCK_OK;
 239:ioLIB/socket.c **** }
 120              		.loc 1 239 1 view .LVU35
 121 005a 0120     		movs	r0, #1
 122 005c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 123              	.L9:
 124 005e 00BF     		.align	2
 125              	.L8:
 126 0060 00000000 		.word	.LANCHOR0
 127 0064 00000000 		.word	.LANCHOR1
 128 0068 00000000 		.word	.LANCHOR2
 129 006c 00000000 		.word	.LANCHOR3
 130              		.cfi_endproc
 131              	.LFE12:
 133              		.section	.text.socket,"ax",%progbits
 134              		.align	1
 135              		.p2align 2,,3
 136              		.global	socket
 137              		.syntax unified
 138              		.thumb
 139              		.thumb_func
 141              	socket:
 142              	.LVL6:
 143              	.LFB0:
 106:ioLIB/socket.c **** 	CHECK_SOCKNUM();
 144              		.loc 1 106 1 is_stmt 1 view -0
 145              		.cfi_startproc
 146              		@ args = 0, pretend = 0, frame = 8
 147              		@ frame_needed = 0, uses_anonymous_args = 0
 107:ioLIB/socket.c **** 	switch(protocol)
 148              		.loc 1 107 2 view .LVU37
 107:ioLIB/socket.c **** 	switch(protocol)
 149              		.loc 1 107 2 view .LVU38
 150 0000 0828     		cmp	r0, #8
 151 0002 00F28B80 		bhi	.L25
 106:ioLIB/socket.c **** 	CHECK_SOCKNUM();
 152              		.loc 1 106 1 is_stmt 0 view .LVU39
 153 0006 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 8


 154              	.LCFI1:
 155              		.cfi_def_cfa_offset 24
 156              		.cfi_offset 4, -24
 157              		.cfi_offset 5, -20
 158              		.cfi_offset 6, -16
 159              		.cfi_offset 7, -12
 160              		.cfi_offset 8, -8
 161              		.cfi_offset 14, -4
 108:ioLIB/socket.c **** 	{
 162              		.loc 1 108 2 view .LVU40
 163 000a 0129     		cmp	r1, #1
 106:ioLIB/socket.c **** 	CHECK_SOCKNUM();
 164              		.loc 1 106 1 view .LVU41
 165 000c 82B0     		sub	sp, sp, #8
 166              	.LCFI2:
 167              		.cfi_def_cfa_offset 32
 168 000e 0546     		mov	r5, r0
 169 0010 8846     		mov	r8, r1
 170 0012 1746     		mov	r7, r2
 171 0014 1E46     		mov	r6, r3
 107:ioLIB/socket.c **** 	switch(protocol)
 172              		.loc 1 107 2 is_stmt 1 view .LVU42
 107:ioLIB/socket.c **** 	switch(protocol)
 173              		.loc 1 107 17 view .LVU43
 108:ioLIB/socket.c **** 	{
 174              		.loc 1 108 2 view .LVU44
 175 0016 5BD0     		beq	.L12
 176 0018 8B1E     		subs	r3, r1, #2
 177              	.LVL7:
 108:ioLIB/socket.c **** 	{
 178              		.loc 1 108 2 is_stmt 0 view .LVU45
 179 001a 022B     		cmp	r3, #2
 180 001c 65D8     		bhi	.L42
 181              	.LVL8:
 182              	.L13:
 135:ioLIB/socket.c **** #if _WIZCHIP_ == 5200
 183              		.loc 1 135 2 is_stmt 1 view .LVU46
 135:ioLIB/socket.c **** #if _WIZCHIP_ == 5200
 184              		.loc 1 135 4 is_stmt 0 view .LVU47
 185 001e 7307     		lsls	r3, r6, #29
 186 0020 73D4     		bmi	.L29
 140:ioLIB/socket.c **** 	{
 187              		.loc 1 140 2 is_stmt 1 view .LVU48
 140:ioLIB/socket.c **** 	{
 188              		.loc 1 140 4 is_stmt 0 view .LVU49
 189 0022 3EB1     		cbz	r6, .L43
 142:ioLIB/socket.c ****    	{
 190              		.loc 1 142 5 is_stmt 1 view .LVU50
 191 0024 B8F1010F 		cmp	r8, #1
 192 0028 64D0     		beq	.L17
 193 002a B8F1020F 		cmp	r8, #2
 194 002e 66D0     		beq	.L18
 156:ioLIB/socket.c ****    	      }
 195              		.loc 1 156 41 is_stmt 0 view .LVU51
 196 0030 74B2     		sxtb	r4, r6
 197 0032 01E0     		b	.L16
 198              	.L43:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 9


 199 0034 3346     		mov	r3, r6
 200              	.L19:
 201 0036 1C46     		mov	r4, r3
 202              	.L16:
 169:ioLIB/socket.c **** 	//M20150601
 203              		.loc 1 169 2 is_stmt 1 view .LVU52
 204              	.LVL9:
 205              	.LBB19:
 206              	.LBI19:
 198:ioLIB/socket.c **** {
 207              		.loc 1 198 8 view .LVU53
 208              	.LBB20:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 209              		.loc 1 200 2 view .LVU54
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 210              		.loc 1 200 2 view .LVU55
 211 0038 2846     		mov	r0, r5
 212 003a FFF7FEFF 		bl	close.part.0
 213              	.LVL10:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 214              		.loc 1 200 2 is_stmt 0 view .LVU56
 215              	.LBE20:
 216              	.LBE19:
 174:ioLIB/socket.c ****     #endif
 217              		.loc 1 174 5 is_stmt 1 view .LVU57
 218 003e 04F0F001 		and	r1, r4, #240
 219 0042 6C01     		lsls	r4, r5, #5
 220 0044 0834     		adds	r4, r4, #8
 221 0046 41EA0801 		orr	r1, r1, r8
 222 004a 2046     		mov	r0, r4
 223 004c FFF7FEFF 		bl	WIZCHIP_WRITE
 224              	.LVL11:
 176:ioLIB/socket.c **** 	{
 225              		.loc 1 176 2 view .LVU58
 176:ioLIB/socket.c **** 	{
 226              		.loc 1 176 4 is_stmt 0 view .LVU59
 227 0050 47B9     		cbnz	r7, .L41
 178:ioLIB/socket.c **** 	   if(sock_any_port == 0xFFF0) sock_any_port = SOCK_ANY_PORT_NUM;
 228              		.loc 1 178 5 is_stmt 1 view .LVU60
 178:ioLIB/socket.c **** 	   if(sock_any_port == 0xFFF0) sock_any_port = SOCK_ANY_PORT_NUM;
 229              		.loc 1 178 25 is_stmt 0 view .LVU61
 230 0052 344A     		ldr	r2, .L44
 231 0054 1788     		ldrh	r7, [r2]
 232 0056 7B1C     		adds	r3, r7, #1
 179:ioLIB/socket.c **** 	}
 233              		.loc 1 179 7 view .LVU62
 234 0058 4FF6F071 		movw	r1, #65520
 178:ioLIB/socket.c **** 	   if(sock_any_port == 0xFFF0) sock_any_port = SOCK_ANY_PORT_NUM;
 235              		.loc 1 178 25 view .LVU63
 236 005c 9BB2     		uxth	r3, r3
 237              	.LVL12:
 179:ioLIB/socket.c **** 	}
 238              		.loc 1 179 5 is_stmt 1 view .LVU64
 179:ioLIB/socket.c **** 	}
 239              		.loc 1 179 7 is_stmt 0 view .LVU65
 240 005e 8B42     		cmp	r3, r1
 241 0060 56D0     		beq	.L22
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 10


 178:ioLIB/socket.c **** 	   if(sock_any_port == 0xFFF0) sock_any_port = SOCK_ANY_PORT_NUM;
 242              		.loc 1 178 25 view .LVU66
 243 0062 1380     		strh	r3, [r2]	@ movhi
 244              	.LVL13:
 245              	.L41:
 181:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_OPEN);
 246              		.loc 1 181 4 view .LVU67
 247 0064 390A     		lsrs	r1, r7, #8
 248 0066 FFB2     		uxtb	r7, r7
 249              	.L21:
 181:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_OPEN);
 250              		.loc 1 181 4 is_stmt 1 view .LVU68
 251 0068 04F58060 		add	r0, r4, #1024
 252 006c FFF7FEFF 		bl	WIZCHIP_WRITE
 253              	.LVL14:
 181:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_OPEN);
 254              		.loc 1 181 4 view .LVU69
 255 0070 3946     		mov	r1, r7
 256 0072 04F5A060 		add	r0, r4, #1280
 182:ioLIB/socket.c ****    while(getSn_CR(sn));
 257              		.loc 1 182 4 is_stmt 0 view .LVU70
 258 0076 04F58077 		add	r7, r4, #256
 181:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_OPEN);
 259              		.loc 1 181 4 view .LVU71
 260 007a FFF7FEFF 		bl	WIZCHIP_WRITE
 261              	.LVL15:
 181:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_OPEN);
 262              		.loc 1 181 23 is_stmt 1 view .LVU72
 182:ioLIB/socket.c ****    while(getSn_CR(sn));
 263              		.loc 1 182 4 view .LVU73
 264 007e 0121     		movs	r1, #1
 265 0080 3846     		mov	r0, r7
 266 0082 FFF7FEFF 		bl	WIZCHIP_WRITE
 267              	.LVL16:
 183:ioLIB/socket.c ****    //A20150401 : For release the previous sock_io_mode
 268              		.loc 1 183 4 view .LVU74
 269              	.L23:
 183:ioLIB/socket.c ****    //A20150401 : For release the previous sock_io_mode
 270              		.loc 1 183 23 discriminator 1 view .LVU75
 183:ioLIB/socket.c ****    //A20150401 : For release the previous sock_io_mode
 271              		.loc 1 183 9 discriminator 1 view .LVU76
 183:ioLIB/socket.c ****    //A20150401 : For release the previous sock_io_mode
 272              		.loc 1 183 10 is_stmt 0 discriminator 1 view .LVU77
 273 0086 3846     		mov	r0, r7
 274 0088 FFF7FEFF 		bl	WIZCHIP_READ
 275              	.LVL17:
 183:ioLIB/socket.c ****    //A20150401 : For release the previous sock_io_mode
 276              		.loc 1 183 9 discriminator 1 view .LVU78
 277 008c 0028     		cmp	r0, #0
 278 008e FAD1     		bne	.L23
 185:ioLIB/socket.c ****    //
 279              		.loc 1 185 4 is_stmt 1 view .LVU79
 187:ioLIB/socket.c ****    sock_is_sending &= ~(1<<sn);
 280              		.loc 1 187 15 is_stmt 0 view .LVU80
 281 0090 254F     		ldr	r7, .L44+4
 188:ioLIB/socket.c ****    sock_remained_size[sn] = 0;
 282              		.loc 1 188 20 view .LVU81
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 11


 283 0092 2649     		ldr	r1, .L44+8
 185:ioLIB/socket.c ****    //
 284              		.loc 1 185 17 view .LVU82
 285 0094 3B88     		ldrh	r3, [r7]
 185:ioLIB/socket.c ****    //
 286              		.loc 1 185 24 view .LVU83
 287 0096 0122     		movs	r2, #1
 288 0098 AA40     		lsls	r2, r2, r5
 185:ioLIB/socket.c ****    //
 289              		.loc 1 185 17 view .LVU84
 290 009a D243     		mvns	r2, r2
 291 009c 12B2     		sxth	r2, r2
 187:ioLIB/socket.c ****    sock_is_sending &= ~(1<<sn);
 292              		.loc 1 187 2 is_stmt 1 view .LVU85
 187:ioLIB/socket.c ****    sock_is_sending &= ~(1<<sn);
 293              		.loc 1 187 25 is_stmt 0 view .LVU86
 294 009e 06F00106 		and	r6, r6, #1
 185:ioLIB/socket.c ****    //
 295              		.loc 1 185 17 view .LVU87
 296 00a2 1340     		ands	r3, r3, r2
 187:ioLIB/socket.c ****    sock_is_sending &= ~(1<<sn);
 297              		.loc 1 187 43 view .LVU88
 298 00a4 AE40     		lsls	r6, r6, r5
 187:ioLIB/socket.c ****    sock_is_sending &= ~(1<<sn);
 299              		.loc 1 187 15 view .LVU89
 300 00a6 1E43     		orrs	r6, r6, r3
 188:ioLIB/socket.c ****    sock_remained_size[sn] = 0;
 301              		.loc 1 188 20 view .LVU90
 302 00a8 0B88     		ldrh	r3, [r1]
 187:ioLIB/socket.c ****    sock_is_sending &= ~(1<<sn);
 303              		.loc 1 187 15 view .LVU91
 304 00aa 3E80     		strh	r6, [r7]	@ movhi
 188:ioLIB/socket.c ****    sock_remained_size[sn] = 0;
 305              		.loc 1 188 4 is_stmt 1 view .LVU92
 188:ioLIB/socket.c ****    sock_remained_size[sn] = 0;
 306              		.loc 1 188 20 is_stmt 0 view .LVU93
 307 00ac 1A40     		ands	r2, r2, r3
 308 00ae 0A80     		strh	r2, [r1]	@ movhi
 189:ioLIB/socket.c ****    //M20150601 : repalce 0 with PACK_COMPLETED
 309              		.loc 1 189 4 is_stmt 1 view .LVU94
 192:ioLIB/socket.c ****    //
 310              		.loc 1 192 23 is_stmt 0 view .LVU95
 311 00b0 1F4B     		ldr	r3, .L44+12
 189:ioLIB/socket.c ****    //M20150601 : repalce 0 with PACK_COMPLETED
 312              		.loc 1 189 27 view .LVU96
 313 00b2 204A     		ldr	r2, .L44+16
 192:ioLIB/socket.c ****    //
 314              		.loc 1 192 23 view .LVU97
 315 00b4 5855     		strb	r0, [r3, r5]
 189:ioLIB/socket.c ****    //M20150601 : repalce 0 with PACK_COMPLETED
 316              		.loc 1 189 27 view .LVU98
 317 00b6 22F81500 		strh	r0, [r2, r5, lsl #1]	@ movhi
 192:ioLIB/socket.c ****    //
 318              		.loc 1 192 4 is_stmt 1 view .LVU99
 194:ioLIB/socket.c ****    return (int8_t)sn;
 319              		.loc 1 194 4 view .LVU100
 194:ioLIB/socket.c ****    return (int8_t)sn;
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 12


 320              		.loc 1 194 10 is_stmt 0 view .LVU101
 321 00ba 04F54074 		add	r4, r4, #768
 322              	.L24:
 194:ioLIB/socket.c ****    return (int8_t)sn;
 323              		.loc 1 194 38 is_stmt 1 discriminator 1 view .LVU102
 194:ioLIB/socket.c ****    return (int8_t)sn;
 324              		.loc 1 194 9 discriminator 1 view .LVU103
 194:ioLIB/socket.c ****    return (int8_t)sn;
 325              		.loc 1 194 10 is_stmt 0 discriminator 1 view .LVU104
 326 00be 2046     		mov	r0, r4
 327 00c0 FFF7FEFF 		bl	WIZCHIP_READ
 328              	.LVL18:
 194:ioLIB/socket.c ****    return (int8_t)sn;
 329              		.loc 1 194 9 discriminator 1 view .LVU105
 330 00c4 0028     		cmp	r0, #0
 331 00c6 FAD0     		beq	.L24
 195:ioLIB/socket.c **** }	   
 332              		.loc 1 195 4 is_stmt 1 view .LVU106
 195:ioLIB/socket.c **** }	   
 333              		.loc 1 195 11 is_stmt 0 view .LVU107
 334 00c8 68B2     		sxtb	r0, r5
 335              	.L11:
 196:ioLIB/socket.c **** 
 336              		.loc 1 196 1 view .LVU108
 337 00ca 02B0     		add	sp, sp, #8
 338              	.LCFI3:
 339              		.cfi_remember_state
 340              		.cfi_def_cfa_offset 24
 341              		@ sp needed
 342 00cc BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 343              	.LVL19:
 344              	.L12:
 345              	.LCFI4:
 346              		.cfi_restore_state
 347              	.LBB21:
 117:ioLIB/socket.c ****             getSIPR((uint8_t*)&taddr);
 348              		.loc 1 117 13 is_stmt 1 view .LVU109
 118:ioLIB/socket.c ****             if(taddr == 0) return SOCKERR_SOCKINIT;
 349              		.loc 1 118 13 view .LVU110
 350 00d0 0422     		movs	r2, #4
 351              	.LVL20:
 118:ioLIB/socket.c ****             if(taddr == 0) return SOCKERR_SOCKINIT;
 352              		.loc 1 118 13 is_stmt 0 view .LVU111
 353 00d2 4FF47060 		mov	r0, #3840
 354              	.LVL21:
 118:ioLIB/socket.c ****             if(taddr == 0) return SOCKERR_SOCKINIT;
 355              		.loc 1 118 13 view .LVU112
 356 00d6 0DEB0201 		add	r1, sp, r2
 357              	.LVL22:
 118:ioLIB/socket.c ****             if(taddr == 0) return SOCKERR_SOCKINIT;
 358              		.loc 1 118 13 view .LVU113
 359 00da FFF7FEFF 		bl	WIZCHIP_READ_BUF
 360              	.LVL23:
 119:ioLIB/socket.c **** 	    break;
 361              		.loc 1 119 13 is_stmt 1 view .LVU114
 119:ioLIB/socket.c **** 	    break;
 362              		.loc 1 119 15 is_stmt 0 view .LVU115
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 13


 363 00de 019B     		ldr	r3, [sp, #4]
 119:ioLIB/socket.c **** 	    break;
 364              		.loc 1 119 35 view .LVU116
 365 00e0 6FF00200 		mvn	r0, #2
 119:ioLIB/socket.c **** 	    break;
 366              		.loc 1 119 15 view .LVU117
 367 00e4 002B     		cmp	r3, #0
 368 00e6 9AD1     		bne	.L13
 369 00e8 EFE7     		b	.L11
 370              	.LVL24:
 371              	.L42:
 119:ioLIB/socket.c **** 	    break;
 372              		.loc 1 119 15 view .LVU118
 373              	.LBE21:
 108:ioLIB/socket.c **** 	{
 374              		.loc 1 108 2 view .LVU119
 375 00ea 6FF00400 		mvn	r0, #4
 376              	.LVL25:
 196:ioLIB/socket.c **** 
 377              		.loc 1 196 1 view .LVU120
 378 00ee 02B0     		add	sp, sp, #8
 379              	.LCFI5:
 380              		.cfi_remember_state
 381              		.cfi_def_cfa_offset 24
 382              		@ sp needed
 383 00f0 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 384              	.LVL26:
 385              	.L17:
 386              	.LCFI6:
 387              		.cfi_restore_state
 149:ioLIB/socket.c ****           #endif
 388              		.loc 1 149 11 is_stmt 1 view .LVU121
 149:ioLIB/socket.c ****           #endif
 389              		.loc 1 149 13 is_stmt 0 view .LVU122
 390 00f4 16F0210F 		tst	r6, #33
 391 00f8 07D0     		beq	.L29
 392              	.L40:
 393 00fa 73B2     		sxtb	r3, r6
 394 00fc 9BE7     		b	.L19
 395              	.L18:
 154:ioLIB/socket.c ****    	      {
 396              		.loc 1 154 11 is_stmt 1 view .LVU123
 159:ioLIB/socket.c ****       	      {
 397              		.loc 1 159 14 view .LVU124
 159:ioLIB/socket.c ****       	      {
 398              		.loc 1 159 16 is_stmt 0 view .LVU125
 399 00fe 16F0300F 		tst	r6, #48
 400 0102 FAD0     		beq	.L40
 156:ioLIB/socket.c ****    	      }
 401              		.loc 1 156 14 is_stmt 1 view .LVU126
 156:ioLIB/socket.c ****    	      }
 402              		.loc 1 156 16 is_stmt 0 view .LVU127
 403 0104 73B2     		sxtb	r3, r6
 404 0106 002B     		cmp	r3, #0
 405 0108 95DB     		blt	.L19
 406              	.L29:
 135:ioLIB/socket.c **** #if _WIZCHIP_ == 5200
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 14


 407              		.loc 1 135 32 view .LVU128
 408 010a 6FF00500 		mvn	r0, #5
 409 010e DCE7     		b	.L11
 410              	.LVL27:
 411              	.L22:
 179:ioLIB/socket.c **** 	}
 412              		.loc 1 179 33 is_stmt 1 discriminator 1 view .LVU129
 179:ioLIB/socket.c **** 	}
 413              		.loc 1 179 47 is_stmt 0 discriminator 1 view .LVU130
 414 0110 4FF44043 		mov	r3, #49152
 415 0114 1380     		strh	r3, [r2]	@ movhi
 416 0116 EF27     		movs	r7, #239
 417              	.LVL28:
 179:ioLIB/socket.c **** 	}
 418              		.loc 1 179 47 discriminator 1 view .LVU131
 419 0118 FF21     		movs	r1, #255
 420 011a A5E7     		b	.L21
 421              	.LVL29:
 422              	.L25:
 423              	.LCFI7:
 424              		.cfi_def_cfa_offset 0
 425              		.cfi_restore 4
 426              		.cfi_restore 5
 427              		.cfi_restore 6
 428              		.cfi_restore 7
 429              		.cfi_restore 8
 430              		.cfi_restore 14
 107:ioLIB/socket.c **** 	switch(protocol)
 431              		.loc 1 107 2 view .LVU132
 432 011c 4FF0FF30 		mov	r0, #-1
 433              	.LVL30:
 196:ioLIB/socket.c **** 
 434              		.loc 1 196 1 view .LVU133
 435 0120 7047     		bx	lr
 436              	.L45:
 437 0122 00BF     		.align	2
 438              	.L44:
 439 0124 00000000 		.word	.LANCHOR4
 440 0128 00000000 		.word	.LANCHOR0
 441 012c 00000000 		.word	.LANCHOR1
 442 0130 00000000 		.word	.LANCHOR3
 443 0134 00000000 		.word	.LANCHOR2
 444              		.cfi_endproc
 445              	.LFE0:
 447              		.section	.text.close,"ax",%progbits
 448              		.align	1
 449              		.p2align 2,,3
 450              		.global	close
 451              		.syntax unified
 452              		.thumb
 453              		.thumb_func
 455              	close:
 456              	.LVL31:
 457              	.LFB1:
 199:ioLIB/socket.c **** 	CHECK_SOCKNUM();
 458              		.loc 1 199 1 is_stmt 1 view -0
 459              		.cfi_startproc
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 15


 460              		@ args = 0, pretend = 0, frame = 0
 461              		@ frame_needed = 0, uses_anonymous_args = 0
 462              		@ link register save eliminated.
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 463              		.loc 1 200 2 view .LVU135
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 464              		.loc 1 200 2 view .LVU136
 465 0000 0828     		cmp	r0, #8
 466 0002 02D9     		bls	.L48
 467              		.loc 1 239 1 is_stmt 0 view .LVU137
 468 0004 4FF0FF30 		mov	r0, #-1
 469              	.LVL32:
 470              		.loc 1 239 1 view .LVU138
 471 0008 7047     		bx	lr
 472              	.LVL33:
 473              	.L48:
 474              		.loc 1 239 1 view .LVU139
 475 000a FFF7FEBF 		b	close.part.0
 476              	.LVL34:
 477              		.loc 1 239 1 view .LVU140
 478              		.cfi_endproc
 479              	.LFE1:
 481 000e 00BF     		.section	.text.listen,"ax",%progbits
 482              		.align	1
 483              		.p2align 2,,3
 484              		.global	listen
 485              		.syntax unified
 486              		.thumb
 487              		.thumb_func
 489              	listen:
 490              	.LVL35:
 491              	.LFB2:
 240:ioLIB/socket.c **** 
 241:ioLIB/socket.c **** int8_t listen(uint8_t sn)
 242:ioLIB/socket.c **** {
 492              		.loc 1 242 1 is_stmt 1 view -0
 493              		.cfi_startproc
 494              		@ args = 0, pretend = 0, frame = 0
 495              		@ frame_needed = 0, uses_anonymous_args = 0
 243:ioLIB/socket.c **** 	CHECK_SOCKNUM();
 496              		.loc 1 243 2 view .LVU142
 497              		.loc 1 243 2 view .LVU143
 498 0000 0828     		cmp	r0, #8
 499 0002 29D8     		bhi	.L54
 500              		.loc 1 243 2 discriminator 2 view .LVU144
 501              		.loc 1 243 17 discriminator 2 view .LVU145
 244:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 502              		.loc 1 244 4 discriminator 2 view .LVU146
 503              		.loc 1 244 4 discriminator 2 view .LVU147
 242:ioLIB/socket.c **** 	CHECK_SOCKNUM();
 504              		.loc 1 242 1 is_stmt 0 discriminator 2 view .LVU148
 505 0004 70B5     		push	{r4, r5, r6, lr}
 506              	.LCFI8:
 507              		.cfi_def_cfa_offset 16
 508              		.cfi_offset 4, -16
 509              		.cfi_offset 5, -12
 510              		.cfi_offset 6, -8
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 16


 511              		.cfi_offset 14, -4
 512              		.loc 1 244 4 discriminator 2 view .LVU149
 513 0006 4401     		lsls	r4, r0, #5
 514 0008 0834     		adds	r4, r4, #8
 515 000a 0546     		mov	r5, r0
 516 000c 2046     		mov	r0, r4
 517              	.LVL36:
 518              		.loc 1 244 4 discriminator 2 view .LVU150
 519 000e FFF7FEFF 		bl	WIZCHIP_READ
 520              	.LVL37:
 521 0012 00F00F00 		and	r0, r0, #15
 522 0016 0128     		cmp	r0, #1
 523 0018 18D1     		bne	.L55
 524              		.loc 1 244 4 is_stmt 1 discriminator 2 view .LVU151
 525              		.loc 1 244 29 discriminator 2 view .LVU152
 245:ioLIB/socket.c **** 	CHECK_SOCKINIT();
 526              		.loc 1 245 2 discriminator 2 view .LVU153
 527              		.loc 1 245 2 discriminator 2 view .LVU154
 528 001a 04F54076 		add	r6, r4, #768
 529 001e 3046     		mov	r0, r6
 530 0020 FFF7FEFF 		bl	WIZCHIP_READ
 531              	.LVL38:
 532 0024 1328     		cmp	r0, #19
 533 0026 14D1     		bne	.L56
 534              		.loc 1 245 2 discriminator 2 view .LVU155
 535              		.loc 1 245 18 discriminator 2 view .LVU156
 246:ioLIB/socket.c **** 	setSn_CR(sn,Sn_CR_LISTEN);
 536              		.loc 1 246 2 discriminator 2 view .LVU157
 537 0028 04F58074 		add	r4, r4, #256
 538 002c 0221     		movs	r1, #2
 539 002e 2046     		mov	r0, r4
 540 0030 FFF7FEFF 		bl	WIZCHIP_WRITE
 541              	.LVL39:
 247:ioLIB/socket.c **** 	while(getSn_CR(sn));
 542              		.loc 1 247 2 discriminator 2 view .LVU158
 543              	.L51:
 544              		.loc 1 247 21 discriminator 1 view .LVU159
 545              		.loc 1 247 7 discriminator 1 view .LVU160
 546              		.loc 1 247 8 is_stmt 0 discriminator 1 view .LVU161
 547 0034 2046     		mov	r0, r4
 548 0036 FFF7FEFF 		bl	WIZCHIP_READ
 549              	.LVL40:
 550              		.loc 1 247 7 discriminator 1 view .LVU162
 551 003a 0028     		cmp	r0, #0
 552 003c FAD1     		bne	.L51
 248:ioLIB/socket.c ****    while(getSn_SR(sn) != SOCK_LISTEN)
 553              		.loc 1 248 4 is_stmt 1 view .LVU163
 554              		.loc 1 248 9 view .LVU164
 555              		.loc 1 248 10 is_stmt 0 view .LVU165
 556 003e 3046     		mov	r0, r6
 557 0040 FFF7FEFF 		bl	WIZCHIP_READ
 558              	.LVL41:
 559              		.loc 1 248 9 view .LVU166
 560 0044 1428     		cmp	r0, #20
 561 0046 0AD1     		bne	.L53
 249:ioLIB/socket.c ****    {
 250:ioLIB/socket.c ****          close(sn);
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 17


 251:ioLIB/socket.c ****          return SOCKERR_SOCKCLOSED;
 252:ioLIB/socket.c ****    }
 253:ioLIB/socket.c ****    return SOCK_OK;
 562              		.loc 1 253 11 view .LVU167
 563 0048 0120     		movs	r0, #1
 254:ioLIB/socket.c **** }
 564              		.loc 1 254 1 view .LVU168
 565 004a 70BD     		pop	{r4, r5, r6, pc}
 566              	.L55:
 244:ioLIB/socket.c **** 	CHECK_SOCKINIT();
 567              		.loc 1 244 4 view .LVU169
 568 004c 6FF00400 		mvn	r0, #4
 569              		.loc 1 254 1 view .LVU170
 570 0050 70BD     		pop	{r4, r5, r6, pc}
 571              	.L56:
 245:ioLIB/socket.c **** 	setSn_CR(sn,Sn_CR_LISTEN);
 572              		.loc 1 245 2 view .LVU171
 573 0052 6FF00200 		mvn	r0, #2
 574              		.loc 1 254 1 view .LVU172
 575 0056 70BD     		pop	{r4, r5, r6, pc}
 576              	.LVL42:
 577              	.L54:
 578              	.LCFI9:
 579              		.cfi_def_cfa_offset 0
 580              		.cfi_restore 4
 581              		.cfi_restore 5
 582              		.cfi_restore 6
 583              		.cfi_restore 14
 243:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 584              		.loc 1 243 2 view .LVU173
 585 0058 4FF0FF30 		mov	r0, #-1
 586              	.LVL43:
 587              		.loc 1 254 1 view .LVU174
 588 005c 7047     		bx	lr
 589              	.L53:
 590              	.LCFI10:
 591              		.cfi_def_cfa_offset 16
 592              		.cfi_offset 4, -16
 593              		.cfi_offset 5, -12
 594              		.cfi_offset 6, -8
 595              		.cfi_offset 14, -4
 250:ioLIB/socket.c ****          return SOCKERR_SOCKCLOSED;
 596              		.loc 1 250 10 is_stmt 1 view .LVU175
 597              	.LVL44:
 598              	.LBB22:
 599              	.LBI22:
 198:ioLIB/socket.c **** {
 600              		.loc 1 198 8 view .LVU176
 601              	.LBB23:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 602              		.loc 1 200 2 view .LVU177
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 603              		.loc 1 200 2 view .LVU178
 604 005e 2846     		mov	r0, r5
 605 0060 FFF7FEFF 		bl	close.part.0
 606              	.LVL45:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 18


 607              		.loc 1 200 2 is_stmt 0 view .LVU179
 608              	.LBE23:
 609              	.LBE22:
 251:ioLIB/socket.c ****    }
 610              		.loc 1 251 10 is_stmt 1 view .LVU180
 251:ioLIB/socket.c ****    }
 611              		.loc 1 251 17 is_stmt 0 view .LVU181
 612 0064 6FF00300 		mvn	r0, #3
 613              		.loc 1 254 1 view .LVU182
 614 0068 70BD     		pop	{r4, r5, r6, pc}
 615              		.cfi_endproc
 616              	.LFE2:
 618 006a 00BF     		.section	.text.connect,"ax",%progbits
 619              		.align	1
 620              		.p2align 2,,3
 621              		.global	connect
 622              		.syntax unified
 623              		.thumb
 624              		.thumb_func
 626              	connect:
 627              	.LVL46:
 628              	.LFB3:
 255:ioLIB/socket.c **** 
 256:ioLIB/socket.c **** 
 257:ioLIB/socket.c **** int8_t connect(uint8_t sn, uint8_t * addr, uint16_t port)
 258:ioLIB/socket.c **** {
 629              		.loc 1 258 1 is_stmt 1 view -0
 630              		.cfi_startproc
 631              		@ args = 0, pretend = 0, frame = 0
 632              		@ frame_needed = 0, uses_anonymous_args = 0
 259:ioLIB/socket.c ****    CHECK_SOCKNUM();
 633              		.loc 1 259 4 view .LVU184
 634              		.loc 1 259 4 view .LVU185
 635 0000 0828     		cmp	r0, #8
 636 0002 70D8     		bhi	.L69
 637              		.loc 1 259 4 discriminator 2 view .LVU186
 638              		.loc 1 259 19 discriminator 2 view .LVU187
 260:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 639              		.loc 1 260 4 discriminator 2 view .LVU188
 640              		.loc 1 260 4 discriminator 2 view .LVU189
 258:ioLIB/socket.c ****    CHECK_SOCKNUM();
 641              		.loc 1 258 1 is_stmt 0 discriminator 2 view .LVU190
 642 0004 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 643              	.LCFI11:
 644              		.cfi_def_cfa_offset 32
 645              		.cfi_offset 3, -32
 646              		.cfi_offset 4, -28
 647              		.cfi_offset 5, -24
 648              		.cfi_offset 6, -20
 649              		.cfi_offset 7, -16
 650              		.cfi_offset 8, -12
 651              		.cfi_offset 9, -8
 652              		.cfi_offset 14, -4
 653              		.loc 1 260 4 discriminator 2 view .LVU191
 654 0008 4FF00409 		mov	r9, #4
 655 000c 0124     		movs	r4, #1
 656 000e 19FB0044 		smlabb	r4, r9, r0, r4
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 19


 657 0012 E400     		lsls	r4, r4, #3
 658 0014 0746     		mov	r7, r0
 659 0016 2046     		mov	r0, r4
 660              	.LVL47:
 661              		.loc 1 260 4 discriminator 2 view .LVU192
 662 0018 0E46     		mov	r6, r1
 663 001a 9046     		mov	r8, r2
 664 001c FFF7FEFF 		bl	WIZCHIP_READ
 665              	.LVL48:
 666              		.loc 1 260 4 discriminator 2 view .LVU193
 667 0020 00F00F00 		and	r0, r0, #15
 668 0024 0128     		cmp	r0, #1
 669 0026 5BD1     		bne	.L70
 670              		.loc 1 260 4 is_stmt 1 discriminator 2 view .LVU194
 671              		.loc 1 260 29 discriminator 2 view .LVU195
 261:ioLIB/socket.c ****    CHECK_SOCKINIT();
 672              		.loc 1 261 4 discriminator 2 view .LVU196
 673              		.loc 1 261 4 discriminator 2 view .LVU197
 674 0028 04F54075 		add	r5, r4, #768
 675 002c 2846     		mov	r0, r5
 676 002e FFF7FEFF 		bl	WIZCHIP_READ
 677              	.LVL49:
 678 0032 1328     		cmp	r0, #19
 679 0034 5DD1     		bne	.L71
 680              		.loc 1 261 4 discriminator 2 view .LVU198
 681              		.loc 1 261 20 discriminator 2 view .LVU199
 682              	.LBB24:
 262:ioLIB/socket.c ****    //M20140501 : For avoiding fatal error on memory align mismatched
 263:ioLIB/socket.c ****    //if( *((uint32_t*)addr) == 0xFFFFFFFF || *((uint32_t*)addr) == 0) return SOCKERR_IPINVALID;
 264:ioLIB/socket.c ****    {
 265:ioLIB/socket.c ****       uint32_t taddr;
 683              		.loc 1 265 7 discriminator 2 view .LVU200
 266:ioLIB/socket.c ****       taddr = ((uint32_t)addr[0] & 0x000000FF);
 684              		.loc 1 266 7 discriminator 2 view .LVU201
 685              	.LVL50:
 267:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[1] & 0x000000FF);
 686              		.loc 1 267 7 discriminator 2 view .LVU202
 266:ioLIB/socket.c ****       taddr = ((uint32_t)addr[0] & 0x000000FF);
 687              		.loc 1 266 13 is_stmt 0 discriminator 2 view .LVU203
 688 0036 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 689              	.LVL51:
 268:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[2] & 0x000000FF);
 690              		.loc 1 268 7 is_stmt 1 discriminator 2 view .LVU204
 267:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[1] & 0x000000FF);
 691              		.loc 1 267 49 is_stmt 0 discriminator 2 view .LVU205
 692 0038 7278     		ldrb	r2, [r6, #1]	@ zero_extendqisi2
 267:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[1] & 0x000000FF);
 693              		.loc 1 267 13 discriminator 2 view .LVU206
 694 003a 02EB0322 		add	r2, r2, r3, lsl #8
 695              	.LVL52:
 269:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[3] & 0x000000FF);
 696              		.loc 1 269 7 is_stmt 1 discriminator 2 view .LVU207
 270:ioLIB/socket.c ****       if( taddr == 0xFFFFFFFF || taddr == 0) return SOCKERR_IPINVALID;
 697              		.loc 1 270 7 discriminator 2 view .LVU208
 268:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[2] & 0x000000FF);
 698              		.loc 1 268 49 is_stmt 0 discriminator 2 view .LVU209
 699 003e B378     		ldrb	r3, [r6, #2]	@ zero_extendqisi2
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 20


 268:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[2] & 0x000000FF);
 700              		.loc 1 268 13 discriminator 2 view .LVU210
 701 0040 03EB0222 		add	r2, r3, r2, lsl #8
 702              	.LVL53:
 269:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[3] & 0x000000FF);
 703              		.loc 1 269 49 discriminator 2 view .LVU211
 704 0044 F378     		ldrb	r3, [r6, #3]	@ zero_extendqisi2
 705              	.LVL54:
 706              		.loc 1 270 31 discriminator 2 view .LVU212
 707 0046 013B     		subs	r3, r3, #1
 708              	.LVL55:
 709              		.loc 1 270 31 discriminator 2 view .LVU213
 710 0048 03EB0223 		add	r3, r3, r2, lsl #8
 711              	.LVL56:
 712              		.loc 1 270 9 discriminator 2 view .LVU214
 713 004c 0333     		adds	r3, r3, #3
 714 004e 53D8     		bhi	.L72
 715              	.LBE24:
 271:ioLIB/socket.c ****    }
 272:ioLIB/socket.c ****    //
 273:ioLIB/socket.c **** 	
 274:ioLIB/socket.c **** 	if(port == 0) return SOCKERR_PORTZERO;
 716              		.loc 1 274 2 is_stmt 1 view .LVU215
 717              		.loc 1 274 4 is_stmt 0 view .LVU216
 718 0050 B8F1000F 		cmp	r8, #0
 719 0054 4AD0     		beq	.L73
 275:ioLIB/socket.c **** 	setSn_DIPR(sn,addr);
 720              		.loc 1 275 2 is_stmt 1 view .LVU217
 721 0056 3146     		mov	r1, r6
 722 0058 4A46     		mov	r2, r9
 723 005a 04F54060 		add	r0, r4, #3072
 724 005e FFF7FEFF 		bl	WIZCHIP_WRITE_BUF
 725              	.LVL57:
 276:ioLIB/socket.c **** 	setSn_DPORT(sn,port);
 726              		.loc 1 276 2 view .LVU218
 727 0062 4FEA1821 		lsr	r1, r8, #8
 728 0066 04F58050 		add	r0, r4, #4096
 729 006a FFF7FEFF 		bl	WIZCHIP_WRITE
 730              	.LVL58:
 731              		.loc 1 276 2 view .LVU219
 277:ioLIB/socket.c **** 	setSn_CR(sn,Sn_CR_CONNECT);
 732              		.loc 1 277 2 is_stmt 0 view .LVU220
 733 006e 04F58076 		add	r6, r4, #256
 734              	.LVL59:
 276:ioLIB/socket.c **** 	setSn_DPORT(sn,port);
 735              		.loc 1 276 2 view .LVU221
 736 0072 5FFA88F1 		uxtb	r1, r8
 737 0076 04F58850 		add	r0, r4, #4352
 738 007a FFF7FEFF 		bl	WIZCHIP_WRITE
 739              	.LVL60:
 276:ioLIB/socket.c **** 	setSn_DPORT(sn,port);
 740              		.loc 1 276 22 is_stmt 1 view .LVU222
 741              		.loc 1 277 2 view .LVU223
 742 007e 4946     		mov	r1, r9
 743 0080 3046     		mov	r0, r6
 744 0082 FFF7FEFF 		bl	WIZCHIP_WRITE
 745              	.LVL61:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 21


 278:ioLIB/socket.c ****    while(getSn_CR(sn));
 746              		.loc 1 278 4 view .LVU224
 747              	.L65:
 748              		.loc 1 278 23 discriminator 1 view .LVU225
 749              		.loc 1 278 9 discriminator 1 view .LVU226
 750              		.loc 1 278 10 is_stmt 0 discriminator 1 view .LVU227
 751 0086 3046     		mov	r0, r6
 752 0088 FFF7FEFF 		bl	WIZCHIP_READ
 753              	.LVL62:
 754              		.loc 1 278 9 discriminator 1 view .LVU228
 755 008c 0028     		cmp	r0, #0
 756 008e FAD1     		bne	.L65
 279:ioLIB/socket.c ****    if(sock_io_mode & (1<<sn)) return SOCK_BUSY;
 757              		.loc 1 279 4 is_stmt 1 view .LVU229
 758              		.loc 1 279 7 is_stmt 0 view .LVU230
 759 0090 1B4B     		ldr	r3, .L82
 760 0092 1B88     		ldrh	r3, [r3]
 761 0094 43FA07F7 		asr	r7, r3, r7
 762              		.loc 1 279 6 view .LVU231
 763 0098 FA07     		lsls	r2, r7, #31
 764 009a 13D4     		bmi	.L64
 280:ioLIB/socket.c ****    while(getSn_SR(sn) != SOCK_ESTABLISHED)
 281:ioLIB/socket.c ****    {
 282:ioLIB/socket.c **** 		if (getSn_IR(sn) & Sn_IR_TIMEOUT)
 765              		.loc 1 282 7 view .LVU232
 766 009c 04F50074 		add	r4, r4, #512
 767 00a0 08E0     		b	.L66
 768              	.L68:
 769 00a2 FFF7FEFF 		bl	WIZCHIP_READ
 770              	.LVL63:
 283:ioLIB/socket.c **** 		{
 284:ioLIB/socket.c **** 			setSn_IR(sn, Sn_IR_TIMEOUT);
 285:ioLIB/socket.c ****             return SOCKERR_TIMEOUT;
 286:ioLIB/socket.c **** 		}
 287:ioLIB/socket.c **** 
 288:ioLIB/socket.c **** 		if (getSn_SR(sn) == SOCK_CLOSED)
 771              		.loc 1 288 3 is_stmt 1 view .LVU233
 282:ioLIB/socket.c **** 		{
 772              		.loc 1 282 7 is_stmt 0 view .LVU234
 773 00a6 0346     		mov	r3, r0
 282:ioLIB/socket.c **** 		{
 774              		.loc 1 282 6 view .LVU235
 775 00a8 1B07     		lsls	r3, r3, #28
 776              		.loc 1 288 7 view .LVU236
 777 00aa 2846     		mov	r0, r5
 282:ioLIB/socket.c **** 		{
 778              		.loc 1 282 6 view .LVU237
 779 00ac 0CD4     		bmi	.L81
 780              		.loc 1 288 7 view .LVU238
 781 00ae FFF7FEFF 		bl	WIZCHIP_READ
 782              	.LVL64:
 783              		.loc 1 288 6 view .LVU239
 784 00b2 88B1     		cbz	r0, .L75
 785              	.L66:
 280:ioLIB/socket.c ****    while(getSn_SR(sn) != SOCK_ESTABLISHED)
 786              		.loc 1 280 9 is_stmt 1 view .LVU240
 280:ioLIB/socket.c ****    while(getSn_SR(sn) != SOCK_ESTABLISHED)
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 22


 787              		.loc 1 280 10 is_stmt 0 view .LVU241
 788 00b4 2846     		mov	r0, r5
 789 00b6 FFF7FEFF 		bl	WIZCHIP_READ
 790              	.LVL65:
 282:ioLIB/socket.c **** 		{
 791              		.loc 1 282 3 is_stmt 1 view .LVU242
 280:ioLIB/socket.c ****    while(getSn_SR(sn) != SOCK_ESTABLISHED)
 792              		.loc 1 280 10 is_stmt 0 view .LVU243
 793 00ba 0346     		mov	r3, r0
 280:ioLIB/socket.c ****    while(getSn_SR(sn) != SOCK_ESTABLISHED)
 794              		.loc 1 280 9 view .LVU244
 795 00bc 172B     		cmp	r3, #23
 282:ioLIB/socket.c **** 		{
 796              		.loc 1 282 7 view .LVU245
 797 00be 2046     		mov	r0, r4
 280:ioLIB/socket.c ****    while(getSn_SR(sn) != SOCK_ESTABLISHED)
 798              		.loc 1 280 9 view .LVU246
 799 00c0 EFD1     		bne	.L68
 289:ioLIB/socket.c **** 		{
 290:ioLIB/socket.c **** 			return SOCKERR_SOCKCLOSED;
 291:ioLIB/socket.c **** 		}
 292:ioLIB/socket.c **** 	}
 293:ioLIB/socket.c ****    
 294:ioLIB/socket.c ****    return SOCK_OK;
 800              		.loc 1 294 11 view .LVU247
 801 00c2 0120     		movs	r0, #1
 802              	.L64:
 295:ioLIB/socket.c **** }
 803              		.loc 1 295 1 view .LVU248
 804 00c4 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 805              	.L81:
 284:ioLIB/socket.c ****             return SOCKERR_TIMEOUT;
 806              		.loc 1 284 4 is_stmt 1 view .LVU249
 807 00c8 2046     		mov	r0, r4
 808 00ca 0821     		movs	r1, #8
 809 00cc FFF7FEFF 		bl	WIZCHIP_WRITE
 810              	.LVL66:
 285:ioLIB/socket.c **** 		}
 811              		.loc 1 285 13 view .LVU250
 285:ioLIB/socket.c **** 		}
 812              		.loc 1 285 20 is_stmt 0 view .LVU251
 813 00d0 6FF00C00 		mvn	r0, #12
 814              		.loc 1 295 1 view .LVU252
 815 00d4 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 816              	.L75:
 290:ioLIB/socket.c **** 		}
 817              		.loc 1 290 11 view .LVU253
 818 00d8 6FF00300 		mvn	r0, #3
 819              		.loc 1 295 1 view .LVU254
 820 00dc BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 821              	.LVL67:
 822              	.L70:
 260:ioLIB/socket.c ****    CHECK_SOCKINIT();
 823              		.loc 1 260 4 view .LVU255
 824 00e0 6FF00400 		mvn	r0, #4
 825 00e4 EEE7     		b	.L64
 826              	.LVL68:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 23


 827              	.L69:
 828              	.LCFI12:
 829              		.cfi_def_cfa_offset 0
 830              		.cfi_restore 3
 831              		.cfi_restore 4
 832              		.cfi_restore 5
 833              		.cfi_restore 6
 834              		.cfi_restore 7
 835              		.cfi_restore 8
 836              		.cfi_restore 9
 837              		.cfi_restore 14
 259:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 838              		.loc 1 259 4 view .LVU256
 839 00e6 4FF0FF30 		mov	r0, #-1
 840              	.LVL69:
 841              		.loc 1 295 1 view .LVU257
 842 00ea 7047     		bx	lr
 843              	.LVL70:
 844              	.L73:
 845              	.LCFI13:
 846              		.cfi_def_cfa_offset 32
 847              		.cfi_offset 3, -32
 848              		.cfi_offset 4, -28
 849              		.cfi_offset 5, -24
 850              		.cfi_offset 6, -20
 851              		.cfi_offset 7, -16
 852              		.cfi_offset 8, -12
 853              		.cfi_offset 9, -8
 854              		.cfi_offset 14, -4
 274:ioLIB/socket.c **** 	setSn_DIPR(sn,addr);
 855              		.loc 1 274 23 view .LVU258
 856 00ec 6FF00A00 		mvn	r0, #10
 857 00f0 E8E7     		b	.L64
 858              	.LVL71:
 859              	.L71:
 261:ioLIB/socket.c ****    //M20140501 : For avoiding fatal error on memory align mismatched
 860              		.loc 1 261 4 view .LVU259
 861 00f2 6FF00200 		mvn	r0, #2
 862 00f6 E5E7     		b	.L64
 863              	.LVL72:
 864              	.L72:
 865              	.LBB25:
 270:ioLIB/socket.c ****    }
 866              		.loc 1 270 53 view .LVU260
 867 00f8 6FF00B00 		mvn	r0, #11
 868 00fc E2E7     		b	.L64
 869              	.L83:
 870 00fe 00BF     		.align	2
 871              	.L82:
 872 0100 00000000 		.word	.LANCHOR0
 873              	.LBE25:
 874              		.cfi_endproc
 875              	.LFE3:
 877              		.section	.text.disconnect,"ax",%progbits
 878              		.align	1
 879              		.p2align 2,,3
 880              		.global	disconnect
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 24


 881              		.syntax unified
 882              		.thumb
 883              		.thumb_func
 885              	disconnect:
 886              	.LVL73:
 887              	.LFB4:
 296:ioLIB/socket.c **** 
 297:ioLIB/socket.c **** int8_t disconnect(uint8_t sn)
 298:ioLIB/socket.c **** {
 888              		.loc 1 298 1 is_stmt 1 view -0
 889              		.cfi_startproc
 890              		@ args = 0, pretend = 0, frame = 0
 891              		@ frame_needed = 0, uses_anonymous_args = 0
 299:ioLIB/socket.c ****    CHECK_SOCKNUM();
 892              		.loc 1 299 4 view .LVU262
 893              		.loc 1 299 4 view .LVU263
 894 0000 0828     		cmp	r0, #8
 895 0002 3DD8     		bhi	.L90
 896              		.loc 1 299 4 discriminator 2 view .LVU264
 897              		.loc 1 299 19 discriminator 2 view .LVU265
 300:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 898              		.loc 1 300 4 discriminator 2 view .LVU266
 899              		.loc 1 300 4 discriminator 2 view .LVU267
 298:ioLIB/socket.c ****    CHECK_SOCKNUM();
 900              		.loc 1 298 1 is_stmt 0 discriminator 2 view .LVU268
 901 0004 70B5     		push	{r4, r5, r6, lr}
 902              	.LCFI14:
 903              		.cfi_def_cfa_offset 16
 904              		.cfi_offset 4, -16
 905              		.cfi_offset 5, -12
 906              		.cfi_offset 6, -8
 907              		.cfi_offset 14, -4
 908              		.loc 1 300 4 discriminator 2 view .LVU269
 909 0006 4401     		lsls	r4, r0, #5
 910 0008 0834     		adds	r4, r4, #8
 911 000a 0646     		mov	r6, r0
 912 000c 2046     		mov	r0, r4
 913              	.LVL74:
 914              		.loc 1 300 4 discriminator 2 view .LVU270
 915 000e FFF7FEFF 		bl	WIZCHIP_READ
 916              	.LVL75:
 917 0012 00F00F00 		and	r0, r0, #15
 918 0016 0128     		cmp	r0, #1
 919 0018 2FD1     		bne	.L91
 920              		.loc 1 300 4 is_stmt 1 discriminator 2 view .LVU271
 921              		.loc 1 300 29 discriminator 2 view .LVU272
 301:ioLIB/socket.c **** 	setSn_CR(sn,Sn_CR_DISCON);
 922              		.loc 1 301 2 discriminator 2 view .LVU273
 923 001a 04F58075 		add	r5, r4, #256
 924 001e 0821     		movs	r1, #8
 925 0020 2846     		mov	r0, r5
 926 0022 FFF7FEFF 		bl	WIZCHIP_WRITE
 927              	.LVL76:
 302:ioLIB/socket.c **** 	/* wait to process the command... */
 303:ioLIB/socket.c **** 	while(getSn_CR(sn));
 928              		.loc 1 303 2 discriminator 2 view .LVU274
 929              	.L86:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 25


 930              		.loc 1 303 21 discriminator 1 view .LVU275
 931              		.loc 1 303 7 discriminator 1 view .LVU276
 932              		.loc 1 303 8 is_stmt 0 discriminator 1 view .LVU277
 933 0026 2846     		mov	r0, r5
 934 0028 FFF7FEFF 		bl	WIZCHIP_READ
 935              	.LVL77:
 936              		.loc 1 303 7 discriminator 1 view .LVU278
 937 002c 0028     		cmp	r0, #0
 938 002e FAD1     		bne	.L86
 304:ioLIB/socket.c **** 	sock_is_sending &= ~(1<<sn);
 939              		.loc 1 304 2 is_stmt 1 view .LVU279
 940              		.loc 1 304 18 is_stmt 0 view .LVU280
 941 0030 154D     		ldr	r5, .L102
 305:ioLIB/socket.c ****    if(sock_io_mode & (1<<sn)) return SOCK_BUSY;
 942              		.loc 1 305 7 view .LVU281
 943 0032 164B     		ldr	r3, .L102+4
 304:ioLIB/socket.c **** 	sock_is_sending &= ~(1<<sn);
 944              		.loc 1 304 24 view .LVU282
 945 0034 0122     		movs	r2, #1
 946 0036 02FA06F1 		lsl	r1, r2, r6
 947              		.loc 1 305 7 view .LVU283
 948 003a 1B88     		ldrh	r3, [r3]
 304:ioLIB/socket.c **** 	sock_is_sending &= ~(1<<sn);
 949              		.loc 1 304 18 view .LVU284
 950 003c 2A88     		ldrh	r2, [r5]
 951              		.loc 1 305 7 view .LVU285
 952 003e 3341     		asrs	r3, r3, r6
 304:ioLIB/socket.c **** 	sock_is_sending &= ~(1<<sn);
 953              		.loc 1 304 18 view .LVU286
 954 0040 22EA0102 		bic	r2, r2, r1
 955 0044 2A80     		strh	r2, [r5]	@ movhi
 956              		.loc 1 305 4 is_stmt 1 view .LVU287
 957              		.loc 1 305 6 is_stmt 0 view .LVU288
 958 0046 DA07     		lsls	r2, r3, #31
 959 0048 10D4     		bmi	.L85
 306:ioLIB/socket.c **** 	while(getSn_SR(sn) != SOCK_CLOSED)
 960              		.loc 1 306 8 view .LVU289
 961 004a 04F54075 		add	r5, r4, #768
 307:ioLIB/socket.c **** 	{
 308:ioLIB/socket.c **** 	   if(getSn_IR(sn) & Sn_IR_TIMEOUT)
 962              		.loc 1 308 8 view .LVU290
 963 004e 04F50074 		add	r4, r4, #512
 964 0052 03E0     		b	.L88
 965              	.L89:
 966 0054 FFF7FEFF 		bl	WIZCHIP_READ
 967              	.LVL78:
 968              		.loc 1 308 7 view .LVU291
 969 0058 0307     		lsls	r3, r0, #28
 970 005a 08D4     		bmi	.L101
 971              	.L88:
 306:ioLIB/socket.c **** 	while(getSn_SR(sn) != SOCK_CLOSED)
 972              		.loc 1 306 7 is_stmt 1 view .LVU292
 306:ioLIB/socket.c **** 	while(getSn_SR(sn) != SOCK_CLOSED)
 973              		.loc 1 306 8 is_stmt 0 view .LVU293
 974 005c 2846     		mov	r0, r5
 975 005e FFF7FEFF 		bl	WIZCHIP_READ
 976              	.LVL79:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 26


 977              		.loc 1 308 5 is_stmt 1 view .LVU294
 306:ioLIB/socket.c **** 	while(getSn_SR(sn) != SOCK_CLOSED)
 978              		.loc 1 306 8 is_stmt 0 view .LVU295
 979 0062 0346     		mov	r3, r0
 980              		.loc 1 308 8 view .LVU296
 981 0064 2046     		mov	r0, r4
 306:ioLIB/socket.c **** 	while(getSn_SR(sn) != SOCK_CLOSED)
 982              		.loc 1 306 7 view .LVU297
 983 0066 002B     		cmp	r3, #0
 984 0068 F4D1     		bne	.L89
 309:ioLIB/socket.c **** 	   {
 310:ioLIB/socket.c **** 	      close(sn);
 311:ioLIB/socket.c **** 	      return SOCKERR_TIMEOUT;
 312:ioLIB/socket.c **** 	   }
 313:ioLIB/socket.c **** 	}
 314:ioLIB/socket.c **** 	return SOCK_OK;
 985              		.loc 1 314 9 view .LVU298
 986 006a 0120     		movs	r0, #1
 987              	.L85:
 315:ioLIB/socket.c **** }
 988              		.loc 1 315 1 view .LVU299
 989 006c 70BD     		pop	{r4, r5, r6, pc}
 990              	.L101:
 310:ioLIB/socket.c **** 	      return SOCKERR_TIMEOUT;
 991              		.loc 1 310 8 is_stmt 1 view .LVU300
 992              	.LVL80:
 993              	.LBB26:
 994              	.LBI26:
 198:ioLIB/socket.c **** {
 995              		.loc 1 198 8 view .LVU301
 996              	.LBB27:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 997              		.loc 1 200 2 view .LVU302
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 998              		.loc 1 200 2 view .LVU303
 999 006e 3046     		mov	r0, r6
 1000 0070 FFF7FEFF 		bl	close.part.0
 1001              	.LVL81:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1002              		.loc 1 200 2 is_stmt 0 view .LVU304
 1003              	.LBE27:
 1004              	.LBE26:
 311:ioLIB/socket.c **** 	   }
 1005              		.loc 1 311 8 is_stmt 1 view .LVU305
 311:ioLIB/socket.c **** 	   }
 1006              		.loc 1 311 15 is_stmt 0 view .LVU306
 1007 0074 6FF00C00 		mvn	r0, #12
 1008              		.loc 1 315 1 view .LVU307
 1009 0078 70BD     		pop	{r4, r5, r6, pc}
 1010              	.L91:
 300:ioLIB/socket.c **** 	setSn_CR(sn,Sn_CR_DISCON);
 1011              		.loc 1 300 4 view .LVU308
 1012 007a 6FF00400 		mvn	r0, #4
 1013              		.loc 1 315 1 view .LVU309
 1014 007e 70BD     		pop	{r4, r5, r6, pc}
 1015              	.LVL82:
 1016              	.L90:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 27


 1017              	.LCFI15:
 1018              		.cfi_def_cfa_offset 0
 1019              		.cfi_restore 4
 1020              		.cfi_restore 5
 1021              		.cfi_restore 6
 1022              		.cfi_restore 14
 299:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 1023              		.loc 1 299 4 view .LVU310
 1024 0080 4FF0FF30 		mov	r0, #-1
 1025              	.LVL83:
 1026              		.loc 1 315 1 view .LVU311
 1027 0084 7047     		bx	lr
 1028              	.L103:
 1029 0086 00BF     		.align	2
 1030              	.L102:
 1031 0088 00000000 		.word	.LANCHOR1
 1032 008c 00000000 		.word	.LANCHOR0
 1033              		.cfi_endproc
 1034              	.LFE4:
 1036              		.section	.text.send,"ax",%progbits
 1037              		.align	1
 1038              		.p2align 2,,3
 1039              		.global	send
 1040              		.syntax unified
 1041              		.thumb
 1042              		.thumb_func
 1044              	send:
 1045              	.LVL84:
 1046              	.LFB5:
 316:ioLIB/socket.c **** 
 317:ioLIB/socket.c **** int32_t send(uint8_t sn, uint8_t * buf, uint16_t len)
 318:ioLIB/socket.c **** {
 1047              		.loc 1 318 1 is_stmt 1 view -0
 1048              		.cfi_startproc
 1049              		@ args = 0, pretend = 0, frame = 8
 1050              		@ frame_needed = 0, uses_anonymous_args = 0
 319:ioLIB/socket.c ****    uint8_t tmp=0;
 1051              		.loc 1 319 4 view .LVU313
 320:ioLIB/socket.c ****    uint16_t freesize=0;
 1052              		.loc 1 320 4 view .LVU314
 321:ioLIB/socket.c ****    
 322:ioLIB/socket.c ****    CHECK_SOCKNUM();
 1053              		.loc 1 322 4 view .LVU315
 1054              		.loc 1 322 4 view .LVU316
 318:ioLIB/socket.c ****    uint8_t tmp=0;
 1055              		.loc 1 318 1 is_stmt 0 view .LVU317
 1056 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1057              	.LCFI16:
 1058              		.cfi_def_cfa_offset 36
 1059              		.cfi_offset 4, -36
 1060              		.cfi_offset 5, -32
 1061              		.cfi_offset 6, -28
 1062              		.cfi_offset 7, -24
 1063              		.cfi_offset 8, -20
 1064              		.cfi_offset 9, -16
 1065              		.cfi_offset 10, -12
 1066              		.cfi_offset 11, -8
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 28


 1067              		.cfi_offset 14, -4
 1068 0004 83B0     		sub	sp, sp, #12
 1069              	.LCFI17:
 1070              		.cfi_def_cfa_offset 48
 1071              		.loc 1 322 4 view .LVU318
 1072 0006 0828     		cmp	r0, #8
 318:ioLIB/socket.c ****    uint8_t tmp=0;
 1073              		.loc 1 318 1 view .LVU319
 1074 0008 0191     		str	r1, [sp, #4]
 1075              		.loc 1 322 4 view .LVU320
 1076 000a 7AD8     		bhi	.L117
 1077              		.loc 1 322 4 is_stmt 1 discriminator 2 view .LVU321
 1078              		.loc 1 322 19 discriminator 2 view .LVU322
 323:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 1079              		.loc 1 323 4 discriminator 2 view .LVU323
 1080              		.loc 1 323 4 discriminator 2 view .LVU324
 1081 000c 4FEA4018 		lsl	r8, r0, #5
 1082 0010 08F10808 		add	r8, r8, #8
 1083 0014 0546     		mov	r5, r0
 1084 0016 4046     		mov	r0, r8
 1085              	.LVL85:
 1086              		.loc 1 323 4 is_stmt 0 discriminator 2 view .LVU325
 1087 0018 1446     		mov	r4, r2
 1088 001a FFF7FEFF 		bl	WIZCHIP_READ
 1089              	.LVL86:
 1090              		.loc 1 323 4 discriminator 2 view .LVU326
 1091 001e 00F00F00 		and	r0, r0, #15
 1092 0022 0128     		cmp	r0, #1
 1093 0024 73D1     		bne	.L118
 1094              		.loc 1 323 4 is_stmt 1 discriminator 2 view .LVU327
 1095              		.loc 1 323 29 discriminator 2 view .LVU328
 324:ioLIB/socket.c ****    CHECK_SOCKDATA();
 1096              		.loc 1 324 4 discriminator 2 view .LVU329
 1097              		.loc 1 324 4 discriminator 2 view .LVU330
 1098 0026 002C     		cmp	r4, #0
 1099 0028 6ED0     		beq	.L119
 1100              		.loc 1 324 4 discriminator 2 view .LVU331
 1101              		.loc 1 324 20 discriminator 2 view .LVU332
 325:ioLIB/socket.c ****    tmp = getSn_SR(sn);
 1102              		.loc 1 325 4 discriminator 2 view .LVU333
 1103              		.loc 1 325 10 is_stmt 0 discriminator 2 view .LVU334
 1104 002a 08F54077 		add	r7, r8, #768
 1105 002e 3846     		mov	r0, r7
 1106 0030 FFF7FEFF 		bl	WIZCHIP_READ
 1107              	.LVL87:
 326:ioLIB/socket.c ****    if(tmp != SOCK_ESTABLISHED && tmp != SOCK_CLOSE_WAIT) return SOCKERR_SOCKSTATUS;
 1108              		.loc 1 326 4 is_stmt 1 discriminator 2 view .LVU335
 1109              		.loc 1 326 6 is_stmt 0 discriminator 2 view .LVU336
 1110 0034 1728     		cmp	r0, #23
 1111 0036 01D0     		beq	.L106
 1112              		.loc 1 326 31 discriminator 1 view .LVU337
 1113 0038 1C28     		cmp	r0, #28
 1114 003a 6BD1     		bne	.L120
 1115              	.L106:
 327:ioLIB/socket.c ****    if( sock_is_sending & (1<<sn) )
 1116              		.loc 1 327 4 is_stmt 1 view .LVU338
 1117              		.loc 1 327 8 is_stmt 0 view .LVU339
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 29


 1118 003c DFF8E8B0 		ldr	fp, .L136
 1119 0040 BBF80030 		ldrh	r3, [fp]
 1120 0044 2B41     		asrs	r3, r3, r5
 1121              		.loc 1 327 6 view .LVU340
 1122 0046 D907     		lsls	r1, r3, #31
 1123 0048 36D4     		bmi	.L133
 328:ioLIB/socket.c ****    {
 329:ioLIB/socket.c ****       tmp = getSn_IR(sn);
 330:ioLIB/socket.c ****       if(tmp & Sn_IR_SENDOK)
 331:ioLIB/socket.c ****       {
 332:ioLIB/socket.c ****          setSn_IR(sn, Sn_IR_SENDOK);
 333:ioLIB/socket.c ****          //M20150401 : Typing Error
 334:ioLIB/socket.c ****          //#if _WZICHIP_ == 5200
 335:ioLIB/socket.c ****          #if _WIZCHIP_ == 5200
 336:ioLIB/socket.c ****             if(getSn_TX_RD(sn) != sock_next_rd[sn])
 337:ioLIB/socket.c ****             {
 338:ioLIB/socket.c ****                setSn_CR(sn,Sn_CR_SEND);
 339:ioLIB/socket.c ****                while(getSn_CR(sn));
 340:ioLIB/socket.c ****                return SOCK_BUSY;
 341:ioLIB/socket.c ****             }
 342:ioLIB/socket.c ****          #endif
 343:ioLIB/socket.c ****          sock_is_sending &= ~(1<<sn);         
 1124              		.loc 1 343 32 view .LVU341
 1125 004a 0126     		movs	r6, #1
 1126 004c AE40     		lsls	r6, r6, r5
 1127              	.LVL88:
 1128              	.L109:
 344:ioLIB/socket.c ****       }
 345:ioLIB/socket.c ****       else if(tmp & Sn_IR_TIMEOUT)
 346:ioLIB/socket.c ****       {
 347:ioLIB/socket.c ****          close(sn);
 348:ioLIB/socket.c ****          return SOCKERR_TIMEOUT;
 349:ioLIB/socket.c ****       }
 350:ioLIB/socket.c ****       else return SOCK_BUSY;
 351:ioLIB/socket.c ****    }
 352:ioLIB/socket.c ****    freesize = getSn_TxMAX(sn);
 1129              		.loc 1 352 4 is_stmt 1 view .LVU342
 1130              		.loc 1 352 15 is_stmt 0 view .LVU343
 1131 004e 08F5F850 		add	r0, r8, #7936
 1132 0052 FFF7FEFF 		bl	WIZCHIP_READ
 1133              	.LVL89:
 353:ioLIB/socket.c ****    if (len > freesize) len = freesize; // check size not to exceed MAX size.
 1134              		.loc 1 353 4 is_stmt 1 view .LVU344
 352:ioLIB/socket.c ****    if (len > freesize) len = freesize; // check size not to exceed MAX size.
 1135              		.loc 1 352 13 is_stmt 0 view .LVU345
 1136 0056 8002     		lsls	r0, r0, #10
 1137              	.LVL90:
 352:ioLIB/socket.c ****    if (len > freesize) len = freesize; // check size not to exceed MAX size.
 1138              		.loc 1 352 13 view .LVU346
 1139 0058 80B2     		uxth	r0, r0
 1140 005a 8442     		cmp	r4, r0
 354:ioLIB/socket.c ****    while(1)
 355:ioLIB/socket.c ****    {
 356:ioLIB/socket.c ****       freesize = getSn_TX_FSR(sn);
 357:ioLIB/socket.c ****       tmp = getSn_SR(sn);
 358:ioLIB/socket.c ****       if ((tmp != SOCK_ESTABLISHED) && (tmp != SOCK_CLOSE_WAIT))
 359:ioLIB/socket.c ****       {
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 30


 360:ioLIB/socket.c ****          close(sn);
 361:ioLIB/socket.c ****          return SOCKERR_SOCKSTATUS;
 362:ioLIB/socket.c ****       }
 363:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1141              		.loc 1 363 11 view .LVU347
 1142 005c DFF8CC90 		ldr	r9, .L136+4
 1143 0060 28BF     		it	cs
 1144 0062 0446     		movcs	r4, r0
 1145              	.LVL91:
 1146              	.L115:
 354:ioLIB/socket.c ****    while(1)
 1147              		.loc 1 354 4 is_stmt 1 view .LVU348
 356:ioLIB/socket.c ****       tmp = getSn_SR(sn);
 1148              		.loc 1 356 7 view .LVU349
 356:ioLIB/socket.c ****       tmp = getSn_SR(sn);
 1149              		.loc 1 356 18 is_stmt 0 view .LVU350
 1150 0064 2846     		mov	r0, r5
 1151 0066 FFF7FEFF 		bl	getSn_TX_FSR
 1152              	.LVL92:
 1153 006a 8246     		mov	r10, r0
 357:ioLIB/socket.c ****       if ((tmp != SOCK_ESTABLISHED) && (tmp != SOCK_CLOSE_WAIT))
 1154              		.loc 1 357 13 view .LVU351
 1155 006c 3846     		mov	r0, r7
 1156              	.LVL93:
 357:ioLIB/socket.c ****       if ((tmp != SOCK_ESTABLISHED) && (tmp != SOCK_CLOSE_WAIT))
 1157              		.loc 1 357 7 is_stmt 1 view .LVU352
 357:ioLIB/socket.c ****       if ((tmp != SOCK_ESTABLISHED) && (tmp != SOCK_CLOSE_WAIT))
 1158              		.loc 1 357 13 is_stmt 0 view .LVU353
 1159 006e FFF7FEFF 		bl	WIZCHIP_READ
 1160              	.LVL94:
 1161              		.loc 1 363 7 is_stmt 1 view .LVU354
 364:ioLIB/socket.c ****       if(len <= freesize) break;
 1162              		.loc 1 364 7 view .LVU355
 358:ioLIB/socket.c ****       {
 1163              		.loc 1 358 7 view .LVU356
 358:ioLIB/socket.c ****       {
 1164              		.loc 1 358 10 is_stmt 0 view .LVU357
 1165 0072 1728     		cmp	r0, #23
 1166 0074 01D0     		beq	.L111
 358:ioLIB/socket.c ****       {
 1167              		.loc 1 358 37 discriminator 1 view .LVU358
 1168 0076 1C28     		cmp	r0, #28
 1169 0078 2ED1     		bne	.L134
 1170              	.L111:
 363:ioLIB/socket.c ****       if(len <= freesize) break;
 1171              		.loc 1 363 11 view .LVU359
 1172 007a B9F80020 		ldrh	r2, [r9]
 363:ioLIB/socket.c ****       if(len <= freesize) break;
 1173              		.loc 1 363 9 view .LVU360
 1174 007e 3242     		tst	r2, r6
 1175 0080 27D0     		beq	.L112
 363:ioLIB/socket.c ****       if(len <= freesize) break;
 1176              		.loc 1 363 36 discriminator 1 view .LVU361
 1177 0082 5445     		cmp	r4, r10
 1178 0084 21D8     		bhi	.L113
 1179              	.L114:
 365:ioLIB/socket.c ****    }
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 31


 366:ioLIB/socket.c ****    wiz_send_data(sn, buf, len);
 1180              		.loc 1 366 4 is_stmt 1 view .LVU362
 1181 0086 0199     		ldr	r1, [sp, #4]
 1182 0088 2846     		mov	r0, r5
 1183              	.LVL95:
 367:ioLIB/socket.c ****    #if _WIZCHIP_ == 5200
 368:ioLIB/socket.c ****       sock_next_rd[sn] = getSn_TX_RD(sn) + len;
 369:ioLIB/socket.c ****    #endif
 370:ioLIB/socket.c **** 
 371:ioLIB/socket.c ****    #if _WIZCHIP_ == 5300
 372:ioLIB/socket.c ****       setSn_TX_WRSR(sn,len);
 373:ioLIB/socket.c ****    #endif
 374:ioLIB/socket.c ****    
 375:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_SEND);
 1184              		.loc 1 375 4 is_stmt 0 view .LVU363
 1185 008a 08F58078 		add	r8, r8, #256
 366:ioLIB/socket.c ****    #if _WIZCHIP_ == 5200
 1186              		.loc 1 366 4 view .LVU364
 1187 008e 2246     		mov	r2, r4
 1188 0090 FFF7FEFF 		bl	wiz_send_data
 1189              	.LVL96:
 1190              		.loc 1 375 4 is_stmt 1 view .LVU365
 1191 0094 2021     		movs	r1, #32
 1192 0096 4046     		mov	r0, r8
 1193 0098 FFF7FEFF 		bl	WIZCHIP_WRITE
 1194              	.LVL97:
 376:ioLIB/socket.c ****    /* wait to process the command... */
 377:ioLIB/socket.c ****    while(getSn_CR(sn));
 1195              		.loc 1 377 4 view .LVU366
 1196              	.L116:
 1197              		.loc 1 377 23 discriminator 1 view .LVU367
 1198              		.loc 1 377 9 discriminator 1 view .LVU368
 1199              		.loc 1 377 10 is_stmt 0 discriminator 1 view .LVU369
 1200 009c 4046     		mov	r0, r8
 1201 009e FFF7FEFF 		bl	WIZCHIP_READ
 1202              	.LVL98:
 1203              		.loc 1 377 9 discriminator 1 view .LVU370
 1204 00a2 0028     		cmp	r0, #0
 1205 00a4 FAD1     		bne	.L116
 378:ioLIB/socket.c ****    sock_is_sending |= (1 << sn);
 1206              		.loc 1 378 4 is_stmt 1 view .LVU371
 1207              		.loc 1 378 20 is_stmt 0 view .LVU372
 1208 00a6 BBF80030 		ldrh	r3, [fp]
 379:ioLIB/socket.c ****    //M20150409 : Explicit Type Casting
 380:ioLIB/socket.c ****    //return len;
 381:ioLIB/socket.c ****    return (int32_t)len;
 1209              		.loc 1 381 11 view .LVU373
 1210 00aa 2046     		mov	r0, r4
 378:ioLIB/socket.c ****    sock_is_sending |= (1 << sn);
 1211              		.loc 1 378 20 view .LVU374
 1212 00ac 1E43     		orrs	r6, r6, r3
 1213 00ae ABF80060 		strh	r6, [fp]	@ movhi
 1214              		.loc 1 381 4 is_stmt 1 view .LVU375
 382:ioLIB/socket.c **** }
 1215              		.loc 1 382 1 is_stmt 0 view .LVU376
 1216 00b2 03B0     		add	sp, sp, #12
 1217              	.LCFI18:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 32


 1218              		.cfi_remember_state
 1219              		.cfi_def_cfa_offset 36
 1220              		@ sp needed
 1221 00b4 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1222              	.LVL99:
 1223              	.L133:
 1224              	.LCFI19:
 1225              		.cfi_restore_state
 329:ioLIB/socket.c ****       if(tmp & Sn_IR_SENDOK)
 1226              		.loc 1 329 7 is_stmt 1 view .LVU377
 329:ioLIB/socket.c ****       if(tmp & Sn_IR_SENDOK)
 1227              		.loc 1 329 13 is_stmt 0 view .LVU378
 1228 00b8 08F50076 		add	r6, r8, #512
 1229 00bc 3046     		mov	r0, r6
 1230              	.LVL100:
 329:ioLIB/socket.c ****       if(tmp & Sn_IR_SENDOK)
 1231              		.loc 1 329 13 view .LVU379
 1232 00be FFF7FEFF 		bl	WIZCHIP_READ
 1233              	.LVL101:
 330:ioLIB/socket.c ****       {
 1234              		.loc 1 330 7 is_stmt 1 view .LVU380
 330:ioLIB/socket.c ****       {
 1235              		.loc 1 330 9 is_stmt 0 view .LVU381
 1236 00c2 C206     		lsls	r2, r0, #27
 1237 00c4 10D4     		bmi	.L135
 345:ioLIB/socket.c ****       {
 1238              		.loc 1 345 12 is_stmt 1 view .LVU382
 345:ioLIB/socket.c ****       {
 1239              		.loc 1 345 14 is_stmt 0 view .LVU383
 1240 00c6 0307     		lsls	r3, r0, #28
 1241 00c8 27D4     		bmi	.L110
 1242              	.LVL102:
 1243              	.L113:
 350:ioLIB/socket.c ****    }
 1244              		.loc 1 350 19 view .LVU384
 1245 00ca 0020     		movs	r0, #0
 1246              	.L104:
 1247              		.loc 1 382 1 view .LVU385
 1248 00cc 03B0     		add	sp, sp, #12
 1249              	.LCFI20:
 1250              		.cfi_remember_state
 1251              		.cfi_def_cfa_offset 36
 1252              		@ sp needed
 1253 00ce BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1254              	.LVL103:
 1255              	.L112:
 1256              	.LCFI21:
 1257              		.cfi_restore_state
 364:ioLIB/socket.c ****    }
 1258              		.loc 1 364 9 view .LVU386
 1259 00d2 5445     		cmp	r4, r10
 1260 00d4 C6D8     		bhi	.L115
 1261 00d6 D6E7     		b	.L114
 1262              	.L134:
 360:ioLIB/socket.c ****          return SOCKERR_SOCKSTATUS;
 1263              		.loc 1 360 10 is_stmt 1 view .LVU387
 1264              	.LVL104:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 33


 1265              	.LBB28:
 1266              	.LBI28:
 198:ioLIB/socket.c **** {
 1267              		.loc 1 198 8 view .LVU388
 1268              	.LBB29:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1269              		.loc 1 200 2 view .LVU389
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1270              		.loc 1 200 2 view .LVU390
 1271 00d8 2846     		mov	r0, r5
 1272              	.LVL105:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1273              		.loc 1 200 2 is_stmt 0 view .LVU391
 1274 00da FFF7FEFF 		bl	close.part.0
 1275              	.LVL106:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1276              		.loc 1 200 2 view .LVU392
 1277              	.LBE29:
 1278              	.LBE28:
 361:ioLIB/socket.c ****       }
 1279              		.loc 1 361 10 is_stmt 1 view .LVU393
 361:ioLIB/socket.c ****       }
 1280              		.loc 1 361 17 is_stmt 0 view .LVU394
 1281 00de 6FF00600 		mvn	r0, #6
 1282              		.loc 1 382 1 view .LVU395
 1283 00e2 03B0     		add	sp, sp, #12
 1284              	.LCFI22:
 1285              		.cfi_remember_state
 1286              		.cfi_def_cfa_offset 36
 1287              		@ sp needed
 1288 00e4 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1289              	.LVL107:
 1290              	.L135:
 1291              	.LCFI23:
 1292              		.cfi_restore_state
 332:ioLIB/socket.c ****          //M20150401 : Typing Error
 1293              		.loc 1 332 10 is_stmt 1 view .LVU396
 1294 00e8 3046     		mov	r0, r6
 1295              	.LVL108:
 332:ioLIB/socket.c ****          //M20150401 : Typing Error
 1296              		.loc 1 332 10 is_stmt 0 view .LVU397
 1297 00ea 1021     		movs	r1, #16
 1298 00ec FFF7FEFF 		bl	WIZCHIP_WRITE
 1299              	.LVL109:
 343:ioLIB/socket.c ****       }
 1300              		.loc 1 343 10 is_stmt 1 view .LVU398
 343:ioLIB/socket.c ****       }
 1301              		.loc 1 343 32 is_stmt 0 view .LVU399
 1302 00f0 0126     		movs	r6, #1
 343:ioLIB/socket.c ****       }
 1303              		.loc 1 343 26 view .LVU400
 1304 00f2 BBF80030 		ldrh	r3, [fp]
 343:ioLIB/socket.c ****       }
 1305              		.loc 1 343 32 view .LVU401
 1306 00f6 AE40     		lsls	r6, r6, r5
 343:ioLIB/socket.c ****       }
 1307              		.loc 1 343 26 view .LVU402
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 34


 1308 00f8 23EA0603 		bic	r3, r3, r6
 1309 00fc ABF80030 		strh	r3, [fp]	@ movhi
 1310 0100 A5E7     		b	.L109
 1311              	.LVL110:
 1312              	.L117:
 322:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 1313              		.loc 1 322 4 view .LVU403
 1314 0102 4FF0FF30 		mov	r0, #-1
 1315              	.LVL111:
 322:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 1316              		.loc 1 322 4 view .LVU404
 1317 0106 E1E7     		b	.L104
 1318              	.LVL112:
 1319              	.L119:
 324:ioLIB/socket.c ****    tmp = getSn_SR(sn);
 1320              		.loc 1 324 4 view .LVU405
 1321 0108 6FF00D00 		mvn	r0, #13
 1322 010c DEE7     		b	.L104
 1323              	.L118:
 323:ioLIB/socket.c ****    CHECK_SOCKDATA();
 1324              		.loc 1 323 4 view .LVU406
 1325 010e 6FF00400 		mvn	r0, #4
 1326 0112 DBE7     		b	.L104
 1327              	.LVL113:
 1328              	.L120:
 326:ioLIB/socket.c ****    if( sock_is_sending & (1<<sn) )
 1329              		.loc 1 326 65 view .LVU407
 1330 0114 6FF00600 		mvn	r0, #6
 1331              	.LVL114:
 326:ioLIB/socket.c ****    if( sock_is_sending & (1<<sn) )
 1332              		.loc 1 326 65 view .LVU408
 1333 0118 D8E7     		b	.L104
 1334              	.LVL115:
 1335              	.L110:
 347:ioLIB/socket.c ****          return SOCKERR_TIMEOUT;
 1336              		.loc 1 347 10 is_stmt 1 view .LVU409
 1337              	.LBB30:
 1338              	.LBI30:
 198:ioLIB/socket.c **** {
 1339              		.loc 1 198 8 view .LVU410
 1340              	.LBB31:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1341              		.loc 1 200 2 view .LVU411
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1342              		.loc 1 200 2 view .LVU412
 1343 011a 2846     		mov	r0, r5
 1344              	.LVL116:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1345              		.loc 1 200 2 is_stmt 0 view .LVU413
 1346 011c FFF7FEFF 		bl	close.part.0
 1347              	.LVL117:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1348              		.loc 1 200 2 view .LVU414
 1349              	.LBE31:
 1350              	.LBE30:
 348:ioLIB/socket.c ****       }
 1351              		.loc 1 348 10 is_stmt 1 view .LVU415
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 35


 348:ioLIB/socket.c ****       }
 1352              		.loc 1 348 17 is_stmt 0 view .LVU416
 1353 0120 6FF00C00 		mvn	r0, #12
 1354 0124 D2E7     		b	.L104
 1355              	.L137:
 1356 0126 00BF     		.align	2
 1357              	.L136:
 1358 0128 00000000 		.word	.LANCHOR1
 1359 012c 00000000 		.word	.LANCHOR0
 1360              		.cfi_endproc
 1361              	.LFE5:
 1363              		.section	.text.recv,"ax",%progbits
 1364              		.align	1
 1365              		.p2align 2,,3
 1366              		.global	recv
 1367              		.syntax unified
 1368              		.thumb
 1369              		.thumb_func
 1371              	recv:
 1372              	.LVL118:
 1373              	.LFB6:
 383:ioLIB/socket.c **** 
 384:ioLIB/socket.c **** 
 385:ioLIB/socket.c **** int32_t recv(uint8_t sn, uint8_t * buf, uint16_t len)
 386:ioLIB/socket.c **** {
 1374              		.loc 1 386 1 is_stmt 1 view -0
 1375              		.cfi_startproc
 1376              		@ args = 0, pretend = 0, frame = 8
 1377              		@ frame_needed = 0, uses_anonymous_args = 0
 387:ioLIB/socket.c ****    uint8_t  tmp = 0;
 1378              		.loc 1 387 4 view .LVU418
 388:ioLIB/socket.c ****    uint16_t recvsize = 0;
 1379              		.loc 1 388 4 view .LVU419
 389:ioLIB/socket.c **** //A20150601 : For integarating with W5300
 390:ioLIB/socket.c **** #if   _WIZCHIP_ == 5300
 391:ioLIB/socket.c ****    uint8_t head[2];
 392:ioLIB/socket.c ****    uint16_t mr;
 393:ioLIB/socket.c **** #endif
 394:ioLIB/socket.c **** //
 395:ioLIB/socket.c ****    CHECK_SOCKNUM();
 1380              		.loc 1 395 4 view .LVU420
 1381              		.loc 1 395 4 view .LVU421
 386:ioLIB/socket.c ****    uint8_t  tmp = 0;
 1382              		.loc 1 386 1 is_stmt 0 view .LVU422
 1383 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1384              	.LCFI24:
 1385              		.cfi_def_cfa_offset 36
 1386              		.cfi_offset 4, -36
 1387              		.cfi_offset 5, -32
 1388              		.cfi_offset 6, -28
 1389              		.cfi_offset 7, -24
 1390              		.cfi_offset 8, -20
 1391              		.cfi_offset 9, -16
 1392              		.cfi_offset 10, -12
 1393              		.cfi_offset 11, -8
 1394              		.cfi_offset 14, -4
 1395 0004 83B0     		sub	sp, sp, #12
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 36


 1396              	.LCFI25:
 1397              		.cfi_def_cfa_offset 48
 1398              		.loc 1 395 4 view .LVU423
 1399 0006 0828     		cmp	r0, #8
 386:ioLIB/socket.c ****    uint8_t  tmp = 0;
 1400              		.loc 1 386 1 view .LVU424
 1401 0008 0091     		str	r1, [sp]
 1402              		.loc 1 395 4 view .LVU425
 1403 000a 6DD8     		bhi	.L149
 1404              		.loc 1 395 4 is_stmt 1 discriminator 2 view .LVU426
 1405              		.loc 1 395 19 discriminator 2 view .LVU427
 396:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 1406              		.loc 1 396 4 discriminator 2 view .LVU428
 1407              		.loc 1 396 4 discriminator 2 view .LVU429
 1408 000c 4701     		lsls	r7, r0, #5
 1409 000e 0837     		adds	r7, r7, #8
 1410 0010 8046     		mov	r8, r0
 1411 0012 3846     		mov	r0, r7
 1412              	.LVL119:
 1413              		.loc 1 396 4 is_stmt 0 discriminator 2 view .LVU430
 1414 0014 9246     		mov	r10, r2
 1415 0016 FFF7FEFF 		bl	WIZCHIP_READ
 1416              	.LVL120:
 1417              		.loc 1 396 4 discriminator 2 view .LVU431
 1418 001a 00F00F00 		and	r0, r0, #15
 1419 001e 0128     		cmp	r0, #1
 1420 0020 65D1     		bne	.L150
 1421              		.loc 1 396 4 is_stmt 1 discriminator 2 view .LVU432
 1422              		.loc 1 396 29 discriminator 2 view .LVU433
 397:ioLIB/socket.c ****    CHECK_SOCKDATA();
 1423              		.loc 1 397 4 discriminator 2 view .LVU434
 1424              		.loc 1 397 4 discriminator 2 view .LVU435
 1425 0022 BAF1000F 		cmp	r10, #0
 1426 0026 5CD0     		beq	.L151
 1427              		.loc 1 397 4 discriminator 2 view .LVU436
 1428              		.loc 1 397 20 discriminator 2 view .LVU437
 398:ioLIB/socket.c ****    
 399:ioLIB/socket.c ****    recvsize = getSn_RxMAX(sn);
 1429              		.loc 1 399 4 discriminator 2 view .LVU438
 1430 0028 00FA08F4 		lsl	r4, r0, r8
 1431              		.loc 1 399 15 is_stmt 0 discriminator 2 view .LVU439
 1432 002c 07F5F050 		add	r0, r7, #7680
 1433 0030 FFF7FEFF 		bl	WIZCHIP_READ
 1434              	.LVL121:
 400:ioLIB/socket.c ****    if(recvsize < len) len = recvsize;
 401:ioLIB/socket.c ****       
 402:ioLIB/socket.c **** //A20150601 : For Integrating with W5300
 403:ioLIB/socket.c **** #if _WIZCHIP_ == 5300
 404:ioLIB/socket.c ****    //sock_pack_info[sn] = PACK_COMPLETED;    // for clear      
 405:ioLIB/socket.c ****    if(sock_remained_size[sn] == 0)
 406:ioLIB/socket.c ****    {
 407:ioLIB/socket.c **** #endif
 408:ioLIB/socket.c **** //
 409:ioLIB/socket.c ****       while(1)
 410:ioLIB/socket.c ****       {
 411:ioLIB/socket.c ****          recvsize = getSn_RX_RSR(sn);
 412:ioLIB/socket.c ****          tmp = getSn_SR(sn);
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 37


 413:ioLIB/socket.c ****          if (tmp != SOCK_ESTABLISHED)
 414:ioLIB/socket.c ****          {
 415:ioLIB/socket.c ****             if(tmp == SOCK_CLOSE_WAIT)
 416:ioLIB/socket.c ****             {
 417:ioLIB/socket.c ****                if(recvsize != 0) break;
 418:ioLIB/socket.c ****                else if(getSn_TX_FSR(sn) == getSn_TxMAX(sn))
 419:ioLIB/socket.c ****                {
 420:ioLIB/socket.c ****                   close(sn);
 421:ioLIB/socket.c ****                   return SOCKERR_SOCKSTATUS;
 422:ioLIB/socket.c ****                }
 423:ioLIB/socket.c ****             }
 424:ioLIB/socket.c ****             else
 425:ioLIB/socket.c ****             {
 426:ioLIB/socket.c ****                close(sn);
 427:ioLIB/socket.c ****                return SOCKERR_SOCKSTATUS;
 428:ioLIB/socket.c ****             }
 429:ioLIB/socket.c ****          }
 430:ioLIB/socket.c ****          if((sock_io_mode & (1<<sn)) && (recvsize == 0)) return SOCK_BUSY;
 1435              		.loc 1 430 13 discriminator 2 view .LVU440
 1436 0034 2F4E     		ldr	r6, .L154
 399:ioLIB/socket.c ****    if(recvsize < len) len = recvsize;
 1437              		.loc 1 399 15 discriminator 2 view .LVU441
 1438 0036 0190     		str	r0, [sp, #4]
 1439              	.LVL122:
 400:ioLIB/socket.c ****    if(recvsize < len) len = recvsize;
 1440              		.loc 1 400 4 is_stmt 1 discriminator 2 view .LVU442
 412:ioLIB/socket.c ****          if (tmp != SOCK_ESTABLISHED)
 1441              		.loc 1 412 16 is_stmt 0 discriminator 2 view .LVU443
 1442 0038 07F54075 		add	r5, r7, #768
 418:ioLIB/socket.c ****                {
 1443              		.loc 1 418 44 discriminator 2 view .LVU444
 1444 003c 07F5F859 		add	r9, r7, #7936
 1445              	.LVL123:
 1446              	.L145:
 409:ioLIB/socket.c ****       {
 1447              		.loc 1 409 7 is_stmt 1 view .LVU445
 411:ioLIB/socket.c ****          tmp = getSn_SR(sn);
 1448              		.loc 1 411 10 view .LVU446
 411:ioLIB/socket.c ****          tmp = getSn_SR(sn);
 1449              		.loc 1 411 21 is_stmt 0 view .LVU447
 1450 0040 4046     		mov	r0, r8
 1451 0042 FFF7FEFF 		bl	getSn_RX_RSR
 1452              	.LVL124:
 1453 0046 8346     		mov	fp, r0
 412:ioLIB/socket.c ****          if (tmp != SOCK_ESTABLISHED)
 1454              		.loc 1 412 16 view .LVU448
 1455 0048 2846     		mov	r0, r5
 1456              	.LVL125:
 412:ioLIB/socket.c ****          if (tmp != SOCK_ESTABLISHED)
 1457              		.loc 1 412 10 is_stmt 1 view .LVU449
 412:ioLIB/socket.c ****          if (tmp != SOCK_ESTABLISHED)
 1458              		.loc 1 412 16 is_stmt 0 view .LVU450
 1459 004a FFF7FEFF 		bl	WIZCHIP_READ
 1460              	.LVL126:
 415:ioLIB/socket.c ****             {
 1461              		.loc 1 415 13 is_stmt 1 view .LVU451
 417:ioLIB/socket.c ****                else if(getSn_TX_FSR(sn) == getSn_TxMAX(sn))
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 38


 1462              		.loc 1 417 16 view .LVU452
 418:ioLIB/socket.c ****                {
 1463              		.loc 1 418 21 view .LVU453
 412:ioLIB/socket.c ****          if (tmp != SOCK_ESTABLISHED)
 1464              		.loc 1 412 16 is_stmt 0 view .LVU454
 1465 004e 0346     		mov	r3, r0
 413:ioLIB/socket.c ****          {
 1466              		.loc 1 413 13 view .LVU455
 1467 0050 172B     		cmp	r3, #23
 418:ioLIB/socket.c ****                {
 1468              		.loc 1 418 24 view .LVU456
 1469 0052 4046     		mov	r0, r8
 1470              	.LVL127:
 413:ioLIB/socket.c ****          {
 1471              		.loc 1 413 10 is_stmt 1 view .LVU457
 413:ioLIB/socket.c ****          {
 1472              		.loc 1 413 13 is_stmt 0 view .LVU458
 1473 0054 14D0     		beq	.L140
 415:ioLIB/socket.c ****             {
 1474              		.loc 1 415 15 view .LVU459
 1475 0056 1C2B     		cmp	r3, #28
 1476 0058 3BD1     		bne	.L141
 417:ioLIB/socket.c ****                else if(getSn_TX_FSR(sn) == getSn_TxMAX(sn))
 1477              		.loc 1 417 18 view .LVU460
 1478 005a BBF1000F 		cmp	fp, #0
 1479 005e 15D1     		bne	.L142
 418:ioLIB/socket.c ****                {
 1480              		.loc 1 418 24 view .LVU461
 1481 0060 FFF7FEFF 		bl	getSn_TX_FSR
 1482              	.LVL128:
 418:ioLIB/socket.c ****                {
 1483              		.loc 1 418 24 view .LVU462
 1484 0064 8346     		mov	fp, r0
 1485              	.LVL129:
 418:ioLIB/socket.c ****                {
 1486              		.loc 1 418 44 view .LVU463
 1487 0066 4846     		mov	r0, r9
 1488 0068 FFF7FEFF 		bl	WIZCHIP_READ
 1489              	.LVL130:
 1490              		.loc 1 430 10 is_stmt 1 view .LVU464
 418:ioLIB/socket.c ****                {
 1491              		.loc 1 418 23 is_stmt 0 view .LVU465
 1492 006c BBEB802F 		cmp	fp, r0, lsl #10
 1493 0070 2FD0     		beq	.L141
 1494              		.loc 1 430 13 view .LVU466
 1495 0072 3388     		ldrh	r3, [r6]
 1496              		.loc 1 430 12 view .LVU467
 1497 0074 2342     		tst	r3, r4
 1498 0076 E3D0     		beq	.L145
 1499              	.L147:
 1500              		.loc 1 430 65 view .LVU468
 1501 0078 0020     		movs	r0, #0
 431:ioLIB/socket.c ****          if(recvsize != 0) break;
 432:ioLIB/socket.c ****       };
 433:ioLIB/socket.c **** #if _WIZCHIP_ == 5300
 434:ioLIB/socket.c ****    }
 435:ioLIB/socket.c **** #endif
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 39


 436:ioLIB/socket.c **** 
 437:ioLIB/socket.c **** //A20150601 : For integrating with W5300
 438:ioLIB/socket.c **** #if _WIZCHIP_ == 5300
 439:ioLIB/socket.c ****    if((sock_remained_size[sn] == 0) || (getSn_MR(sn) & Sn_MR_ALIGN))
 440:ioLIB/socket.c ****    {
 441:ioLIB/socket.c ****       mr = getMR();
 442:ioLIB/socket.c ****       if((getSn_MR(sn) & Sn_MR_ALIGN)==0)
 443:ioLIB/socket.c ****       {
 444:ioLIB/socket.c ****          wiz_recv_data(sn,head,2);
 445:ioLIB/socket.c ****          if(mr & MR_FS)
 446:ioLIB/socket.c ****             recvsize = (((uint16_t)head[1]) << 8) | ((uint16_t)head[0]);
 447:ioLIB/socket.c ****          else
 448:ioLIB/socket.c ****             recvsize = (((uint16_t)head[0]) << 8) | ((uint16_t)head[1]);
 449:ioLIB/socket.c ****          sock_pack_info[sn] = PACK_FIRST;
 450:ioLIB/socket.c ****       }
 451:ioLIB/socket.c ****       sock_remained_size[sn] = recvsize;
 452:ioLIB/socket.c ****    }
 453:ioLIB/socket.c ****    if(len > sock_remained_size[sn]) len = sock_remained_size[sn];
 454:ioLIB/socket.c ****    recvsize = len;   
 455:ioLIB/socket.c ****    if(sock_pack_info[sn] & PACK_FIFOBYTE)
 456:ioLIB/socket.c ****    {
 457:ioLIB/socket.c ****       *buf = sock_remained_byte[sn];
 458:ioLIB/socket.c ****       buf++;
 459:ioLIB/socket.c ****       sock_pack_info[sn] &= ~(PACK_FIFOBYTE);
 460:ioLIB/socket.c ****       recvsize -= 1;
 461:ioLIB/socket.c ****       sock_remained_size[sn] -= 1;
 462:ioLIB/socket.c ****    }
 463:ioLIB/socket.c ****    if(recvsize != 0)
 464:ioLIB/socket.c ****    {
 465:ioLIB/socket.c ****       wiz_recv_data(sn, buf, recvsize);
 466:ioLIB/socket.c ****       setSn_CR(sn,Sn_CR_RECV);
 467:ioLIB/socket.c ****       while(getSn_CR(sn));
 468:ioLIB/socket.c ****    }
 469:ioLIB/socket.c ****    sock_remained_size[sn] -= recvsize;
 470:ioLIB/socket.c ****    if(sock_remained_size[sn] != 0)
 471:ioLIB/socket.c ****    {
 472:ioLIB/socket.c ****       sock_pack_info[sn] |= PACK_REMAINED;
 473:ioLIB/socket.c ****       if(recvsize & 0x1) sock_pack_info[sn] |= PACK_FIFOBYTE;
 474:ioLIB/socket.c ****    }
 475:ioLIB/socket.c ****    else sock_pack_info[sn] = PACK_COMPLETED;
 476:ioLIB/socket.c ****    if(getSn_MR(sn) & Sn_MR_ALIGN) sock_remained_size[sn] = 0;
 477:ioLIB/socket.c ****    //len = recvsize;
 478:ioLIB/socket.c **** #else   
 479:ioLIB/socket.c ****    if(recvsize < len) len = recvsize;   
 480:ioLIB/socket.c ****    wiz_recv_data(sn, buf, len);
 481:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_RECV);
 482:ioLIB/socket.c ****    while(getSn_CR(sn));
 483:ioLIB/socket.c **** #endif
 484:ioLIB/socket.c ****      
 485:ioLIB/socket.c ****    //M20150409 : Explicit Type Casting
 486:ioLIB/socket.c ****    //return len;
 487:ioLIB/socket.c ****    return (int32_t)len;
 488:ioLIB/socket.c **** }
 1502              		.loc 1 488 1 view .LVU469
 1503 007a 03B0     		add	sp, sp, #12
 1504              	.LCFI26:
 1505              		.cfi_remember_state
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 40


 1506              		.cfi_def_cfa_offset 36
 1507              	.LVL131:
 1508              		.loc 1 488 1 view .LVU470
 1509              		@ sp needed
 1510 007c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1511              	.LVL132:
 1512              	.L140:
 1513              	.LCFI27:
 1514              		.cfi_restore_state
 430:ioLIB/socket.c ****          if(recvsize != 0) break;
 1515              		.loc 1 430 10 is_stmt 1 view .LVU471
 430:ioLIB/socket.c ****          if(recvsize != 0) break;
 1516              		.loc 1 430 13 is_stmt 0 view .LVU472
 1517 0080 3388     		ldrh	r3, [r6]
 1518              	.LVL133:
 430:ioLIB/socket.c ****          if(recvsize != 0) break;
 1519              		.loc 1 430 12 view .LVU473
 1520 0082 2342     		tst	r3, r4
 1521 0084 21D0     		beq	.L144
 430:ioLIB/socket.c ****          if(recvsize != 0) break;
 1522              		.loc 1 430 38 discriminator 1 view .LVU474
 1523 0086 BBF1000F 		cmp	fp, #0
 1524 008a F5D0     		beq	.L147
 1525              	.L142:
 432:ioLIB/socket.c **** #if _WIZCHIP_ == 5300
 1526              		.loc 1 432 8 is_stmt 1 view .LVU475
 479:ioLIB/socket.c ****    wiz_recv_data(sn, buf, len);
 1527              		.loc 1 479 4 view .LVU476
 399:ioLIB/socket.c ****    if(recvsize < len) len = recvsize;
 1528              		.loc 1 399 13 is_stmt 0 view .LVU477
 1529 008c 019B     		ldr	r3, [sp, #4]
 1530 008e 9C02     		lsls	r4, r3, #10
 1531 0090 A4B2     		uxth	r4, r4
 1532 0092 5445     		cmp	r4, r10
 1533 0094 28BF     		it	cs
 1534 0096 5446     		movcs	r4, r10
 1535 0098 5C45     		cmp	r4, fp
 1536 009a 2146     		mov	r1, r4
 1537 009c 28BF     		it	cs
 1538 009e 5946     		movcs	r1, fp
 1539 00a0 8CB2     		uxth	r4, r1
 1540              	.LVL134:
 480:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_RECV);
 1541              		.loc 1 480 4 is_stmt 1 view .LVU478
 1542 00a2 4046     		mov	r0, r8
 1543 00a4 0099     		ldr	r1, [sp]
 1544 00a6 2246     		mov	r2, r4
 481:ioLIB/socket.c ****    while(getSn_CR(sn));
 1545              		.loc 1 481 4 is_stmt 0 view .LVU479
 1546 00a8 07F58077 		add	r7, r7, #256
 480:ioLIB/socket.c ****    setSn_CR(sn,Sn_CR_RECV);
 1547              		.loc 1 480 4 view .LVU480
 1548 00ac FFF7FEFF 		bl	wiz_recv_data
 1549              	.LVL135:
 481:ioLIB/socket.c ****    while(getSn_CR(sn));
 1550              		.loc 1 481 4 is_stmt 1 view .LVU481
 1551 00b0 4021     		movs	r1, #64
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 41


 1552 00b2 3846     		mov	r0, r7
 1553 00b4 FFF7FEFF 		bl	WIZCHIP_WRITE
 1554              	.LVL136:
 482:ioLIB/socket.c **** #endif
 1555              		.loc 1 482 4 view .LVU482
 1556              	.L146:
 482:ioLIB/socket.c **** #endif
 1557              		.loc 1 482 23 discriminator 1 view .LVU483
 482:ioLIB/socket.c **** #endif
 1558              		.loc 1 482 9 discriminator 1 view .LVU484
 482:ioLIB/socket.c **** #endif
 1559              		.loc 1 482 10 is_stmt 0 discriminator 1 view .LVU485
 1560 00b8 3846     		mov	r0, r7
 1561 00ba FFF7FEFF 		bl	WIZCHIP_READ
 1562              	.LVL137:
 482:ioLIB/socket.c **** #endif
 1563              		.loc 1 482 9 discriminator 1 view .LVU486
 1564 00be 0028     		cmp	r0, #0
 1565 00c0 FAD1     		bne	.L146
 487:ioLIB/socket.c **** }
 1566              		.loc 1 487 4 is_stmt 1 view .LVU487
 487:ioLIB/socket.c **** }
 1567              		.loc 1 487 11 is_stmt 0 view .LVU488
 1568 00c2 2046     		mov	r0, r4
 1569              	.LVL138:
 1570              	.L138:
 1571              		.loc 1 488 1 view .LVU489
 1572 00c4 03B0     		add	sp, sp, #12
 1573              	.LCFI28:
 1574              		.cfi_remember_state
 1575              		.cfi_def_cfa_offset 36
 1576              	.LVL139:
 1577              		.loc 1 488 1 view .LVU490
 1578              		@ sp needed
 1579 00c6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1580              	.LVL140:
 1581              	.L144:
 1582              	.LCFI29:
 1583              		.cfi_restore_state
 431:ioLIB/socket.c ****       };
 1584              		.loc 1 431 10 is_stmt 1 view .LVU491
 431:ioLIB/socket.c ****       };
 1585              		.loc 1 431 12 is_stmt 0 view .LVU492
 1586 00ca BBF1000F 		cmp	fp, #0
 1587 00ce B7D0     		beq	.L145
 1588 00d0 DCE7     		b	.L142
 1589              	.LVL141:
 1590              	.L141:
 420:ioLIB/socket.c ****                   return SOCKERR_SOCKSTATUS;
 1591              		.loc 1 420 19 is_stmt 1 view .LVU493
 1592              	.LBB32:
 1593              	.LBI32:
 198:ioLIB/socket.c **** {
 1594              		.loc 1 198 8 view .LVU494
 1595              	.LBB33:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1596              		.loc 1 200 2 view .LVU495
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 42


 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1597              		.loc 1 200 2 view .LVU496
 1598 00d2 4046     		mov	r0, r8
 1599 00d4 FFF7FEFF 		bl	close.part.0
 1600              	.LVL142:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 1601              		.loc 1 200 2 is_stmt 0 view .LVU497
 1602              	.LBE33:
 1603              	.LBE32:
 421:ioLIB/socket.c ****                }
 1604              		.loc 1 421 19 is_stmt 1 view .LVU498
 421:ioLIB/socket.c ****                }
 1605              		.loc 1 421 26 is_stmt 0 view .LVU499
 1606 00d8 6FF00600 		mvn	r0, #6
 1607              		.loc 1 488 1 view .LVU500
 1608 00dc 03B0     		add	sp, sp, #12
 1609              	.LCFI30:
 1610              		.cfi_remember_state
 1611              		.cfi_def_cfa_offset 36
 1612              	.LVL143:
 1613              		.loc 1 488 1 view .LVU501
 1614              		@ sp needed
 1615 00de BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1616              	.LVL144:
 1617              	.L151:
 1618              	.LCFI31:
 1619              		.cfi_restore_state
 397:ioLIB/socket.c ****    
 1620              		.loc 1 397 4 view .LVU502
 1621 00e2 6FF00D00 		mvn	r0, #13
 1622 00e6 EDE7     		b	.L138
 1623              	.LVL145:
 1624              	.L149:
 395:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 1625              		.loc 1 395 4 view .LVU503
 1626 00e8 4FF0FF30 		mov	r0, #-1
 1627              	.LVL146:
 395:ioLIB/socket.c ****    CHECK_SOCKMODE(Sn_MR_TCP);
 1628              		.loc 1 395 4 view .LVU504
 1629 00ec EAE7     		b	.L138
 1630              	.LVL147:
 1631              	.L150:
 396:ioLIB/socket.c ****    CHECK_SOCKDATA();
 1632              		.loc 1 396 4 view .LVU505
 1633 00ee 6FF00400 		mvn	r0, #4
 1634 00f2 E7E7     		b	.L138
 1635              	.L155:
 1636              		.align	2
 1637              	.L154:
 1638 00f4 00000000 		.word	.LANCHOR0
 1639              		.cfi_endproc
 1640              	.LFE6:
 1642              		.section	.text.sendto,"ax",%progbits
 1643              		.align	1
 1644              		.p2align 2,,3
 1645              		.global	sendto
 1646              		.syntax unified
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 43


 1647              		.thumb
 1648              		.thumb_func
 1650              	sendto:
 1651              	.LVL148:
 1652              	.LFB7:
 489:ioLIB/socket.c **** 
 490:ioLIB/socket.c **** int32_t sendto(uint8_t sn, uint8_t * buf, uint16_t len, uint8_t * addr, uint16_t port)
 491:ioLIB/socket.c **** {
 1653              		.loc 1 491 1 is_stmt 1 view -0
 1654              		.cfi_startproc
 1655              		@ args = 4, pretend = 0, frame = 0
 1656              		@ frame_needed = 0, uses_anonymous_args = 0
 492:ioLIB/socket.c ****    uint8_t tmp = 0;
 1657              		.loc 1 492 4 view .LVU507
 493:ioLIB/socket.c ****    uint16_t freesize = 0;
 1658              		.loc 1 493 4 view .LVU508
 494:ioLIB/socket.c ****    uint32_t taddr;
 1659              		.loc 1 494 4 view .LVU509
 495:ioLIB/socket.c **** 
 496:ioLIB/socket.c ****    CHECK_SOCKNUM();
 1660              		.loc 1 496 4 view .LVU510
 1661              		.loc 1 496 4 view .LVU511
 491:ioLIB/socket.c ****    uint8_t tmp = 0;
 1662              		.loc 1 491 1 is_stmt 0 view .LVU512
 1663 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1664              	.LCFI32:
 1665              		.cfi_def_cfa_offset 40
 1666              		.cfi_offset 3, -40
 1667              		.cfi_offset 4, -36
 1668              		.cfi_offset 5, -32
 1669              		.cfi_offset 6, -28
 1670              		.cfi_offset 7, -24
 1671              		.cfi_offset 8, -20
 1672              		.cfi_offset 9, -16
 1673              		.cfi_offset 10, -12
 1674              		.cfi_offset 11, -8
 1675              		.cfi_offset 14, -4
 1676              		.loc 1 496 4 view .LVU513
 1677 0004 0828     		cmp	r0, #8
 491:ioLIB/socket.c ****    uint8_t tmp = 0;
 1678              		.loc 1 491 1 view .LVU514
 1679 0006 BDF82880 		ldrh	r8, [sp, #40]
 1680              		.loc 1 496 4 view .LVU515
 1681 000a 00F2AB80 		bhi	.L170
 1682              		.loc 1 496 4 is_stmt 1 discriminator 2 view .LVU516
 1683              		.loc 1 496 19 discriminator 2 view .LVU517
 497:ioLIB/socket.c ****    switch(getSn_MR(sn) & 0x0F)
 1684              		.loc 1 497 4 discriminator 2 view .LVU518
 1685              		.loc 1 497 11 is_stmt 0 discriminator 2 view .LVU519
 1686 000e 4701     		lsls	r7, r0, #5
 1687 0010 0837     		adds	r7, r7, #8
 1688 0012 0646     		mov	r6, r0
 1689 0014 3846     		mov	r0, r7
 1690              	.LVL149:
 1691              		.loc 1 497 11 discriminator 2 view .LVU520
 1692 0016 8B46     		mov	fp, r1
 1693 0018 1546     		mov	r5, r2
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 44


 1694 001a 1C46     		mov	r4, r3
 1695 001c FFF7FEFF 		bl	WIZCHIP_READ
 1696              	.LVL150:
 1697              		.loc 1 497 4 discriminator 2 view .LVU521
 1698 0020 00F00F00 		and	r0, r0, #15
 1699 0024 0238     		subs	r0, r0, #2
 1700 0026 0228     		cmp	r0, #2
 1701 0028 00F29F80 		bhi	.L171
 498:ioLIB/socket.c ****    {
 499:ioLIB/socket.c ****       case Sn_MR_UDP:
 500:ioLIB/socket.c ****       case Sn_MR_MACRAW:
 501:ioLIB/socket.c **** //         break;
 502:ioLIB/socket.c **** //   #if ( _WIZCHIP_ < 5200 )
 503:ioLIB/socket.c ****       case Sn_MR_IPRAW:
 504:ioLIB/socket.c ****          break;
 1702              		.loc 1 504 10 is_stmt 1 view .LVU522
 505:ioLIB/socket.c **** //   #endif
 506:ioLIB/socket.c ****       default:
 507:ioLIB/socket.c ****          return SOCKERR_SOCKMODE;
 508:ioLIB/socket.c ****    }
 509:ioLIB/socket.c ****    CHECK_SOCKDATA();
 1703              		.loc 1 509 4 view .LVU523
 1704              		.loc 1 509 4 view .LVU524
 1705 002c 002D     		cmp	r5, #0
 1706 002e 00F09F80 		beq	.L172
 1707              		.loc 1 509 4 discriminator 2 view .LVU525
 1708              		.loc 1 509 20 discriminator 2 view .LVU526
 510:ioLIB/socket.c ****    //M20140501 : For avoiding fatal error on memory align mismatched
 511:ioLIB/socket.c ****    //if(*((uint32_t*)addr) == 0) return SOCKERR_IPINVALID;
 512:ioLIB/socket.c ****    //{
 513:ioLIB/socket.c ****       //uint32_t taddr;
 514:ioLIB/socket.c ****       taddr = ((uint32_t)addr[0]) & 0x000000FF;
 1709              		.loc 1 514 7 discriminator 2 view .LVU527
 1710              	.LVL151:
 515:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[1] & 0x000000FF);
 1711              		.loc 1 515 7 discriminator 2 view .LVU528
 514:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[1] & 0x000000FF);
 1712              		.loc 1 514 13 is_stmt 0 discriminator 2 view .LVU529
 1713 0032 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 1714              	.LVL152:
 516:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[2] & 0x000000FF);
 1715              		.loc 1 516 7 is_stmt 1 discriminator 2 view .LVU530
 515:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[1] & 0x000000FF);
 1716              		.loc 1 515 49 is_stmt 0 discriminator 2 view .LVU531
 1717 0034 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 515:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[1] & 0x000000FF);
 1718              		.loc 1 515 13 discriminator 2 view .LVU532
 1719 0036 02EB0322 		add	r2, r2, r3, lsl #8
 1720              	.LVL153:
 517:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[3] & 0x000000FF);
 1721              		.loc 1 517 7 is_stmt 1 discriminator 2 view .LVU533
 516:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[2] & 0x000000FF);
 1722              		.loc 1 516 49 is_stmt 0 discriminator 2 view .LVU534
 1723 003a A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 516:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[2] & 0x000000FF);
 1724              		.loc 1 516 13 discriminator 2 view .LVU535
 1725 003c 03EB0222 		add	r2, r3, r2, lsl #8
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 45


 1726              	.LVL154:
 518:ioLIB/socket.c ****    //}
 519:ioLIB/socket.c ****    //
 520:ioLIB/socket.c ****    //if(*((uint32_t*)addr) == 0) return SOCKERR_IPINVALID;
 521:ioLIB/socket.c ****    if((taddr == 0) && ((getSn_MR(sn)&Sn_MR_MACRAW) != Sn_MR_MACRAW)) return SOCKERR_IPINVALID;
 1727              		.loc 1 521 4 is_stmt 1 discriminator 2 view .LVU536
 517:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[3] & 0x000000FF);
 1728              		.loc 1 517 49 is_stmt 0 discriminator 2 view .LVU537
 1729 0040 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 517:ioLIB/socket.c ****       taddr = (taddr << 8) + ((uint32_t)addr[3] & 0x000000FF);
 1730              		.loc 1 517 13 discriminator 2 view .LVU538
 1731 0042 03EB0223 		add	r3, r3, r2, lsl #8
 1732              	.LVL155:
 1733              		.loc 1 521 6 discriminator 2 view .LVU539
 1734 0046 002B     		cmp	r3, #0
 1735 0048 79D0     		beq	.L158
 1736              	.LVL156:
 1737              	.L161:
 522:ioLIB/socket.c ****    if((port  == 0) && ((getSn_MR(sn)&Sn_MR_MACRAW) != Sn_MR_MACRAW)) return SOCKERR_PORTZERO;
 1738              		.loc 1 522 4 is_stmt 1 view .LVU540
 1739              		.loc 1 522 6 is_stmt 0 view .LVU541
 1740 004a B8F1000F 		cmp	r8, #0
 1741 004e 6ED0     		beq	.L159
 1742              	.L160:
 523:ioLIB/socket.c ****    tmp = getSn_SR(sn);
 1743              		.loc 1 523 4 is_stmt 1 view .LVU542
 1744              		.loc 1 523 10 is_stmt 0 view .LVU543
 1745 0050 07F54079 		add	r9, r7, #768
 1746 0054 4846     		mov	r0, r9
 1747 0056 FFF7FEFF 		bl	WIZCHIP_READ
 1748              	.LVL157:
 524:ioLIB/socket.c **** //#if ( _WIZCHIP_ < 5200 )
 525:ioLIB/socket.c ****    if((tmp != SOCK_MACRAW) && (tmp != SOCK_UDP) && (tmp != SOCK_IPRAW)) return SOCKERR_SOCKSTATUS;
 1749              		.loc 1 525 4 is_stmt 1 view .LVU544
 1750              		.loc 1 525 6 is_stmt 0 view .LVU545
 1751 005a 4228     		cmp	r0, #66
 1752 005c 07D0     		beq	.L163
 1753              		.loc 1 525 28 discriminator 1 view .LVU546
 1754 005e 00F0EF00 		and	r0, r0, #239
 1755              	.LVL158:
 1756              		.loc 1 525 28 discriminator 1 view .LVU547
 1757 0062 2228     		cmp	r0, #34
 1758 0064 03D0     		beq	.L163
 1759              		.loc 1 525 80 view .LVU548
 1760 0066 6FF00600 		mvn	r0, #6
 1761              	.LVL159:
 1762              	.L156:
 526:ioLIB/socket.c **** //#else
 527:ioLIB/socket.c **** //   if(tmp != SOCK_MACRAW && tmp != SOCK_UDP) return SOCKERR_SOCKSTATUS;
 528:ioLIB/socket.c **** //#endif
 529:ioLIB/socket.c ****       
 530:ioLIB/socket.c ****    setSn_DIPR(sn,addr);
 531:ioLIB/socket.c ****    setSn_DPORT(sn,port);      
 532:ioLIB/socket.c ****    freesize = getSn_TxMAX(sn);
 533:ioLIB/socket.c ****    if (len > freesize) len = freesize; // check size not to exceed MAX size.
 534:ioLIB/socket.c ****    while(1)
 535:ioLIB/socket.c ****    {
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 46


 536:ioLIB/socket.c ****       freesize = getSn_TX_FSR(sn);
 537:ioLIB/socket.c ****       if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 538:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 539:ioLIB/socket.c ****       if(len <= freesize) break;
 540:ioLIB/socket.c ****    };
 541:ioLIB/socket.c **** 	wiz_send_data(sn, buf, len);
 542:ioLIB/socket.c **** 
 543:ioLIB/socket.c ****    #if _WIZCHIP_ < 5500   //M20150401 : for WIZCHIP Errata #4, #5 (ARP errata)
 544:ioLIB/socket.c ****       getSIPR((uint8_t*)&taddr);
 545:ioLIB/socket.c ****       if(taddr == 0)
 546:ioLIB/socket.c ****       {
 547:ioLIB/socket.c ****          getSUBR((uint8_t*)&taddr);
 548:ioLIB/socket.c ****          setSUBR((uint8_t*)"\x00\x00\x00\x00");
 549:ioLIB/socket.c ****       }
 550:ioLIB/socket.c ****       else taddr = 0;
 551:ioLIB/socket.c ****    #endif
 552:ioLIB/socket.c **** 
 553:ioLIB/socket.c **** //A20150601 : For W5300
 554:ioLIB/socket.c **** #if _WIZCHIP_ == 5300
 555:ioLIB/socket.c ****    setSn_TX_WRSR(sn, len);
 556:ioLIB/socket.c **** #endif
 557:ioLIB/socket.c **** //   
 558:ioLIB/socket.c **** 	setSn_CR(sn,Sn_CR_SEND);
 559:ioLIB/socket.c **** 	/* wait to process the command... */
 560:ioLIB/socket.c **** 	while(getSn_CR(sn));
 561:ioLIB/socket.c ****    while(1)
 562:ioLIB/socket.c ****    {
 563:ioLIB/socket.c ****       tmp = getSn_IR(sn);
 564:ioLIB/socket.c ****       if(tmp & Sn_IR_SENDOK)
 565:ioLIB/socket.c ****       {
 566:ioLIB/socket.c ****          setSn_IR(sn, Sn_IR_SENDOK);
 567:ioLIB/socket.c ****          break;
 568:ioLIB/socket.c ****       }
 569:ioLIB/socket.c ****       //M:20131104
 570:ioLIB/socket.c ****       //else if(tmp & Sn_IR_TIMEOUT) return SOCKERR_TIMEOUT;
 571:ioLIB/socket.c ****       else if(tmp & Sn_IR_TIMEOUT)
 572:ioLIB/socket.c ****       {
 573:ioLIB/socket.c ****          setSn_IR(sn, Sn_IR_TIMEOUT);
 574:ioLIB/socket.c ****          //M20150409 : Fixed the lost of sign bits by type casting.
 575:ioLIB/socket.c ****          //len = (uint16_t)SOCKERR_TIMEOUT;
 576:ioLIB/socket.c ****          //break;
 577:ioLIB/socket.c ****          #if _WIZCHIP_ < 5500   //M20150401 : for WIZCHIP Errata #4, #5 (ARP errata)
 578:ioLIB/socket.c ****             if(taddr) setSUBR((uint8_t*)&taddr);
 579:ioLIB/socket.c ****          #endif
 580:ioLIB/socket.c ****          return SOCKERR_TIMEOUT;
 581:ioLIB/socket.c ****       }
 582:ioLIB/socket.c ****       ////////////
 583:ioLIB/socket.c ****    }
 584:ioLIB/socket.c ****    #if _WIZCHIP_ < 5500   //M20150401 : for WIZCHIP Errata #4, #5 (ARP errata)
 585:ioLIB/socket.c ****       if(taddr) setSUBR((uint8_t*)&taddr);
 586:ioLIB/socket.c ****    #endif
 587:ioLIB/socket.c ****    //M20150409 : Explicit Type Casting
 588:ioLIB/socket.c ****    //return len;
 589:ioLIB/socket.c ****    return (int32_t)len;
 590:ioLIB/socket.c **** }
 1763              		.loc 1 590 1 view .LVU549
 1764 006a BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 47


 1765              	.LVL160:
 1766              	.L163:
 530:ioLIB/socket.c ****    setSn_DPORT(sn,port);      
 1767              		.loc 1 530 4 is_stmt 1 view .LVU550
 1768 006e 0422     		movs	r2, #4
 1769 0070 2146     		mov	r1, r4
 1770 0072 07F54060 		add	r0, r7, #3072
 1771 0076 FFF7FEFF 		bl	WIZCHIP_WRITE_BUF
 1772              	.LVL161:
 531:ioLIB/socket.c ****    freesize = getSn_TxMAX(sn);
 1773              		.loc 1 531 4 view .LVU551
 1774 007a 4FEA1821 		lsr	r1, r8, #8
 1775 007e 07F58050 		add	r0, r7, #4096
 1776 0082 FFF7FEFF 		bl	WIZCHIP_WRITE
 1777              	.LVL162:
 531:ioLIB/socket.c ****    freesize = getSn_TxMAX(sn);
 1778              		.loc 1 531 4 view .LVU552
 1779 0086 5FFA88F1 		uxtb	r1, r8
 1780 008a 07F58850 		add	r0, r7, #4352
 1781 008e FFF7FEFF 		bl	WIZCHIP_WRITE
 1782              	.LVL163:
 531:ioLIB/socket.c ****    freesize = getSn_TxMAX(sn);
 1783              		.loc 1 531 24 view .LVU553
 532:ioLIB/socket.c ****    if (len > freesize) len = freesize; // check size not to exceed MAX size.
 1784              		.loc 1 532 4 view .LVU554
 532:ioLIB/socket.c ****    if (len > freesize) len = freesize; // check size not to exceed MAX size.
 1785              		.loc 1 532 15 is_stmt 0 view .LVU555
 1786 0092 07F5F850 		add	r0, r7, #7936
 1787 0096 FFF7FEFF 		bl	WIZCHIP_READ
 1788              	.LVL164:
 533:ioLIB/socket.c ****    while(1)
 1789              		.loc 1 533 4 is_stmt 1 view .LVU556
 534:ioLIB/socket.c ****    {
 1790              		.loc 1 534 4 view .LVU557
 536:ioLIB/socket.c ****       if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 1791              		.loc 1 536 7 view .LVU558
 532:ioLIB/socket.c ****    if (len > freesize) len = freesize; // check size not to exceed MAX size.
 1792              		.loc 1 532 13 is_stmt 0 view .LVU559
 1793 009a 8002     		lsls	r0, r0, #10
 1794              	.LVL165:
 532:ioLIB/socket.c ****    if (len > freesize) len = freesize; // check size not to exceed MAX size.
 1795              		.loc 1 532 13 view .LVU560
 1796 009c 80B2     		uxth	r0, r0
 1797 009e 8542     		cmp	r5, r0
 1798 00a0 28BF     		it	cs
 1799 00a2 0546     		movcs	r5, r0
 536:ioLIB/socket.c ****       if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 1800              		.loc 1 536 18 view .LVU561
 1801 00a4 3046     		mov	r0, r6
 1802 00a6 FFF7FEFF 		bl	getSn_TX_FSR
 1803              	.LVL166:
 1804 00aa 4FF00108 		mov	r8, #1
 1805 00ae 0446     		mov	r4, r0
 1806              	.LVL167:
 537:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1807              		.loc 1 537 10 view .LVU562
 1808 00b0 4846     		mov	r0, r9
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 48


 1809              	.LVL168:
 537:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1810              		.loc 1 537 7 is_stmt 1 view .LVU563
 538:ioLIB/socket.c ****       if(len <= freesize) break;
 1811              		.loc 1 538 11 is_stmt 0 view .LVU564
 1812 00b2 DFF8C4A0 		ldr	r10, .L187
 1813 00b6 08FA06F8 		lsl	r8, r8, r6
 537:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1814              		.loc 1 537 10 view .LVU565
 1815 00ba FFF7FEFF 		bl	WIZCHIP_READ
 1816              	.LVL169:
 538:ioLIB/socket.c ****       if(len <= freesize) break;
 1817              		.loc 1 538 7 is_stmt 1 view .LVU566
 539:ioLIB/socket.c ****    };
 1818              		.loc 1 539 7 view .LVU567
 537:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1819              		.loc 1 537 9 is_stmt 0 view .LVU568
 1820 00be 90B3     		cbz	r0, .L176
 1821              	.L186:
 538:ioLIB/socket.c ****       if(len <= freesize) break;
 1822              		.loc 1 538 11 view .LVU569
 1823 00c0 BAF80030 		ldrh	r3, [r10]
 538:ioLIB/socket.c ****       if(len <= freesize) break;
 1824              		.loc 1 538 9 view .LVU570
 1825 00c4 13EA080F 		tst	r3, r8
 1826 00c8 22D0     		beq	.L164
 538:ioLIB/socket.c ****       if(len <= freesize) break;
 1827              		.loc 1 538 36 discriminator 1 view .LVU571
 1828 00ca A542     		cmp	r5, r4
 1829 00cc 3FD8     		bhi	.L184
 1830              	.L165:
 540:ioLIB/socket.c **** 	wiz_send_data(sn, buf, len);
 1831              		.loc 1 540 5 is_stmt 1 view .LVU572
 541:ioLIB/socket.c **** 
 1832              		.loc 1 541 2 view .LVU573
 1833 00ce 5946     		mov	r1, fp
 1834 00d0 3046     		mov	r0, r6
 1835 00d2 2A46     		mov	r2, r5
 558:ioLIB/socket.c **** 	/* wait to process the command... */
 1836              		.loc 1 558 2 is_stmt 0 view .LVU574
 1837 00d4 07F58074 		add	r4, r7, #256
 1838              	.LVL170:
 541:ioLIB/socket.c **** 
 1839              		.loc 1 541 2 view .LVU575
 1840 00d8 FFF7FEFF 		bl	wiz_send_data
 1841              	.LVL171:
 558:ioLIB/socket.c **** 	/* wait to process the command... */
 1842              		.loc 1 558 2 is_stmt 1 view .LVU576
 1843 00dc 2021     		movs	r1, #32
 1844 00de 2046     		mov	r0, r4
 1845 00e0 FFF7FEFF 		bl	WIZCHIP_WRITE
 1846              	.LVL172:
 560:ioLIB/socket.c ****    while(1)
 1847              		.loc 1 560 2 view .LVU577
 1848              	.L167:
 560:ioLIB/socket.c ****    while(1)
 1849              		.loc 1 560 21 discriminator 1 view .LVU578
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 49


 560:ioLIB/socket.c ****    while(1)
 1850              		.loc 1 560 7 discriminator 1 view .LVU579
 560:ioLIB/socket.c ****    while(1)
 1851              		.loc 1 560 8 is_stmt 0 discriminator 1 view .LVU580
 1852 00e4 2046     		mov	r0, r4
 1853 00e6 FFF7FEFF 		bl	WIZCHIP_READ
 1854              	.LVL173:
 560:ioLIB/socket.c ****    while(1)
 1855              		.loc 1 560 7 discriminator 1 view .LVU581
 1856 00ea 0028     		cmp	r0, #0
 1857 00ec FAD1     		bne	.L167
 563:ioLIB/socket.c ****       if(tmp & Sn_IR_SENDOK)
 1858              		.loc 1 563 13 view .LVU582
 1859 00ee 07F50077 		add	r7, r7, #512
 1860 00f2 01E0     		b	.L169
 1861              	.LVL174:
 1862              	.L168:
 571:ioLIB/socket.c ****       {
 1863              		.loc 1 571 14 view .LVU583
 1864 00f4 0307     		lsls	r3, r0, #28
 1865 00f6 2DD4     		bmi	.L185
 1866              	.LVL175:
 1867              	.L169:
 561:ioLIB/socket.c ****    {
 1868              		.loc 1 561 4 is_stmt 1 view .LVU584
 563:ioLIB/socket.c ****       if(tmp & Sn_IR_SENDOK)
 1869              		.loc 1 563 7 view .LVU585
 563:ioLIB/socket.c ****       if(tmp & Sn_IR_SENDOK)
 1870              		.loc 1 563 13 is_stmt 0 view .LVU586
 1871 00f8 3846     		mov	r0, r7
 1872 00fa FFF7FEFF 		bl	WIZCHIP_READ
 1873              	.LVL176:
 571:ioLIB/socket.c ****       {
 1874              		.loc 1 571 12 is_stmt 1 view .LVU587
 564:ioLIB/socket.c ****       {
 1875              		.loc 1 564 7 view .LVU588
 564:ioLIB/socket.c ****       {
 1876              		.loc 1 564 9 is_stmt 0 view .LVU589
 1877 00fe C206     		lsls	r2, r0, #27
 1878 0100 F8D5     		bpl	.L168
 566:ioLIB/socket.c ****          break;
 1879              		.loc 1 566 10 is_stmt 1 view .LVU590
 1880 0102 3846     		mov	r0, r7
 1881              	.LVL177:
 566:ioLIB/socket.c ****          break;
 1882              		.loc 1 566 10 is_stmt 0 view .LVU591
 1883 0104 1021     		movs	r1, #16
 1884 0106 FFF7FEFF 		bl	WIZCHIP_WRITE
 1885              	.LVL178:
 567:ioLIB/socket.c ****       }
 1886              		.loc 1 567 10 is_stmt 1 view .LVU592
 589:ioLIB/socket.c **** }
 1887              		.loc 1 589 4 view .LVU593
 589:ioLIB/socket.c **** }
 1888              		.loc 1 589 11 is_stmt 0 view .LVU594
 1889 010a 2846     		mov	r0, r5
 1890              		.loc 1 590 1 view .LVU595
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 50


 1891 010c BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1892              	.LVL179:
 1893              	.L164:
 539:ioLIB/socket.c ****    };
 1894              		.loc 1 539 9 view .LVU596
 1895 0110 A542     		cmp	r5, r4
 1896 0112 DCD9     		bls	.L165
 534:ioLIB/socket.c ****    {
 1897              		.loc 1 534 4 is_stmt 1 view .LVU597
 536:ioLIB/socket.c ****       if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 1898              		.loc 1 536 7 view .LVU598
 536:ioLIB/socket.c ****       if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 1899              		.loc 1 536 18 is_stmt 0 view .LVU599
 1900 0114 3046     		mov	r0, r6
 1901 0116 FFF7FEFF 		bl	getSn_TX_FSR
 1902              	.LVL180:
 1903 011a 0446     		mov	r4, r0
 1904              	.LVL181:
 537:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1905              		.loc 1 537 10 view .LVU600
 1906 011c 4846     		mov	r0, r9
 1907              	.LVL182:
 537:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1908              		.loc 1 537 7 is_stmt 1 view .LVU601
 537:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1909              		.loc 1 537 10 is_stmt 0 view .LVU602
 1910 011e FFF7FEFF 		bl	WIZCHIP_READ
 1911              	.LVL183:
 538:ioLIB/socket.c ****       if(len <= freesize) break;
 1912              		.loc 1 538 7 is_stmt 1 view .LVU603
 539:ioLIB/socket.c ****    };
 1913              		.loc 1 539 7 view .LVU604
 537:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1914              		.loc 1 537 9 is_stmt 0 view .LVU605
 1915 0122 0028     		cmp	r0, #0
 1916 0124 CCD1     		bne	.L186
 1917              	.L176:
 537:ioLIB/socket.c ****       if( (sock_io_mode & (1<<sn)) && (len > freesize) ) return SOCK_BUSY;
 1918              		.loc 1 537 46 view .LVU606
 1919 0126 6FF00300 		mvn	r0, #3
 1920              		.loc 1 590 1 view .LVU607
 1921 012a BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1922              	.LVL184:
 1923              	.L159:
 522:ioLIB/socket.c ****    tmp = getSn_SR(sn);
 1924              		.loc 1 522 25 discriminator 1 view .LVU608
 1925 012e 3846     		mov	r0, r7
 1926 0130 FFF7FEFF 		bl	WIZCHIP_READ
 1927              	.LVL185:
 522:ioLIB/socket.c ****    tmp = getSn_SR(sn);
 1928              		.loc 1 522 20 discriminator 1 view .LVU609
 1929 0134 4107     		lsls	r1, r0, #29
 1930 0136 8BD4     		bmi	.L160
 522:ioLIB/socket.c ****    tmp = getSn_SR(sn);
 1931              		.loc 1 522 77 view .LVU610
 1932 0138 6FF00A00 		mvn	r0, #10
 1933 013c 95E7     		b	.L156
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 51


 1934              	.LVL186:
 1935              	.L158:
 521:ioLIB/socket.c ****    if((port  == 0) && ((getSn_MR(sn)&Sn_MR_MACRAW) != Sn_MR_MACRAW)) return SOCKERR_PORTZERO;
 1936              		.loc 1 521 25 discriminator 1 view .LVU611
 1937 013e 3846     		mov	r0, r7
 1938 0140 FFF7FEFF 		bl	WIZCHIP_READ
 1939              	.LVL187:
 521:ioLIB/socket.c ****    if((port  == 0) && ((getSn_MR(sn)&Sn_MR_MACRAW) != Sn_MR_MACRAW)) return SOCKERR_PORTZERO;
 1940              		.loc 1 521 20 discriminator 1 view .LVU612
 1941 0144 4007     		lsls	r0, r0, #29
 1942 0146 80D4     		bmi	.L161
 521:ioLIB/socket.c ****    if((port  == 0) && ((getSn_MR(sn)&Sn_MR_MACRAW) != Sn_MR_MACRAW)) return SOCKERR_PORTZERO;
 1943              		.loc 1 521 77 view .LVU613
 1944 0148 6FF00B00 		mvn	r0, #11
 1945 014c 8DE7     		b	.L156
 1946              	.LVL188:
 1947              	.L184:
 538:ioLIB/socket.c ****       if(len <= freesize) break;
 1948              		.loc 1 538 65 view .LVU614
 1949 014e 0020     		movs	r0, #0
 1950              		.loc 1 590 1 view .LVU615
 1951 0150 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1952              	.LVL189:
 1953              	.L185:
 573:ioLIB/socket.c ****          //M20150409 : Fixed the lost of sign bits by type casting.
 1954              		.loc 1 573 10 is_stmt 1 view .LVU616
 1955 0154 3846     		mov	r0, r7
 1956              	.LVL190:
 573:ioLIB/socket.c ****          //M20150409 : Fixed the lost of sign bits by type casting.
 1957              		.loc 1 573 10 is_stmt 0 view .LVU617
 1958 0156 0821     		movs	r1, #8
 1959 0158 FFF7FEFF 		bl	WIZCHIP_WRITE
 1960              	.LVL191:
 580:ioLIB/socket.c ****       }
 1961              		.loc 1 580 10 is_stmt 1 view .LVU618
 580:ioLIB/socket.c ****       }
 1962              		.loc 1 580 17 is_stmt 0 view .LVU619
 1963 015c 6FF00C00 		mvn	r0, #12
 1964              		.loc 1 590 1 view .LVU620
 1965 0160 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1966              	.LVL192:
 1967              	.L170:
 496:ioLIB/socket.c ****    switch(getSn_MR(sn) & 0x0F)
 1968              		.loc 1 496 4 view .LVU621
 1969 0164 4FF0FF30 		mov	r0, #-1
 1970              	.LVL193:
 496:ioLIB/socket.c ****    switch(getSn_MR(sn) & 0x0F)
 1971              		.loc 1 496 4 view .LVU622
 1972 0168 7FE7     		b	.L156
 1973              	.LVL194:
 1974              	.L171:
 507:ioLIB/socket.c ****    }
 1975              		.loc 1 507 17 view .LVU623
 1976 016a 6FF00400 		mvn	r0, #4
 1977 016e 7CE7     		b	.L156
 1978              	.L172:
 509:ioLIB/socket.c ****    //M20140501 : For avoiding fatal error on memory align mismatched
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 52


 1979              		.loc 1 509 4 view .LVU624
 1980 0170 6FF00D00 		mvn	r0, #13
 1981 0174 79E7     		b	.L156
 1982              	.L188:
 1983 0176 00BF     		.align	2
 1984              	.L187:
 1985 0178 00000000 		.word	.LANCHOR0
 1986              		.cfi_endproc
 1987              	.LFE7:
 1989              		.section	.text.recvfrom,"ax",%progbits
 1990              		.align	1
 1991              		.p2align 2,,3
 1992              		.global	recvfrom
 1993              		.syntax unified
 1994              		.thumb
 1995              		.thumb_func
 1997              	recvfrom:
 1998              	.LVL195:
 1999              	.LFB8:
 591:ioLIB/socket.c **** 
 592:ioLIB/socket.c **** 
 593:ioLIB/socket.c **** 
 594:ioLIB/socket.c **** int32_t recvfrom(uint8_t sn, uint8_t * buf, uint16_t len, uint8_t * addr, uint16_t *port)
 595:ioLIB/socket.c **** {
 2000              		.loc 1 595 1 is_stmt 1 view -0
 2001              		.cfi_startproc
 2002              		@ args = 4, pretend = 0, frame = 24
 2003              		@ frame_needed = 0, uses_anonymous_args = 0
 596:ioLIB/socket.c **** //M20150601 : For W5300   
 597:ioLIB/socket.c **** #if _WIZCHIP_ == 5300
 598:ioLIB/socket.c ****    uint16_t mr;
 599:ioLIB/socket.c ****    uint16_t mr1;
 600:ioLIB/socket.c **** #else   
 601:ioLIB/socket.c ****    uint8_t  mr;
 2004              		.loc 1 601 4 view .LVU626
 602:ioLIB/socket.c **** #endif
 603:ioLIB/socket.c **** //   
 604:ioLIB/socket.c ****    uint8_t  head[8];
 2005              		.loc 1 604 4 view .LVU627
 605:ioLIB/socket.c **** 	uint16_t pack_len=0;
 2006              		.loc 1 605 2 view .LVU628
 606:ioLIB/socket.c **** 
 607:ioLIB/socket.c ****    CHECK_SOCKNUM();
 2007              		.loc 1 607 4 view .LVU629
 2008              		.loc 1 607 4 view .LVU630
 595:ioLIB/socket.c **** //M20150601 : For W5300   
 2009              		.loc 1 595 1 is_stmt 0 view .LVU631
 2010 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2011              	.LCFI33:
 2012              		.cfi_def_cfa_offset 36
 2013              		.cfi_offset 4, -36
 2014              		.cfi_offset 5, -32
 2015              		.cfi_offset 6, -28
 2016              		.cfi_offset 7, -24
 2017              		.cfi_offset 8, -20
 2018              		.cfi_offset 9, -16
 2019              		.cfi_offset 10, -12
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 53


 2020              		.cfi_offset 11, -8
 2021              		.cfi_offset 14, -4
 2022 0004 87B0     		sub	sp, sp, #28
 2023              	.LCFI34:
 2024              		.cfi_def_cfa_offset 64
 2025              		.loc 1 607 4 view .LVU632
 2026 0006 0828     		cmp	r0, #8
 595:ioLIB/socket.c **** //M20150601 : For W5300   
 2027              		.loc 1 595 1 view .LVU633
 2028 0008 CDE90112 		strd	r1, r2, [sp, #4]
 2029 000c 0393     		str	r3, [sp, #12]
 2030              		.loc 1 607 4 view .LVU634
 2031 000e 00F20B81 		bhi	.L215
 2032              		.loc 1 607 4 is_stmt 1 discriminator 2 view .LVU635
 2033              		.loc 1 607 19 discriminator 2 view .LVU636
 608:ioLIB/socket.c ****    //CHECK_SOCKMODE(Sn_MR_UDP);
 609:ioLIB/socket.c **** //A20150601
 610:ioLIB/socket.c **** #if _WIZCHIP_ == 5300
 611:ioLIB/socket.c ****    mr1 = getMR();
 612:ioLIB/socket.c **** #endif   
 613:ioLIB/socket.c **** 
 614:ioLIB/socket.c ****    switch((mr=getSn_MR(sn)) & 0x0F)
 2034              		.loc 1 614 4 discriminator 2 view .LVU637
 2035              		.loc 1 614 15 is_stmt 0 discriminator 2 view .LVU638
 2036 0012 0127     		movs	r7, #1
 2037 0014 07EB8006 		add	r6, r7, r0, lsl #2
 2038 0018 F600     		lsls	r6, r6, #3
 2039 001a 0546     		mov	r5, r0
 2040 001c 3046     		mov	r0, r6
 2041              	.LVL196:
 2042              		.loc 1 614 15 discriminator 2 view .LVU639
 2043 001e 1446     		mov	r4, r2
 2044 0020 FFF7FEFF 		bl	WIZCHIP_READ
 2045              	.LVL197:
 2046              		.loc 1 614 4 discriminator 2 view .LVU640
 2047 0024 00F00F03 		and	r3, r0, #15
 2048 0028 023B     		subs	r3, r3, #2
 2049 002a 022B     		cmp	r3, #2
 2050              		.loc 1 614 15 discriminator 2 view .LVU641
 2051 002c 8046     		mov	r8, r0
 2052              	.LVL198:
 2053              		.loc 1 614 4 discriminator 2 view .LVU642
 2054 002e 00F2FE80 		bhi	.L216
 615:ioLIB/socket.c ****    {
 616:ioLIB/socket.c ****       case Sn_MR_UDP:
 617:ioLIB/socket.c **** 	  case Sn_MR_IPRAW:
 618:ioLIB/socket.c ****       case Sn_MR_MACRAW:
 619:ioLIB/socket.c ****          break;
 2055              		.loc 1 619 10 is_stmt 1 view .LVU643
 620:ioLIB/socket.c ****    #if ( _WIZCHIP_ < 5200 )         
 621:ioLIB/socket.c ****       case Sn_MR_PPPoE:
 622:ioLIB/socket.c ****          break;
 623:ioLIB/socket.c ****    #endif
 624:ioLIB/socket.c ****       default:
 625:ioLIB/socket.c ****          return SOCKERR_SOCKMODE;
 626:ioLIB/socket.c ****    }
 627:ioLIB/socket.c ****    CHECK_SOCKDATA();
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 54


 2056              		.loc 1 627 4 view .LVU644
 2057              		.loc 1 627 4 view .LVU645
 2058 0032 002C     		cmp	r4, #0
 2059 0034 00F0FE80 		beq	.L217
 2060              		.loc 1 627 4 discriminator 2 view .LVU646
 2061              		.loc 1 627 20 discriminator 2 view .LVU647
 628:ioLIB/socket.c ****    if(sock_remained_size[sn] == 0)
 2062              		.loc 1 628 4 discriminator 2 view .LVU648
 2063              		.loc 1 628 25 is_stmt 0 discriminator 2 view .LVU649
 2064 0038 DFF810B2 		ldr	fp, .L242+4
 2065 003c 3BF81540 		ldrh	r4, [fp, r5, lsl #1]
 2066              		.loc 1 628 6 discriminator 2 view .LVU650
 2067 0040 1CBB     		cbnz	r4, .L191
 629:ioLIB/socket.c ****    {
 630:ioLIB/socket.c ****       while(1)
 2068              		.loc 1 630 7 is_stmt 1 view .LVU651
 631:ioLIB/socket.c ****       {
 632:ioLIB/socket.c ****          pack_len = getSn_RX_RSR(sn);
 2069              		.loc 1 632 10 view .LVU652
 2070              		.loc 1 632 21 is_stmt 0 view .LVU653
 2071 0042 2846     		mov	r0, r5
 2072              	.LVL199:
 2073              		.loc 1 632 21 view .LVU654
 2074 0044 FFF7FEFF 		bl	getSn_RX_RSR
 2075              	.LVL200:
 633:ioLIB/socket.c ****          if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 2076              		.loc 1 633 13 view .LVU655
 2077 0048 06F54079 		add	r9, r6, #768
 632:ioLIB/socket.c ****          if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 2078              		.loc 1 632 21 view .LVU656
 2079 004c 0446     		mov	r4, r0
 2080              		.loc 1 633 13 view .LVU657
 2081 004e 4846     		mov	r0, r9
 2082              	.LVL201:
 2083              		.loc 1 633 10 is_stmt 1 view .LVU658
 634:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2084              		.loc 1 634 14 is_stmt 0 view .LVU659
 2085 0050 DFF8FCA1 		ldr	r10, .L242+8
 2086 0054 AF40     		lsls	r7, r7, r5
 633:ioLIB/socket.c ****          if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 2087              		.loc 1 633 13 view .LVU660
 2088 0056 FFF7FEFF 		bl	WIZCHIP_READ
 2089              	.LVL202:
 2090              		.loc 1 634 10 is_stmt 1 view .LVU661
 635:ioLIB/socket.c ****          if(pack_len != 0) break;
 2091              		.loc 1 635 10 view .LVU662
 633:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2092              		.loc 1 633 12 is_stmt 0 view .LVU663
 2093 005a 0028     		cmp	r0, #0
 2094 005c 4FD0     		beq	.L218
 2095              	.L240:
 634:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2096              		.loc 1 634 14 view .LVU664
 2097 005e BAF80030 		ldrh	r3, [r10]
 634:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2098              		.loc 1 634 12 view .LVU665
 2099 0062 3B42     		tst	r3, r7
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 55


 2100 0064 40D0     		beq	.L192
 634:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2101              		.loc 1 634 39 discriminator 1 view .LVU666
 2102 0066 002C     		cmp	r4, #0
 2103 0068 00F08A80 		beq	.L238
 2104              	.L193:
 636:ioLIB/socket.c ****       };
 2105              		.loc 1 636 8 is_stmt 1 view .LVU667
 637:ioLIB/socket.c ****    }
 638:ioLIB/socket.c **** //D20150601 : Move it to bottom
 639:ioLIB/socket.c **** // sock_pack_info[sn] = PACK_COMPLETED;
 640:ioLIB/socket.c **** 	switch (mr & 0x07)
 2106              		.loc 1 640 2 view .LVU668
 2107 006c 08F00708 		and	r8, r8, #7
 2108 0070 B8F1030F 		cmp	r8, #3
 2109 0074 49D0     		beq	.L195
 2110              		.loc 1 640 2 is_stmt 0 view .LVU669
 2111 0076 B8F1040F 		cmp	r8, #4
 2112 007a 00F08380 		beq	.L196
 2113 007e B8F1020F 		cmp	r8, #2
 2114 0082 00F0A580 		beq	.L239
 641:ioLIB/socket.c **** 	{
 642:ioLIB/socket.c **** 	   case Sn_MR_UDP :
 643:ioLIB/socket.c **** 	      if(sock_remained_size[sn] == 0)
 644:ioLIB/socket.c **** 	      {
 645:ioLIB/socket.c ****    			wiz_recv_data(sn, head, 8);
 646:ioLIB/socket.c ****    			setSn_CR(sn,Sn_CR_RECV);
 647:ioLIB/socket.c ****    			while(getSn_CR(sn));
 648:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 649:ioLIB/socket.c ****    	   //A20150601 : For W5300
 650:ioLIB/socket.c ****    		#if _WIZCHIP_ == 5300
 651:ioLIB/socket.c ****    		   if(mr1 & MR_FS)
 652:ioLIB/socket.c ****    		   {
 653:ioLIB/socket.c ****    		      addr[0] = head[1];
 654:ioLIB/socket.c ****    		      addr[1] = head[0];
 655:ioLIB/socket.c ****    		      addr[2] = head[3];
 656:ioLIB/socket.c ****    		      addr[3] = head[2];
 657:ioLIB/socket.c ****    		      *port = head[5];
 658:ioLIB/socket.c ****    		      *port = (*port << 8) + head[4];
 659:ioLIB/socket.c ****       			sock_remained_size[sn] = head[7];
 660:ioLIB/socket.c ****       			sock_remained_size[sn] = (sock_remained_size[sn] << 8) + head[6];
 661:ioLIB/socket.c ****    		   }
 662:ioLIB/socket.c ****             else
 663:ioLIB/socket.c ****             {
 664:ioLIB/socket.c ****          #endif
 665:ioLIB/socket.c ****                addr[0] = head[0];
 666:ioLIB/socket.c ****       			addr[1] = head[1];
 667:ioLIB/socket.c ****       			addr[2] = head[2];
 668:ioLIB/socket.c ****       			addr[3] = head[3];
 669:ioLIB/socket.c ****       			*port = head[4];
 670:ioLIB/socket.c ****       			*port = (*port << 8) + head[5];
 671:ioLIB/socket.c ****       			sock_remained_size[sn] = head[6];
 672:ioLIB/socket.c ****       			sock_remained_size[sn] = (sock_remained_size[sn] << 8) + head[7];
 673:ioLIB/socket.c ****          #if _WIZCHIP_ == 5300
 674:ioLIB/socket.c ****             }
 675:ioLIB/socket.c ****          #endif
 676:ioLIB/socket.c ****    			sock_pack_info[sn] = PACK_FIRST;
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 56


 677:ioLIB/socket.c ****    	   }
 678:ioLIB/socket.c **** 			if(len < sock_remained_size[sn]) pack_len = len;
 679:ioLIB/socket.c **** 			else pack_len = sock_remained_size[sn];
 680:ioLIB/socket.c **** 			//A20150601 : For W5300
 681:ioLIB/socket.c **** 			len = pack_len;
 682:ioLIB/socket.c **** 			#if _WIZCHIP_ == 5300
 683:ioLIB/socket.c **** 			   if(sock_pack_info[sn] & PACK_FIFOBYTE)
 684:ioLIB/socket.c **** 			   {
 685:ioLIB/socket.c **** 			      *buf++ = sock_remained_byte[sn];
 686:ioLIB/socket.c **** 			      pack_len -= 1;
 687:ioLIB/socket.c **** 			      sock_remained_size[sn] -= 1;
 688:ioLIB/socket.c **** 			      sock_pack_info[sn] &= ~PACK_FIFOBYTE;
 689:ioLIB/socket.c **** 			   }
 690:ioLIB/socket.c **** 			#endif
 691:ioLIB/socket.c **** 			//
 692:ioLIB/socket.c **** 			// Need to packet length check (default 1472)
 693:ioLIB/socket.c **** 			//
 694:ioLIB/socket.c ****    		wiz_recv_data(sn, buf, pack_len); // data copy.
 695:ioLIB/socket.c **** 			break;
 696:ioLIB/socket.c **** 	   case Sn_MR_MACRAW :
 697:ioLIB/socket.c **** 	      if(sock_remained_size[sn] == 0)
 698:ioLIB/socket.c **** 	      {
 699:ioLIB/socket.c ****    			wiz_recv_data(sn, head, 2);
 700:ioLIB/socket.c ****    			setSn_CR(sn,Sn_CR_RECV);
 701:ioLIB/socket.c ****    			while(getSn_CR(sn));
 702:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 703:ioLIB/socket.c ****     			sock_remained_size[sn] = head[0];
 704:ioLIB/socket.c ****    			sock_remained_size[sn] = (sock_remained_size[sn] <<8) + head[1] -2;
 705:ioLIB/socket.c ****    			#if _WIZCHIP_ == W5300
 706:ioLIB/socket.c ****    			if(sock_remained_size[sn] & 0x01)
 707:ioLIB/socket.c ****    				sock_remained_size[sn] = sock_remained_size[sn] + 1 - 4;
 708:ioLIB/socket.c ****    			else
 709:ioLIB/socket.c ****    				sock_remained_size[sn] -= 4;
 710:ioLIB/socket.c **** 			#endif
 711:ioLIB/socket.c ****    			if(sock_remained_size[sn] > 1514) 
 712:ioLIB/socket.c ****    			{
 713:ioLIB/socket.c ****    			   close(sn);
 714:ioLIB/socket.c ****    			   return SOCKFATAL_PACKLEN;
 715:ioLIB/socket.c ****    			}
 716:ioLIB/socket.c ****    			sock_pack_info[sn] = PACK_FIRST;
 717:ioLIB/socket.c ****    	   }
 718:ioLIB/socket.c **** 			if(len < sock_remained_size[sn]) pack_len = len;
 719:ioLIB/socket.c **** 			else pack_len = sock_remained_size[sn];
 720:ioLIB/socket.c **** 			wiz_recv_data(sn,buf,pack_len);
 721:ioLIB/socket.c **** 		   break;
 722:ioLIB/socket.c ****    //#if ( _WIZCHIP_ < 5200 )
 723:ioLIB/socket.c **** 		case Sn_MR_IPRAW:
 724:ioLIB/socket.c **** 		   if(sock_remained_size[sn] == 0)
 725:ioLIB/socket.c **** 		   {
 726:ioLIB/socket.c ****    			wiz_recv_data(sn, head, 6);
 727:ioLIB/socket.c ****    			setSn_CR(sn,Sn_CR_RECV);
 728:ioLIB/socket.c ****    			while(getSn_CR(sn));
 729:ioLIB/socket.c ****    			addr[0] = head[0];
 730:ioLIB/socket.c ****    			addr[1] = head[1];
 731:ioLIB/socket.c ****    			addr[2] = head[2];
 732:ioLIB/socket.c ****    			addr[3] = head[3];
 733:ioLIB/socket.c ****    			sock_remained_size[sn] = head[4];
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 57


 734:ioLIB/socket.c ****    			//M20150401 : For Typing Error
 735:ioLIB/socket.c ****    			//sock_remaiend_size[sn] = (sock_remained_size[sn] << 8) + head[5];
 736:ioLIB/socket.c ****    			sock_remained_size[sn] = (sock_remained_size[sn] << 8) + head[5];
 737:ioLIB/socket.c ****    			sock_pack_info[sn] = PACK_FIRST;
 738:ioLIB/socket.c ****          }
 739:ioLIB/socket.c **** 			//
 740:ioLIB/socket.c **** 			// Need to packet length check
 741:ioLIB/socket.c **** 			//
 742:ioLIB/socket.c **** 			if(len < sock_remained_size[sn]) pack_len = len;
 743:ioLIB/socket.c **** 			else pack_len = sock_remained_size[sn];
 744:ioLIB/socket.c ****    		wiz_recv_data(sn, buf, pack_len); // data copy.
 745:ioLIB/socket.c **** 			break;
 746:ioLIB/socket.c ****    //#endif
 747:ioLIB/socket.c ****       default:
 748:ioLIB/socket.c ****          wiz_recv_ignore(sn, pack_len); // data copy.
 749:ioLIB/socket.c ****          sock_remained_size[sn] = pack_len;
 750:ioLIB/socket.c ****          break;
 751:ioLIB/socket.c ****    }
 752:ioLIB/socket.c **** 	setSn_CR(sn,Sn_CR_RECV);
 753:ioLIB/socket.c **** 	/* wait to process the command... */
 754:ioLIB/socket.c **** 	while(getSn_CR(sn)) ;
 755:ioLIB/socket.c **** 	sock_remained_size[sn] -= pack_len;
 756:ioLIB/socket.c **** 	//M20150601 : 
 757:ioLIB/socket.c **** 	//if(sock_remained_size[sn] != 0) sock_pack_info[sn] |= 0x01;
 758:ioLIB/socket.c **** 	if(sock_remained_size[sn] != 0)
 759:ioLIB/socket.c **** 	{
 760:ioLIB/socket.c **** 	   sock_pack_info[sn] |= PACK_REMAINED;
 761:ioLIB/socket.c ****    #if _WIZCHIP_ == 5300	   
 762:ioLIB/socket.c **** 	   if(pack_len & 0x01) sock_pack_info[sn] |= PACK_FIFOBYTE;
 763:ioLIB/socket.c ****    #endif	      
 764:ioLIB/socket.c **** 	}
 765:ioLIB/socket.c **** 	else sock_pack_info[sn] = PACK_COMPLETED;
 766:ioLIB/socket.c **** #if _WIZCHIP_ == 5300	   
 767:ioLIB/socket.c ****    pack_len = len;
 768:ioLIB/socket.c **** #endif
 769:ioLIB/socket.c ****    //
 770:ioLIB/socket.c ****    //M20150409 : Explicit Type Casting
 771:ioLIB/socket.c ****    //return pack_len;
 772:ioLIB/socket.c ****    return (int32_t)pack_len;
 2115              		.loc 1 772 11 view .LVU670
 2116 0086 A046     		mov	r8, r4
 2117 0088 0DE0     		b	.L213
 2118              	.LVL203:
 2119              	.L191:
 636:ioLIB/socket.c ****    }
 2120              		.loc 1 636 8 is_stmt 1 view .LVU671
 640:ioLIB/socket.c **** 	{
 2121              		.loc 1 640 2 view .LVU672
 2122 008a 00F00708 		and	r8, r0, #7
 2123 008e B8F1030F 		cmp	r8, #3
 2124 0092 71D0     		beq	.L214
 2125 0094 B8F1040F 		cmp	r8, #4
 2126 0098 65D0     		beq	.L236
 2127 009a B8F1020F 		cmp	r8, #2
 2128 009e 62D0     		beq	.L236
 2129 00a0 4FF00008 		mov	r8, #0
 2130 00a4 4446     		mov	r4, r8
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 58


 2131              	.LVL204:
 2132              	.L213:
 748:ioLIB/socket.c ****          sock_remained_size[sn] = pack_len;
 2133              		.loc 1 748 10 view .LVU673
 2134 00a6 2146     		mov	r1, r4
 2135 00a8 2846     		mov	r0, r5
 2136 00aa FFF7FEFF 		bl	wiz_recv_ignore
 2137              	.LVL205:
 749:ioLIB/socket.c ****          break;
 2138              		.loc 1 749 10 view .LVU674
 2139 00ae 664F     		ldr	r7, .L242
 749:ioLIB/socket.c ****          break;
 2140              		.loc 1 749 33 is_stmt 0 view .LVU675
 2141 00b0 2BF81540 		strh	r4, [fp, r5, lsl #1]	@ movhi
 750:ioLIB/socket.c ****    }
 2142              		.loc 1 750 10 is_stmt 1 view .LVU676
 700:ioLIB/socket.c ****    			while(getSn_CR(sn));
 2143              		.loc 1 700 7 is_stmt 0 view .LVU677
 2144 00b4 06F58076 		add	r6, r6, #256
 2145              	.L201:
 2146              	.LVL206:
 752:ioLIB/socket.c **** 	/* wait to process the command... */
 2147              		.loc 1 752 2 is_stmt 1 view .LVU678
 2148 00b8 4021     		movs	r1, #64
 2149 00ba 3046     		mov	r0, r6
 2150 00bc FFF7FEFF 		bl	WIZCHIP_WRITE
 2151              	.LVL207:
 754:ioLIB/socket.c **** 	sock_remained_size[sn] -= pack_len;
 2152              		.loc 1 754 2 view .LVU679
 2153              	.L209:
 754:ioLIB/socket.c **** 	sock_remained_size[sn] -= pack_len;
 2154              		.loc 1 754 22 discriminator 1 view .LVU680
 754:ioLIB/socket.c **** 	sock_remained_size[sn] -= pack_len;
 2155              		.loc 1 754 7 discriminator 1 view .LVU681
 754:ioLIB/socket.c **** 	sock_remained_size[sn] -= pack_len;
 2156              		.loc 1 754 8 is_stmt 0 discriminator 1 view .LVU682
 2157 00c0 3046     		mov	r0, r6
 2158 00c2 FFF7FEFF 		bl	WIZCHIP_READ
 2159              	.LVL208:
 754:ioLIB/socket.c **** 	sock_remained_size[sn] -= pack_len;
 2160              		.loc 1 754 7 discriminator 1 view .LVU683
 2161 00c6 0028     		cmp	r0, #0
 2162 00c8 FAD1     		bne	.L209
 755:ioLIB/socket.c **** 	//M20150601 : 
 2163              		.loc 1 755 2 is_stmt 1 view .LVU684
 755:ioLIB/socket.c **** 	//M20150601 : 
 2164              		.loc 1 755 25 is_stmt 0 view .LVU685
 2165 00ca 3BF81530 		ldrh	r3, [fp, r5, lsl #1]
 2166 00ce 1C1B     		subs	r4, r3, r4
 2167              	.LVL209:
 755:ioLIB/socket.c **** 	//M20150601 : 
 2168              		.loc 1 755 25 view .LVU686
 2169 00d0 A4B2     		uxth	r4, r4
 2170 00d2 2BF81540 		strh	r4, [fp, r5, lsl #1]	@ movhi
 758:ioLIB/socket.c **** 	{
 2171              		.loc 1 758 2 is_stmt 1 view .LVU687
 758:ioLIB/socket.c **** 	{
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 59


 2172              		.loc 1 758 4 is_stmt 0 view .LVU688
 2173 00d6 14B1     		cbz	r4, .L210
 760:ioLIB/socket.c ****    #if _WIZCHIP_ == 5300	   
 2174              		.loc 1 760 5 is_stmt 1 view .LVU689
 760:ioLIB/socket.c ****    #if _WIZCHIP_ == 5300	   
 2175              		.loc 1 760 24 is_stmt 0 view .LVU690
 2176 00d8 785D     		ldrb	r0, [r7, r5]	@ zero_extendqisi2
 2177 00da 40F00100 		orr	r0, r0, #1
 2178              	.L210:
 2179 00de 7855     		strb	r0, [r7, r5]
 2180              		.loc 1 772 4 is_stmt 1 view .LVU691
 2181              	.L189:
 773:ioLIB/socket.c **** }
 2182              		.loc 1 773 1 is_stmt 0 view .LVU692
 2183 00e0 4046     		mov	r0, r8
 2184 00e2 07B0     		add	sp, sp, #28
 2185              	.LCFI35:
 2186              		.cfi_remember_state
 2187              		.cfi_def_cfa_offset 36
 2188              		@ sp needed
 2189 00e4 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2190              	.LVL210:
 2191              	.L192:
 2192              	.LCFI36:
 2193              		.cfi_restore_state
 635:ioLIB/socket.c ****       };
 2194              		.loc 1 635 12 view .LVU693
 2195 00e8 002C     		cmp	r4, #0
 2196 00ea BFD1     		bne	.L193
 630:ioLIB/socket.c ****       {
 2197              		.loc 1 630 7 is_stmt 1 view .LVU694
 632:ioLIB/socket.c ****          if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 2198              		.loc 1 632 10 view .LVU695
 632:ioLIB/socket.c ****          if(getSn_SR(sn) == SOCK_CLOSED) return SOCKERR_SOCKCLOSED;
 2199              		.loc 1 632 21 is_stmt 0 view .LVU696
 2200 00ec 2846     		mov	r0, r5
 2201 00ee FFF7FEFF 		bl	getSn_RX_RSR
 2202              	.LVL211:
 2203 00f2 0446     		mov	r4, r0
 2204              	.LVL212:
 633:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2205              		.loc 1 633 13 view .LVU697
 2206 00f4 4846     		mov	r0, r9
 2207              	.LVL213:
 633:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2208              		.loc 1 633 10 is_stmt 1 view .LVU698
 633:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2209              		.loc 1 633 13 is_stmt 0 view .LVU699
 2210 00f6 FFF7FEFF 		bl	WIZCHIP_READ
 2211              	.LVL214:
 634:ioLIB/socket.c ****          if(pack_len != 0) break;
 2212              		.loc 1 634 10 is_stmt 1 view .LVU700
 635:ioLIB/socket.c ****       };
 2213              		.loc 1 635 10 view .LVU701
 633:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2214              		.loc 1 633 12 is_stmt 0 view .LVU702
 2215 00fa 0028     		cmp	r0, #0
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 60


 2216 00fc AFD1     		bne	.L240
 2217              	.L218:
 633:ioLIB/socket.c ****          if( (sock_io_mode & (1<<sn)) && (pack_len == 0) ) return SOCK_BUSY;
 2218              		.loc 1 633 49 view .LVU703
 2219 00fe 6FF00308 		mvn	r8, #3
 2220              		.loc 1 773 1 view .LVU704
 2221 0102 4046     		mov	r0, r8
 2222 0104 07B0     		add	sp, sp, #28
 2223              	.LCFI37:
 2224              		.cfi_remember_state
 2225              		.cfi_def_cfa_offset 36
 2226              		@ sp needed
 2227 0106 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2228              	.LVL215:
 2229              	.L195:
 2230              	.LCFI38:
 2231              		.cfi_restore_state
 724:ioLIB/socket.c **** 		   {
 2232              		.loc 1 724 6 is_stmt 1 view .LVU705
 724:ioLIB/socket.c **** 		   {
 2233              		.loc 1 724 27 is_stmt 0 view .LVU706
 2234 010a 3BF81540 		ldrh	r4, [fp, r5, lsl #1]
 2235              	.LVL216:
 724:ioLIB/socket.c **** 		   {
 2236              		.loc 1 724 8 view .LVU707
 2237 010e 9CBB     		cbnz	r4, .L214
 726:ioLIB/socket.c ****    			setSn_CR(sn,Sn_CR_RECV);
 2238              		.loc 1 726 7 is_stmt 1 view .LVU708
 2239 0110 04A9     		add	r1, sp, #16
 2240 0112 2846     		mov	r0, r5
 727:ioLIB/socket.c ****    			while(getSn_CR(sn));
 2241              		.loc 1 727 7 is_stmt 0 view .LVU709
 2242 0114 06F58076 		add	r6, r6, #256
 726:ioLIB/socket.c ****    			setSn_CR(sn,Sn_CR_RECV);
 2243              		.loc 1 726 7 view .LVU710
 2244 0118 0622     		movs	r2, #6
 2245 011a FFF7FEFF 		bl	wiz_recv_data
 2246              	.LVL217:
 727:ioLIB/socket.c ****    			while(getSn_CR(sn));
 2247              		.loc 1 727 7 is_stmt 1 view .LVU711
 2248 011e 4021     		movs	r1, #64
 2249 0120 3046     		mov	r0, r6
 2250 0122 FFF7FEFF 		bl	WIZCHIP_WRITE
 2251              	.LVL218:
 728:ioLIB/socket.c ****    			addr[0] = head[0];
 2252              		.loc 1 728 7 view .LVU712
 2253              	.L208:
 728:ioLIB/socket.c ****    			addr[0] = head[0];
 2254              		.loc 1 728 26 discriminator 1 view .LVU713
 728:ioLIB/socket.c ****    			addr[0] = head[0];
 2255              		.loc 1 728 12 discriminator 1 view .LVU714
 728:ioLIB/socket.c ****    			addr[0] = head[0];
 2256              		.loc 1 728 13 is_stmt 0 discriminator 1 view .LVU715
 2257 0126 3046     		mov	r0, r6
 2258 0128 FFF7FEFF 		bl	WIZCHIP_READ
 2259              	.LVL219:
 728:ioLIB/socket.c ****    			addr[0] = head[0];
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 61


 2260              		.loc 1 728 12 discriminator 1 view .LVU716
 2261 012c 0028     		cmp	r0, #0
 2262 012e FAD1     		bne	.L208
 729:ioLIB/socket.c ****    			addr[1] = head[1];
 2263              		.loc 1 729 7 is_stmt 1 view .LVU717
 730:ioLIB/socket.c ****    			addr[2] = head[2];
 2264              		.loc 1 730 7 view .LVU718
 731:ioLIB/socket.c ****    			addr[3] = head[3];
 2265              		.loc 1 731 7 view .LVU719
 732:ioLIB/socket.c ****    			sock_remained_size[sn] = head[4];
 2266              		.loc 1 732 7 view .LVU720
 733:ioLIB/socket.c ****    			//M20150401 : For Typing Error
 2267              		.loc 1 733 36 is_stmt 0 view .LVU721
 2268 0130 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
 736:ioLIB/socket.c ****    			sock_pack_info[sn] = PACK_FIRST;
 2269              		.loc 1 736 68 view .LVU722
 2270 0134 9DF81540 		ldrb	r4, [sp, #21]	@ zero_extendqisi2
 737:ioLIB/socket.c ****          }
 2271              		.loc 1 737 26 view .LVU723
 2272 0138 434F     		ldr	r7, .L242
 736:ioLIB/socket.c ****    			sock_pack_info[sn] = PACK_FIRST;
 2273              		.loc 1 736 62 view .LVU724
 2274 013a 04EB0324 		add	r4, r4, r3, lsl #8
 729:ioLIB/socket.c ****    			addr[1] = head[1];
 2275              		.loc 1 729 15 view .LVU725
 2276 013e DDE90323 		ldrd	r2, r3, [sp, #12]
 736:ioLIB/socket.c ****    			sock_pack_info[sn] = PACK_FIRST;
 2277              		.loc 1 736 62 view .LVU726
 2278 0142 A4B2     		uxth	r4, r4
 729:ioLIB/socket.c ****    			addr[1] = head[1];
 2279              		.loc 1 729 15 view .LVU727
 2280 0144 1360     		str	r3, [r2]	@ unaligned
 733:ioLIB/socket.c ****    			//M20150401 : For Typing Error
 2281              		.loc 1 733 7 is_stmt 1 view .LVU728
 736:ioLIB/socket.c ****    			sock_pack_info[sn] = PACK_FIRST;
 2282              		.loc 1 736 7 view .LVU729
 737:ioLIB/socket.c ****          }
 2283              		.loc 1 737 7 view .LVU730
 737:ioLIB/socket.c ****          }
 2284              		.loc 1 737 26 is_stmt 0 view .LVU731
 2285 0146 8023     		movs	r3, #128
 736:ioLIB/socket.c ****    			sock_pack_info[sn] = PACK_FIRST;
 2286              		.loc 1 736 30 view .LVU732
 2287 0148 2BF81540 		strh	r4, [fp, r5, lsl #1]	@ movhi
 737:ioLIB/socket.c ****          }
 2288              		.loc 1 737 26 view .LVU733
 2289 014c 7B55     		strb	r3, [r7, r5]
 2290              	.L207:
 742:ioLIB/socket.c **** 			else pack_len = sock_remained_size[sn];
 2291              		.loc 1 742 4 is_stmt 1 view .LVU734
 2292 014e 029B     		ldr	r3, [sp, #8]
 2293 0150 A342     		cmp	r3, r4
 2294 0152 28BF     		it	cs
 2295 0154 2346     		movcs	r3, r4
 2296 0156 9CB2     		uxth	r4, r3
 2297              	.L235:
 2298              	.LVL220:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 62


 744:ioLIB/socket.c **** 			break;
 2299              		.loc 1 744 6 view .LVU735
 2300 0158 0199     		ldr	r1, [sp, #4]
 2301 015a 2246     		mov	r2, r4
 2302 015c 2846     		mov	r0, r5
 2303 015e FFF7FEFF 		bl	wiz_recv_data
 2304              	.LVL221:
 745:ioLIB/socket.c ****    //#endif
 2305              		.loc 1 745 4 view .LVU736
 772:ioLIB/socket.c **** }
 2306              		.loc 1 772 11 is_stmt 0 view .LVU737
 2307 0162 A046     		mov	r8, r4
 745:ioLIB/socket.c ****    //#endif
 2308              		.loc 1 745 4 view .LVU738
 2309 0164 A8E7     		b	.L201
 2310              	.LVL222:
 2311              	.L236:
 700:ioLIB/socket.c ****    			while(getSn_CR(sn));
 2312              		.loc 1 700 7 view .LVU739
 2313 0166 06F58076 		add	r6, r6, #256
 2314              	.L234:
 2315 016a 374F     		ldr	r7, .L242
 2316              	.L203:
 718:ioLIB/socket.c **** 			else pack_len = sock_remained_size[sn];
 2317              		.loc 1 718 4 is_stmt 1 view .LVU740
 2318 016c 029B     		ldr	r3, [sp, #8]
 2319 016e A342     		cmp	r3, r4
 2320 0170 28BF     		it	cs
 2321 0172 2346     		movcs	r3, r4
 2322 0174 1C46     		mov	r4, r3
 2323              	.LVL223:
 720:ioLIB/socket.c **** 		   break;
 2324              		.loc 1 720 4 view .LVU741
 2325 0176 EFE7     		b	.L235
 2326              	.LVL224:
 2327              	.L214:
 720:ioLIB/socket.c **** 		   break;
 2328              		.loc 1 720 4 is_stmt 0 view .LVU742
 2329 0178 334F     		ldr	r7, .L242
 700:ioLIB/socket.c ****    			while(getSn_CR(sn));
 2330              		.loc 1 700 7 view .LVU743
 2331 017a 06F58076 		add	r6, r6, #256
 2332 017e E6E7     		b	.L207
 2333              	.LVL225:
 2334              	.L238:
 634:ioLIB/socket.c ****          if(pack_len != 0) break;
 2335              		.loc 1 634 67 view .LVU744
 2336 0180 A046     		mov	r8, r4
 2337 0182 ADE7     		b	.L189
 2338              	.L196:
 697:ioLIB/socket.c **** 	      {
 2339              		.loc 1 697 29 view .LVU745
 2340 0184 3BF81540 		ldrh	r4, [fp, r5, lsl #1]
 2341              	.LVL226:
 697:ioLIB/socket.c **** 	      {
 2342              		.loc 1 697 8 is_stmt 1 view .LVU746
 697:ioLIB/socket.c **** 	      {
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 63


 2343              		.loc 1 697 10 is_stmt 0 view .LVU747
 2344 0188 002C     		cmp	r4, #0
 2345 018a ECD1     		bne	.L236
 699:ioLIB/socket.c ****    			setSn_CR(sn,Sn_CR_RECV);
 2346              		.loc 1 699 7 is_stmt 1 view .LVU748
 2347 018c 04A9     		add	r1, sp, #16
 2348 018e 2846     		mov	r0, r5
 700:ioLIB/socket.c ****    			while(getSn_CR(sn));
 2349              		.loc 1 700 7 is_stmt 0 view .LVU749
 2350 0190 06F58076 		add	r6, r6, #256
 699:ioLIB/socket.c ****    			setSn_CR(sn,Sn_CR_RECV);
 2351              		.loc 1 699 7 view .LVU750
 2352 0194 0222     		movs	r2, #2
 2353 0196 FFF7FEFF 		bl	wiz_recv_data
 2354              	.LVL227:
 700:ioLIB/socket.c ****    			while(getSn_CR(sn));
 2355              		.loc 1 700 7 is_stmt 1 view .LVU751
 2356 019a 4021     		movs	r1, #64
 2357 019c 3046     		mov	r0, r6
 2358 019e FFF7FEFF 		bl	WIZCHIP_WRITE
 2359              	.LVL228:
 701:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2360              		.loc 1 701 7 view .LVU752
 2361              	.L204:
 701:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2362              		.loc 1 701 26 discriminator 1 view .LVU753
 701:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2363              		.loc 1 701 12 discriminator 1 view .LVU754
 701:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2364              		.loc 1 701 13 is_stmt 0 discriminator 1 view .LVU755
 2365 01a2 3046     		mov	r0, r6
 2366 01a4 FFF7FEFF 		bl	WIZCHIP_READ
 2367              	.LVL229:
 701:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2368              		.loc 1 701 12 discriminator 1 view .LVU756
 2369 01a8 0028     		cmp	r0, #0
 2370 01aa FAD1     		bne	.L204
 703:ioLIB/socket.c ****    			sock_remained_size[sn] = (sock_remained_size[sn] <<8) + head[1] -2;
 2371              		.loc 1 703 8 is_stmt 1 view .LVU757
 704:ioLIB/socket.c ****    			#if _WIZCHIP_ == W5300
 2372              		.loc 1 704 7 view .LVU758
 704:ioLIB/socket.c ****    			#if _WIZCHIP_ == W5300
 2373              		.loc 1 704 67 is_stmt 0 view .LVU759
 2374 01ac 9DF81140 		ldrb	r4, [sp, #17]	@ zero_extendqisi2
 703:ioLIB/socket.c ****    			sock_remained_size[sn] = (sock_remained_size[sn] <<8) + head[1] -2;
 2375              		.loc 1 703 37 view .LVU760
 2376 01b0 9DF81030 		ldrb	r3, [sp, #16]	@ zero_extendqisi2
 704:ioLIB/socket.c ****    			#if _WIZCHIP_ == W5300
 2377              		.loc 1 704 71 view .LVU761
 2378 01b4 023C     		subs	r4, r4, #2
 2379 01b6 04EB0324 		add	r4, r4, r3, lsl #8
 2380 01ba A4B2     		uxth	r4, r4
 711:ioLIB/socket.c ****    			{
 2381              		.loc 1 711 9 view .LVU762
 2382 01bc 40F2EA53 		movw	r3, #1514
 2383 01c0 9C42     		cmp	r4, r3
 704:ioLIB/socket.c ****    			#if _WIZCHIP_ == W5300
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 64


 2384              		.loc 1 704 30 view .LVU763
 2385 01c2 2BF81540 		strh	r4, [fp, r5, lsl #1]	@ movhi
 711:ioLIB/socket.c ****    			{
 2386              		.loc 1 711 7 is_stmt 1 view .LVU764
 711:ioLIB/socket.c ****    			{
 2387              		.loc 1 711 9 is_stmt 0 view .LVU765
 2388 01c6 38D8     		bhi	.L241
 716:ioLIB/socket.c ****    	   }
 2389              		.loc 1 716 7 is_stmt 1 view .LVU766
 716:ioLIB/socket.c ****    	   }
 2390              		.loc 1 716 26 is_stmt 0 view .LVU767
 2391 01c8 1F4F     		ldr	r7, .L242
 2392 01ca 8023     		movs	r3, #128
 2393 01cc 7B55     		strb	r3, [r7, r5]
 2394 01ce CDE7     		b	.L203
 2395              	.LVL230:
 2396              	.L239:
 643:ioLIB/socket.c **** 	      {
 2397              		.loc 1 643 8 is_stmt 1 view .LVU768
 643:ioLIB/socket.c **** 	      {
 2398              		.loc 1 643 29 is_stmt 0 view .LVU769
 2399 01d0 3BF81540 		ldrh	r4, [fp, r5, lsl #1]
 2400              	.LVL231:
 646:ioLIB/socket.c ****    			while(getSn_CR(sn));
 2401              		.loc 1 646 7 view .LVU770
 2402 01d4 06F58076 		add	r6, r6, #256
 643:ioLIB/socket.c **** 	      {
 2403              		.loc 1 643 10 view .LVU771
 2404 01d8 002C     		cmp	r4, #0
 2405 01da C6D1     		bne	.L234
 645:ioLIB/socket.c ****    			setSn_CR(sn,Sn_CR_RECV);
 2406              		.loc 1 645 7 is_stmt 1 view .LVU772
 2407 01dc 04A9     		add	r1, sp, #16
 2408 01de 2846     		mov	r0, r5
 2409 01e0 0822     		movs	r2, #8
 2410 01e2 FFF7FEFF 		bl	wiz_recv_data
 2411              	.LVL232:
 646:ioLIB/socket.c ****    			while(getSn_CR(sn));
 2412              		.loc 1 646 7 view .LVU773
 2413 01e6 4021     		movs	r1, #64
 2414 01e8 3046     		mov	r0, r6
 2415 01ea FFF7FEFF 		bl	WIZCHIP_WRITE
 2416              	.LVL233:
 647:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2417              		.loc 1 647 7 view .LVU774
 2418              	.L200:
 647:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2419              		.loc 1 647 26 discriminator 1 view .LVU775
 647:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2420              		.loc 1 647 12 discriminator 1 view .LVU776
 647:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2421              		.loc 1 647 13 is_stmt 0 discriminator 1 view .LVU777
 2422 01ee 3046     		mov	r0, r6
 2423 01f0 FFF7FEFF 		bl	WIZCHIP_READ
 2424              	.LVL234:
 647:ioLIB/socket.c ****    			// read peer's IP address, port number & packet length
 2425              		.loc 1 647 12 discriminator 1 view .LVU778
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 65


 2426 01f4 0028     		cmp	r0, #0
 2427 01f6 FAD1     		bne	.L200
 665:ioLIB/socket.c ****       			addr[1] = head[1];
 2428              		.loc 1 665 16 is_stmt 1 view .LVU779
 666:ioLIB/socket.c ****       			addr[2] = head[2];
 2429              		.loc 1 666 10 view .LVU780
 667:ioLIB/socket.c ****       			addr[3] = head[3];
 2430              		.loc 1 667 10 view .LVU781
 668:ioLIB/socket.c ****       			*port = head[4];
 2431              		.loc 1 668 10 view .LVU782
 671:ioLIB/socket.c ****       			sock_remained_size[sn] = (sock_remained_size[sn] << 8) + head[7];
 2432              		.loc 1 671 39 is_stmt 0 view .LVU783
 2433 01f8 9DF81630 		ldrb	r3, [sp, #22]	@ zero_extendqisi2
 672:ioLIB/socket.c ****          #if _WIZCHIP_ == 5300
 2434              		.loc 1 672 71 view .LVU784
 2435 01fc 9DF81740 		ldrb	r4, [sp, #23]	@ zero_extendqisi2
 669:ioLIB/socket.c ****       			*port = (*port << 8) + head[5];
 2436              		.loc 1 669 22 view .LVU785
 2437 0200 9DF81420 		ldrb	r2, [sp, #20]	@ zero_extendqisi2
 676:ioLIB/socket.c ****    	   }
 2438              		.loc 1 676 26 view .LVU786
 2439 0204 104F     		ldr	r7, .L242
 672:ioLIB/socket.c ****          #if _WIZCHIP_ == 5300
 2440              		.loc 1 672 65 view .LVU787
 2441 0206 04EB0324 		add	r4, r4, r3, lsl #8
 670:ioLIB/socket.c ****       			sock_remained_size[sn] = head[6];
 2442              		.loc 1 670 37 view .LVU788
 2443 020a 9DF81530 		ldrb	r3, [sp, #21]	@ zero_extendqisi2
 670:ioLIB/socket.c ****       			sock_remained_size[sn] = head[6];
 2444              		.loc 1 670 31 view .LVU789
 2445 020e 03EB0223 		add	r3, r3, r2, lsl #8
 665:ioLIB/socket.c ****       			addr[1] = head[1];
 2446              		.loc 1 665 24 view .LVU790
 2447 0212 DDE90312 		ldrd	r1, r2, [sp, #12]
 2448 0216 0A60     		str	r2, [r1]	@ unaligned
 669:ioLIB/socket.c ****       			*port = (*port << 8) + head[5];
 2449              		.loc 1 669 10 is_stmt 1 view .LVU791
 670:ioLIB/socket.c ****       			sock_remained_size[sn] = head[6];
 2450              		.loc 1 670 10 view .LVU792
 670:ioLIB/socket.c ****       			sock_remained_size[sn] = head[6];
 2451              		.loc 1 670 16 is_stmt 0 view .LVU793
 2452 0218 109A     		ldr	r2, [sp, #64]
 672:ioLIB/socket.c ****          #if _WIZCHIP_ == 5300
 2453              		.loc 1 672 65 view .LVU794
 2454 021a A4B2     		uxth	r4, r4
 670:ioLIB/socket.c ****       			sock_remained_size[sn] = head[6];
 2455              		.loc 1 670 16 view .LVU795
 2456 021c 1380     		strh	r3, [r2]	@ movhi
 671:ioLIB/socket.c ****       			sock_remained_size[sn] = (sock_remained_size[sn] << 8) + head[7];
 2457              		.loc 1 671 10 is_stmt 1 view .LVU796
 672:ioLIB/socket.c ****          #if _WIZCHIP_ == 5300
 2458              		.loc 1 672 10 view .LVU797
 676:ioLIB/socket.c ****    	   }
 2459              		.loc 1 676 7 view .LVU798
 676:ioLIB/socket.c ****    	   }
 2460              		.loc 1 676 26 is_stmt 0 view .LVU799
 2461 021e 8023     		movs	r3, #128
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 66


 672:ioLIB/socket.c ****          #if _WIZCHIP_ == 5300
 2462              		.loc 1 672 33 view .LVU800
 2463 0220 2BF81540 		strh	r4, [fp, r5, lsl #1]	@ movhi
 676:ioLIB/socket.c ****    	   }
 2464              		.loc 1 676 26 view .LVU801
 2465 0224 7B55     		strb	r3, [r7, r5]
 2466 0226 A1E7     		b	.L203
 2467              	.LVL235:
 2468              	.L215:
 607:ioLIB/socket.c ****    //CHECK_SOCKMODE(Sn_MR_UDP);
 2469              		.loc 1 607 4 view .LVU802
 2470 0228 4FF0FF38 		mov	r8, #-1
 2471 022c 58E7     		b	.L189
 2472              	.LVL236:
 2473              	.L216:
 625:ioLIB/socket.c ****    }
 2474              		.loc 1 625 17 view .LVU803
 2475 022e 6FF00408 		mvn	r8, #4
 2476 0232 55E7     		b	.L189
 2477              	.L217:
 627:ioLIB/socket.c ****    if(sock_remained_size[sn] == 0)
 2478              		.loc 1 627 4 view .LVU804
 2479 0234 6FF00D08 		mvn	r8, #13
 2480 0238 52E7     		b	.L189
 2481              	.LVL237:
 2482              	.L241:
 713:ioLIB/socket.c ****    			   return SOCKFATAL_PACKLEN;
 2483              		.loc 1 713 10 is_stmt 1 view .LVU805
 2484              	.LBB34:
 2485              	.LBI34:
 198:ioLIB/socket.c **** {
 2486              		.loc 1 198 8 view .LVU806
 2487              	.LBB35:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 2488              		.loc 1 200 2 view .LVU807
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 2489              		.loc 1 200 2 view .LVU808
 2490 023a 2846     		mov	r0, r5
 2491 023c FFF7FEFF 		bl	close.part.0
 2492              	.LVL238:
 200:ioLIB/socket.c **** //A20160426 : Applied the erratum 1 of W5300
 2493              		.loc 1 200 2 is_stmt 0 view .LVU809
 2494              	.LBE35:
 2495              	.LBE34:
 714:ioLIB/socket.c ****    			}
 2496              		.loc 1 714 10 is_stmt 1 view .LVU810
 714:ioLIB/socket.c ****    			}
 2497              		.loc 1 714 17 is_stmt 0 view .LVU811
 2498 0240 6FF47A78 		mvn	r8, #1000
 2499 0244 4CE7     		b	.L189
 2500              	.L243:
 2501 0246 00BF     		.align	2
 2502              	.L242:
 2503 0248 00000000 		.word	.LANCHOR3
 2504 024c 00000000 		.word	.LANCHOR2
 2505 0250 00000000 		.word	.LANCHOR0
 2506              		.cfi_endproc
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 67


 2507              	.LFE8:
 2509              		.section	.text.ctlsocket,"ax",%progbits
 2510              		.align	1
 2511              		.p2align 2,,3
 2512              		.global	ctlsocket
 2513              		.syntax unified
 2514              		.thumb
 2515              		.thumb_func
 2517              	ctlsocket:
 2518              	.LVL239:
 2519              	.LFB9:
 774:ioLIB/socket.c **** 
 775:ioLIB/socket.c **** 
 776:ioLIB/socket.c **** int8_t  ctlsocket(uint8_t sn, ctlsock_type cstype, void* arg)
 777:ioLIB/socket.c **** {
 2520              		.loc 1 777 1 is_stmt 1 view -0
 2521              		.cfi_startproc
 2522              		@ args = 0, pretend = 0, frame = 0
 2523              		@ frame_needed = 0, uses_anonymous_args = 0
 778:ioLIB/socket.c ****    uint8_t tmp = 0;
 2524              		.loc 1 778 4 view .LVU813
 779:ioLIB/socket.c ****    CHECK_SOCKNUM();
 2525              		.loc 1 779 4 view .LVU814
 2526              		.loc 1 779 4 view .LVU815
 2527 0000 0828     		cmp	r0, #8
 2528 0002 73D8     		bhi	.L256
 777:ioLIB/socket.c ****    uint8_t tmp = 0;
 2529              		.loc 1 777 1 is_stmt 0 view .LVU816
 2530 0004 38B5     		push	{r3, r4, r5, lr}
 2531              	.LCFI39:
 2532              		.cfi_def_cfa_offset 16
 2533              		.cfi_offset 3, -16
 2534              		.cfi_offset 4, -12
 2535              		.cfi_offset 5, -8
 2536              		.cfi_offset 14, -4
 2537 0006 0346     		mov	r3, r0
 2538 0008 1546     		mov	r5, r2
 2539              		.loc 1 779 4 is_stmt 1 view .LVU817
 2540              		.loc 1 779 19 view .LVU818
 780:ioLIB/socket.c ****    switch(cstype)
 2541              		.loc 1 780 4 view .LVU819
 2542 000a 0729     		cmp	r1, #7
 2543 000c 71D8     		bhi	.L260
 2544 000e DFE801F0 		tbb	[pc, r1]
 2545              	.LVL240:
 2546              	.L247:
 2547 0012 11       		.byte	(.L254-.L247)/2
 2548 0013 52       		.byte	(.L253-.L247)/2
 2549 0014 5A       		.byte	(.L252-.L247)/2
 2550 0015 1F       		.byte	(.L251-.L247)/2
 2551 0016 2B       		.byte	(.L250-.L247)/2
 2552 0017 38       		.byte	(.L249-.L247)/2
 2553 0018 45       		.byte	(.L248-.L247)/2
 2554 0019 04       		.byte	(.L246-.L247)/2
 2555              		.p2align 1
 2556              	.L246:
 781:ioLIB/socket.c ****    {
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 68


 782:ioLIB/socket.c ****       case CS_SET_IOMODE:
 783:ioLIB/socket.c ****          tmp = *((uint8_t*)arg);
 784:ioLIB/socket.c ****          if(tmp == SOCK_IO_NONBLOCK)  sock_io_mode |= (1<<sn);
 785:ioLIB/socket.c ****          else if(tmp == SOCK_IO_BLOCK) sock_io_mode &= ~(1<<sn);
 786:ioLIB/socket.c ****          else return SOCKERR_ARG;
 787:ioLIB/socket.c ****          break;
 788:ioLIB/socket.c ****       case CS_GET_IOMODE:   
 789:ioLIB/socket.c ****          //M20140501 : implict type casting -> explict type casting
 790:ioLIB/socket.c ****          //*((uint8_t*)arg) = (sock_io_mode >> sn) & 0x0001;
 791:ioLIB/socket.c ****          *((uint8_t*)arg) = (uint8_t)((sock_io_mode >> sn) & 0x0001);
 792:ioLIB/socket.c ****          //
 793:ioLIB/socket.c ****          break;
 794:ioLIB/socket.c ****       case CS_GET_MAXTXBUF:
 795:ioLIB/socket.c ****          *((uint16_t*)arg) = getSn_TxMAX(sn);
 796:ioLIB/socket.c ****          break;
 797:ioLIB/socket.c ****       case CS_GET_MAXRXBUF:    
 798:ioLIB/socket.c ****          *((uint16_t*)arg) = getSn_RxMAX(sn);
 799:ioLIB/socket.c ****          break;
 800:ioLIB/socket.c ****       case CS_CLR_INTERRUPT:
 801:ioLIB/socket.c ****          if( (*(uint8_t*)arg) > SIK_ALL) return SOCKERR_ARG;
 802:ioLIB/socket.c ****          setSn_IR(sn,*(uint8_t*)arg);
 803:ioLIB/socket.c ****          break;
 804:ioLIB/socket.c ****       case CS_GET_INTERRUPT:
 805:ioLIB/socket.c ****          *((uint8_t*)arg) = getSn_IR(sn);
 806:ioLIB/socket.c ****          break;
 807:ioLIB/socket.c ****    #if _WIZCHIP_ != 5100
 808:ioLIB/socket.c ****       case CS_SET_INTMASK:  
 809:ioLIB/socket.c ****          if( (*(uint8_t*)arg) > SIK_ALL) return SOCKERR_ARG;
 810:ioLIB/socket.c ****          setSn_IMR(sn,*(uint8_t*)arg);
 811:ioLIB/socket.c ****          break;
 812:ioLIB/socket.c ****       case CS_GET_INTMASK:   
 813:ioLIB/socket.c ****          *((uint8_t*)arg) = getSn_IMR(sn);
 2557              		.loc 1 813 10 view .LVU820
 2558              		.loc 1 813 29 is_stmt 0 view .LVU821
 2559 001a 0124     		movs	r4, #1
 2560 001c 04EB8000 		add	r0, r4, r0, lsl #2
 2561              	.LVL241:
 2562              		.loc 1 813 29 view .LVU822
 2563 0020 C000     		lsls	r0, r0, #3
 2564 0022 00F53050 		add	r0, r0, #11264
 2565 0026 FFF7FEFF 		bl	WIZCHIP_READ
 2566              	.LVL242:
 2567              		.loc 1 813 29 view .LVU823
 2568 002a 00F01F00 		and	r0, r0, #31
 2569              		.loc 1 813 27 view .LVU824
 2570 002e 2870     		strb	r0, [r5]
 814:ioLIB/socket.c ****          break;
 2571              		.loc 1 814 10 is_stmt 1 view .LVU825
 815:ioLIB/socket.c ****    #endif
 816:ioLIB/socket.c ****       default:
 817:ioLIB/socket.c ****          return SOCKERR_ARG;
 818:ioLIB/socket.c ****    }
 819:ioLIB/socket.c ****    return SOCK_OK;
 2572              		.loc 1 819 11 is_stmt 0 view .LVU826
 2573 0030 2046     		mov	r0, r4
 820:ioLIB/socket.c **** }
 2574              		.loc 1 820 1 view .LVU827
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 69


 2575 0032 38BD     		pop	{r3, r4, r5, pc}
 2576              	.LVL243:
 2577              	.L254:
 783:ioLIB/socket.c ****          if(tmp == SOCK_IO_NONBLOCK)  sock_io_mode |= (1<<sn);
 2578              		.loc 1 783 10 is_stmt 1 view .LVU828
 783:ioLIB/socket.c ****          if(tmp == SOCK_IO_NONBLOCK)  sock_io_mode |= (1<<sn);
 2579              		.loc 1 783 14 is_stmt 0 view .LVU829
 2580 0034 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 2581              	.LVL244:
 784:ioLIB/socket.c ****          else if(tmp == SOCK_IO_BLOCK) sock_io_mode &= ~(1<<sn);
 2582              		.loc 1 784 10 is_stmt 1 view .LVU830
 784:ioLIB/socket.c ****          else if(tmp == SOCK_IO_BLOCK) sock_io_mode &= ~(1<<sn);
 2583              		.loc 1 784 12 is_stmt 0 view .LVU831
 2584 0036 0128     		cmp	r0, #1
 2585 0038 51D0     		beq	.L265
 785:ioLIB/socket.c ****          else return SOCKERR_ARG;
 2586              		.loc 1 785 15 is_stmt 1 view .LVU832
 785:ioLIB/socket.c ****          else return SOCKERR_ARG;
 2587              		.loc 1 785 17 is_stmt 0 view .LVU833
 2588 003a 0028     		cmp	r0, #0
 2589 003c 59D1     		bne	.L260
 785:ioLIB/socket.c ****          else return SOCKERR_ARG;
 2590              		.loc 1 785 40 is_stmt 1 discriminator 1 view .LVU834
 785:ioLIB/socket.c ****          else return SOCKERR_ARG;
 2591              		.loc 1 785 53 is_stmt 0 discriminator 1 view .LVU835
 2592 003e 2E49     		ldr	r1, .L266
 2593              	.LVL245:
 785:ioLIB/socket.c ****          else return SOCKERR_ARG;
 2594              		.loc 1 785 59 discriminator 1 view .LVU836
 2595 0040 0120     		movs	r0, #1
 2596              	.LVL246:
 785:ioLIB/socket.c ****          else return SOCKERR_ARG;
 2597              		.loc 1 785 53 discriminator 1 view .LVU837
 2598 0042 0A88     		ldrh	r2, [r1]
 785:ioLIB/socket.c ****          else return SOCKERR_ARG;
 2599              		.loc 1 785 59 discriminator 1 view .LVU838
 2600 0044 00FA03F3 		lsl	r3, r0, r3
 785:ioLIB/socket.c ****          else return SOCKERR_ARG;
 2601              		.loc 1 785 53 discriminator 1 view .LVU839
 2602 0048 22EA0303 		bic	r3, r2, r3
 2603 004c 0B80     		strh	r3, [r1]	@ movhi
 2604              		.loc 1 820 1 discriminator 1 view .LVU840
 2605 004e 38BD     		pop	{r3, r4, r5, pc}
 2606              	.LVL247:
 2607              	.L251:
 798:ioLIB/socket.c ****          break;
 2608              		.loc 1 798 10 is_stmt 1 view .LVU841
 798:ioLIB/socket.c ****          break;
 2609              		.loc 1 798 30 is_stmt 0 view .LVU842
 2610 0050 0124     		movs	r4, #1
 2611 0052 04EB8000 		add	r0, r4, r0, lsl #2
 2612              	.LVL248:
 798:ioLIB/socket.c ****          break;
 2613              		.loc 1 798 30 view .LVU843
 2614 0056 C000     		lsls	r0, r0, #3
 2615 0058 00F5F050 		add	r0, r0, #7680
 2616 005c FFF7FEFF 		bl	WIZCHIP_READ
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 70


 2617              	.LVL249:
 798:ioLIB/socket.c ****          break;
 2618              		.loc 1 798 30 view .LVU844
 2619 0060 8002     		lsls	r0, r0, #10
 798:ioLIB/socket.c ****          break;
 2620              		.loc 1 798 28 view .LVU845
 2621 0062 2880     		strh	r0, [r5]	@ movhi
 799:ioLIB/socket.c ****       case CS_CLR_INTERRUPT:
 2622              		.loc 1 799 10 is_stmt 1 view .LVU846
 819:ioLIB/socket.c **** }
 2623              		.loc 1 819 11 is_stmt 0 view .LVU847
 2624 0064 2046     		mov	r0, r4
 2625              		.loc 1 820 1 view .LVU848
 2626 0066 38BD     		pop	{r3, r4, r5, pc}
 2627              	.LVL250:
 2628              	.L250:
 801:ioLIB/socket.c ****          setSn_IR(sn,*(uint8_t*)arg);
 2629              		.loc 1 801 10 is_stmt 1 view .LVU849
 801:ioLIB/socket.c ****          setSn_IR(sn,*(uint8_t*)arg);
 2630              		.loc 1 801 15 is_stmt 0 view .LVU850
 2631 0068 2978     		ldrb	r1, [r5]	@ zero_extendqisi2
 2632              	.LVL251:
 801:ioLIB/socket.c ****          setSn_IR(sn,*(uint8_t*)arg);
 2633              		.loc 1 801 12 view .LVU851
 2634 006a 1F29     		cmp	r1, #31
 2635 006c 41D8     		bhi	.L260
 802:ioLIB/socket.c ****          break;
 2636              		.loc 1 802 10 is_stmt 1 view .LVU852
 2637 006e 0124     		movs	r4, #1
 2638 0070 04EB8000 		add	r0, r4, r0, lsl #2
 2639              	.LVL252:
 802:ioLIB/socket.c ****          break;
 2640              		.loc 1 802 10 is_stmt 0 view .LVU853
 2641 0074 C000     		lsls	r0, r0, #3
 2642 0076 00F50070 		add	r0, r0, #512
 2643 007a FFF7FEFF 		bl	WIZCHIP_WRITE
 2644              	.LVL253:
 803:ioLIB/socket.c ****       case CS_GET_INTERRUPT:
 2645              		.loc 1 803 10 is_stmt 1 view .LVU854
 819:ioLIB/socket.c **** }
 2646              		.loc 1 819 11 is_stmt 0 view .LVU855
 2647 007e 2046     		mov	r0, r4
 2648              		.loc 1 820 1 view .LVU856
 2649 0080 38BD     		pop	{r3, r4, r5, pc}
 2650              	.LVL254:
 2651              	.L249:
 805:ioLIB/socket.c ****          break;
 2652              		.loc 1 805 10 is_stmt 1 view .LVU857
 805:ioLIB/socket.c ****          break;
 2653              		.loc 1 805 29 is_stmt 0 view .LVU858
 2654 0082 0124     		movs	r4, #1
 2655 0084 04EB8000 		add	r0, r4, r0, lsl #2
 2656              	.LVL255:
 805:ioLIB/socket.c ****          break;
 2657              		.loc 1 805 29 view .LVU859
 2658 0088 C000     		lsls	r0, r0, #3
 2659 008a 00F50070 		add	r0, r0, #512
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 71


 2660 008e FFF7FEFF 		bl	WIZCHIP_READ
 2661              	.LVL256:
 805:ioLIB/socket.c ****          break;
 2662              		.loc 1 805 29 view .LVU860
 2663 0092 00F01F00 		and	r0, r0, #31
 805:ioLIB/socket.c ****          break;
 2664              		.loc 1 805 27 view .LVU861
 2665 0096 2870     		strb	r0, [r5]
 806:ioLIB/socket.c ****    #if _WIZCHIP_ != 5100
 2666              		.loc 1 806 10 is_stmt 1 view .LVU862
 819:ioLIB/socket.c **** }
 2667              		.loc 1 819 11 is_stmt 0 view .LVU863
 2668 0098 2046     		mov	r0, r4
 2669              		.loc 1 820 1 view .LVU864
 2670 009a 38BD     		pop	{r3, r4, r5, pc}
 2671              	.LVL257:
 2672              	.L248:
 809:ioLIB/socket.c ****          setSn_IMR(sn,*(uint8_t*)arg);
 2673              		.loc 1 809 10 is_stmt 1 view .LVU865
 809:ioLIB/socket.c ****          setSn_IMR(sn,*(uint8_t*)arg);
 2674              		.loc 1 809 15 is_stmt 0 view .LVU866
 2675 009c 2978     		ldrb	r1, [r5]	@ zero_extendqisi2
 2676              	.LVL258:
 809:ioLIB/socket.c ****          setSn_IMR(sn,*(uint8_t*)arg);
 2677              		.loc 1 809 12 view .LVU867
 2678 009e 1F29     		cmp	r1, #31
 2679 00a0 27D8     		bhi	.L260
 810:ioLIB/socket.c ****          break;
 2680              		.loc 1 810 10 is_stmt 1 view .LVU868
 2681 00a2 0124     		movs	r4, #1
 2682 00a4 04EB8000 		add	r0, r4, r0, lsl #2
 2683              	.LVL259:
 810:ioLIB/socket.c ****          break;
 2684              		.loc 1 810 10 is_stmt 0 view .LVU869
 2685 00a8 C000     		lsls	r0, r0, #3
 2686 00aa 00F53050 		add	r0, r0, #11264
 2687 00ae FFF7FEFF 		bl	WIZCHIP_WRITE
 2688              	.LVL260:
 811:ioLIB/socket.c ****       case CS_GET_INTMASK:   
 2689              		.loc 1 811 10 is_stmt 1 view .LVU870
 819:ioLIB/socket.c **** }
 2690              		.loc 1 819 11 is_stmt 0 view .LVU871
 2691 00b2 2046     		mov	r0, r4
 2692              		.loc 1 820 1 view .LVU872
 2693 00b4 38BD     		pop	{r3, r4, r5, pc}
 2694              	.LVL261:
 2695              	.L253:
 791:ioLIB/socket.c ****          //
 2696              		.loc 1 791 10 is_stmt 1 view .LVU873
 791:ioLIB/socket.c ****          //
 2697              		.loc 1 791 53 is_stmt 0 view .LVU874
 2698 00b6 104A     		ldr	r2, .L266
 2699 00b8 1288     		ldrh	r2, [r2]
 819:ioLIB/socket.c **** }
 2700              		.loc 1 819 11 view .LVU875
 2701 00ba 0120     		movs	r0, #1
 2702              	.LVL262:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 72


 791:ioLIB/socket.c ****          //
 2703              		.loc 1 791 53 view .LVU876
 2704 00bc 42FA03F3 		asr	r3, r2, r3
 791:ioLIB/socket.c ****          //
 2705              		.loc 1 791 29 view .LVU877
 2706 00c0 0340     		ands	r3, r3, r0
 791:ioLIB/socket.c ****          //
 2707              		.loc 1 791 27 view .LVU878
 2708 00c2 2B70     		strb	r3, [r5]
 793:ioLIB/socket.c ****       case CS_GET_MAXTXBUF:
 2709              		.loc 1 793 10 is_stmt 1 view .LVU879
 2710              		.loc 1 820 1 is_stmt 0 view .LVU880
 2711 00c4 38BD     		pop	{r3, r4, r5, pc}
 2712              	.LVL263:
 2713              	.L252:
 795:ioLIB/socket.c ****          break;
 2714              		.loc 1 795 10 is_stmt 1 view .LVU881
 795:ioLIB/socket.c ****          break;
 2715              		.loc 1 795 30 is_stmt 0 view .LVU882
 2716 00c6 0124     		movs	r4, #1
 2717 00c8 04EB8000 		add	r0, r4, r0, lsl #2
 2718              	.LVL264:
 795:ioLIB/socket.c ****          break;
 2719              		.loc 1 795 30 view .LVU883
 2720 00cc C000     		lsls	r0, r0, #3
 2721 00ce 00F5F850 		add	r0, r0, #7936
 2722 00d2 FFF7FEFF 		bl	WIZCHIP_READ
 2723              	.LVL265:
 795:ioLIB/socket.c ****          break;
 2724              		.loc 1 795 30 view .LVU884
 2725 00d6 8002     		lsls	r0, r0, #10
 795:ioLIB/socket.c ****          break;
 2726              		.loc 1 795 28 view .LVU885
 2727 00d8 2880     		strh	r0, [r5]	@ movhi
 796:ioLIB/socket.c ****       case CS_GET_MAXRXBUF:    
 2728              		.loc 1 796 10 is_stmt 1 view .LVU886
 819:ioLIB/socket.c **** }
 2729              		.loc 1 819 11 is_stmt 0 view .LVU887
 2730 00da 2046     		mov	r0, r4
 2731              		.loc 1 820 1 view .LVU888
 2732 00dc 38BD     		pop	{r3, r4, r5, pc}
 2733              	.LVL266:
 2734              	.L265:
 784:ioLIB/socket.c ****          else if(tmp == SOCK_IO_BLOCK) sock_io_mode &= ~(1<<sn);
 2735              		.loc 1 784 39 is_stmt 1 discriminator 1 view .LVU889
 784:ioLIB/socket.c ****          else if(tmp == SOCK_IO_BLOCK) sock_io_mode &= ~(1<<sn);
 2736              		.loc 1 784 52 is_stmt 0 discriminator 1 view .LVU890
 2737 00de 064A     		ldr	r2, .L266
 2738 00e0 1188     		ldrh	r1, [r2]
 2739              	.LVL267:
 784:ioLIB/socket.c ****          else if(tmp == SOCK_IO_BLOCK) sock_io_mode &= ~(1<<sn);
 2740              		.loc 1 784 57 discriminator 1 view .LVU891
 2741 00e2 00FA03F3 		lsl	r3, r0, r3
 784:ioLIB/socket.c ****          else if(tmp == SOCK_IO_BLOCK) sock_io_mode &= ~(1<<sn);
 2742              		.loc 1 784 52 discriminator 1 view .LVU892
 2743 00e6 0B43     		orrs	r3, r3, r1
 2744 00e8 1380     		strh	r3, [r2]	@ movhi
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 73


 2745              		.loc 1 820 1 discriminator 1 view .LVU893
 2746 00ea 38BD     		pop	{r3, r4, r5, pc}
 2747              	.LVL268:
 2748              	.L256:
 2749              	.LCFI40:
 2750              		.cfi_def_cfa_offset 0
 2751              		.cfi_restore 3
 2752              		.cfi_restore 4
 2753              		.cfi_restore 5
 2754              		.cfi_restore 14
 779:ioLIB/socket.c ****    switch(cstype)
 2755              		.loc 1 779 4 view .LVU894
 2756 00ec 4FF0FF30 		mov	r0, #-1
 2757              	.LVL269:
 2758              		.loc 1 820 1 view .LVU895
 2759 00f0 7047     		bx	lr
 2760              	.LVL270:
 2761              	.L260:
 2762              	.LCFI41:
 2763              		.cfi_def_cfa_offset 16
 2764              		.cfi_offset 3, -16
 2765              		.cfi_offset 4, -12
 2766              		.cfi_offset 5, -8
 2767              		.cfi_offset 14, -4
 786:ioLIB/socket.c ****          break;
 2768              		.loc 1 786 22 view .LVU896
 2769 00f2 6FF00900 		mvn	r0, #9
 2770              		.loc 1 820 1 view .LVU897
 2771 00f6 38BD     		pop	{r3, r4, r5, pc}
 2772              	.LVL271:
 2773              	.L267:
 2774              		.loc 1 820 1 view .LVU898
 2775              		.align	2
 2776              	.L266:
 2777 00f8 00000000 		.word	.LANCHOR0
 2778              		.cfi_endproc
 2779              	.LFE9:
 2781              		.section	.text.setsockopt,"ax",%progbits
 2782              		.align	1
 2783              		.p2align 2,,3
 2784              		.global	setsockopt
 2785              		.syntax unified
 2786              		.thumb
 2787              		.thumb_func
 2789              	setsockopt:
 2790              	.LVL272:
 2791              	.LFB10:
 821:ioLIB/socket.c **** 
 822:ioLIB/socket.c **** int8_t  setsockopt(uint8_t sn, sockopt_type sotype, void* arg)
 823:ioLIB/socket.c **** {
 2792              		.loc 1 823 1 is_stmt 1 view -0
 2793              		.cfi_startproc
 2794              		@ args = 0, pretend = 0, frame = 0
 2795              		@ frame_needed = 0, uses_anonymous_args = 0
 824:ioLIB/socket.c ****  // M20131220 : Remove warning
 825:ioLIB/socket.c ****  //uint8_t tmp;
 826:ioLIB/socket.c ****    CHECK_SOCKNUM();
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 74


 2796              		.loc 1 826 4 view .LVU900
 2797              		.loc 1 826 4 view .LVU901
 2798 0000 0828     		cmp	r0, #8
 2799 0002 00F28C80 		bhi	.L282
 827:ioLIB/socket.c ****    switch(sotype)
 2800              		.loc 1 827 4 is_stmt 0 view .LVU902
 2801 0006 0139     		subs	r1, r1, #1
 2802              	.LVL273:
 823:ioLIB/socket.c ****  // M20131220 : Remove warning
 2803              		.loc 1 823 1 view .LVU903
 2804 0008 70B5     		push	{r4, r5, r6, lr}
 2805              	.LCFI42:
 2806              		.cfi_def_cfa_offset 16
 2807              		.cfi_offset 4, -16
 2808              		.cfi_offset 5, -12
 2809              		.cfi_offset 6, -8
 2810              		.cfi_offset 14, -4
 2811 000a 1546     		mov	r5, r2
 826:ioLIB/socket.c ****    switch(sotype)
 2812              		.loc 1 826 4 is_stmt 1 view .LVU904
 826:ioLIB/socket.c ****    switch(sotype)
 2813              		.loc 1 826 19 view .LVU905
 2814              		.loc 1 827 4 view .LVU906
 2815 000c 0629     		cmp	r1, #6
 2816 000e 00F28F80 		bhi	.L283
 2817 0012 DFE801F0 		tbb	[pc, r1]
 2818              	.L271:
 2819 0016 15       		.byte	(.L277-.L271)/2
 2820 0017 72       		.byte	(.L276-.L271)/2
 2821 0018 20       		.byte	(.L275-.L271)/2
 2822 0019 31       		.byte	(.L274-.L271)/2
 2823 001a 3D       		.byte	(.L273-.L271)/2
 2824 001b 4E       		.byte	(.L272-.L271)/2
 2825 001c 04       		.byte	(.L270-.L271)/2
 2826 001d 00       		.p2align 1
 2827              	.L270:
 828:ioLIB/socket.c ****    {
 829:ioLIB/socket.c ****       case SO_TTL:
 830:ioLIB/socket.c ****          setSn_TTL(sn,*(uint8_t*)arg);
 831:ioLIB/socket.c ****          break;
 832:ioLIB/socket.c ****       case SO_TOS:
 833:ioLIB/socket.c ****          setSn_TOS(sn,*(uint8_t*)arg);
 834:ioLIB/socket.c ****          break;
 835:ioLIB/socket.c ****       case SO_MSS:
 836:ioLIB/socket.c ****          setSn_MSSR(sn,*(uint16_t*)arg);
 837:ioLIB/socket.c ****          break;
 838:ioLIB/socket.c ****       case SO_DESTIP:
 839:ioLIB/socket.c ****          setSn_DIPR(sn, (uint8_t*)arg);
 840:ioLIB/socket.c ****          break;
 841:ioLIB/socket.c ****       case SO_DESTPORT:
 842:ioLIB/socket.c ****          setSn_DPORT(sn, *(uint16_t*)arg);
 843:ioLIB/socket.c ****          break;
 844:ioLIB/socket.c **** #if _WIZCHIP_ != 5100
 845:ioLIB/socket.c ****       case SO_KEEPALIVESEND:
 846:ioLIB/socket.c ****          CHECK_SOCKMODE(Sn_MR_TCP);
 847:ioLIB/socket.c ****          #if _WIZCHIP_ > 5200
 848:ioLIB/socket.c ****             if(getSn_KPALVTR(sn) != 0) return SOCKERR_SOCKOPT;
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 75


 849:ioLIB/socket.c ****          #endif
 850:ioLIB/socket.c ****             setSn_CR(sn,Sn_CR_SEND_KEEP);
 851:ioLIB/socket.c ****             while(getSn_CR(sn) != 0)
 852:ioLIB/socket.c ****             {
 853:ioLIB/socket.c ****                // M20131220
 854:ioLIB/socket.c ****          		//if ((tmp = getSn_IR(sn)) & Sn_IR_TIMEOUT)
 855:ioLIB/socket.c ****                if (getSn_IR(sn) & Sn_IR_TIMEOUT)
 856:ioLIB/socket.c ****          		{
 857:ioLIB/socket.c ****          			setSn_IR(sn, Sn_IR_TIMEOUT);
 858:ioLIB/socket.c ****                   return SOCKERR_TIMEOUT;
 859:ioLIB/socket.c ****          		}
 860:ioLIB/socket.c ****             }
 861:ioLIB/socket.c ****          break;
 862:ioLIB/socket.c ****    #if !( (_WIZCHIP_ == 5100) || (_WIZCHIP_ == 5200) )
 863:ioLIB/socket.c ****       case SO_KEEPALIVEAUTO:
 864:ioLIB/socket.c ****          CHECK_SOCKMODE(Sn_MR_TCP);
 2828              		.loc 1 864 10 view .LVU907
 2829              		.loc 1 864 10 view .LVU908
 2830 001e 4001     		lsls	r0, r0, #5
 2831              	.LVL274:
 2832              		.loc 1 864 10 is_stmt 0 view .LVU909
 2833 0020 00F10804 		add	r4, r0, #8
 2834 0024 2046     		mov	r0, r4
 2835 0026 FFF7FEFF 		bl	WIZCHIP_READ
 2836              	.LVL275:
 2837              		.loc 1 864 10 view .LVU910
 2838 002a 00F00F06 		and	r6, r0, #15
 2839 002e 012E     		cmp	r6, #1
 2840 0030 78D1     		bne	.L281
 2841              		.loc 1 864 10 is_stmt 1 discriminator 2 view .LVU911
 2842              		.loc 1 864 35 discriminator 2 view .LVU912
 865:ioLIB/socket.c ****          setSn_KPALVTR(sn,*(uint8_t*)arg);
 2843              		.loc 1 865 10 discriminator 2 view .LVU913
 2844 0032 04F53C50 		add	r0, r4, #12032
 2845 0036 2978     		ldrb	r1, [r5]	@ zero_extendqisi2
 2846 0038 FFF7FEFF 		bl	WIZCHIP_WRITE
 2847              	.LVL276:
 866:ioLIB/socket.c ****          break;
 2848              		.loc 1 866 10 discriminator 2 view .LVU914
 867:ioLIB/socket.c ****    #endif      
 868:ioLIB/socket.c **** #endif   
 869:ioLIB/socket.c ****       default:
 870:ioLIB/socket.c ****          return SOCKERR_ARG;
 871:ioLIB/socket.c ****    }   
 872:ioLIB/socket.c ****    return SOCK_OK;
 2849              		.loc 1 872 11 is_stmt 0 discriminator 2 view .LVU915
 2850 003c 3046     		mov	r0, r6
 873:ioLIB/socket.c **** }
 2851              		.loc 1 873 1 discriminator 2 view .LVU916
 2852 003e 70BD     		pop	{r4, r5, r6, pc}
 2853              	.LVL277:
 2854              	.L277:
 830:ioLIB/socket.c ****          break;
 2855              		.loc 1 830 10 is_stmt 1 view .LVU917
 2856 0040 0124     		movs	r4, #1
 2857 0042 04EB8003 		add	r3, r4, r0, lsl #2
 2858 0046 DB00     		lsls	r3, r3, #3
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 76


 2859 0048 03F5B050 		add	r0, r3, #5632
 2860              	.LVL278:
 830:ioLIB/socket.c ****          break;
 2861              		.loc 1 830 10 is_stmt 0 view .LVU918
 2862 004c 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 2863 004e FFF7FEFF 		bl	WIZCHIP_WRITE
 2864              	.LVL279:
 831:ioLIB/socket.c ****       case SO_TOS:
 2865              		.loc 1 831 10 is_stmt 1 view .LVU919
 872:ioLIB/socket.c **** }
 2866              		.loc 1 872 11 is_stmt 0 view .LVU920
 2867 0052 2046     		mov	r0, r4
 2868              		.loc 1 873 1 view .LVU921
 2869 0054 70BD     		pop	{r4, r5, r6, pc}
 2870              	.LVL280:
 2871              	.L275:
 836:ioLIB/socket.c ****          break;
 2872              		.loc 1 836 10 is_stmt 1 view .LVU922
 2873 0056 0126     		movs	r6, #1
 2874 0058 1188     		ldrh	r1, [r2]
 2875 005a 06EB8004 		add	r4, r6, r0, lsl #2
 2876 005e E400     		lsls	r4, r4, #3
 2877 0060 04F59050 		add	r0, r4, #4608
 2878              	.LVL281:
 836:ioLIB/socket.c ****          break;
 2879              		.loc 1 836 10 is_stmt 0 view .LVU923
 2880 0064 090A     		lsrs	r1, r1, #8
 2881 0066 FFF7FEFF 		bl	WIZCHIP_WRITE
 2882              	.LVL282:
 836:ioLIB/socket.c ****          break;
 2883              		.loc 1 836 10 is_stmt 1 view .LVU924
 2884 006a 04F59850 		add	r0, r4, #4864
 2885 006e 2978     		ldrb	r1, [r5]	@ zero_extendqisi2
 2886 0070 FFF7FEFF 		bl	WIZCHIP_WRITE
 2887              	.LVL283:
 836:ioLIB/socket.c ****          break;
 2888              		.loc 1 836 40 view .LVU925
 837:ioLIB/socket.c ****       case SO_DESTIP:
 2889              		.loc 1 837 10 view .LVU926
 872:ioLIB/socket.c **** }
 2890              		.loc 1 872 11 is_stmt 0 view .LVU927
 2891 0074 3046     		mov	r0, r6
 2892              		.loc 1 873 1 view .LVU928
 2893 0076 70BD     		pop	{r4, r5, r6, pc}
 2894              	.LVL284:
 2895              	.L274:
 839:ioLIB/socket.c ****          break;
 2896              		.loc 1 839 10 is_stmt 1 view .LVU929
 2897 0078 0422     		movs	r2, #4
 2898              	.LVL285:
 839:ioLIB/socket.c ****          break;
 2899              		.loc 1 839 10 is_stmt 0 view .LVU930
 2900 007a 0124     		movs	r4, #1
 2901 007c 12FB0043 		smlabb	r3, r2, r0, r4
 2902 0080 DB00     		lsls	r3, r3, #3
 2903 0082 03F54060 		add	r0, r3, #3072
 2904              	.LVL286:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 77


 839:ioLIB/socket.c ****          break;
 2905              		.loc 1 839 10 view .LVU931
 2906 0086 2946     		mov	r1, r5
 2907 0088 FFF7FEFF 		bl	WIZCHIP_WRITE_BUF
 2908              	.LVL287:
 840:ioLIB/socket.c ****       case SO_DESTPORT:
 2909              		.loc 1 840 10 is_stmt 1 view .LVU932
 872:ioLIB/socket.c **** }
 2910              		.loc 1 872 11 is_stmt 0 view .LVU933
 2911 008c 2046     		mov	r0, r4
 2912              		.loc 1 873 1 view .LVU934
 2913 008e 70BD     		pop	{r4, r5, r6, pc}
 2914              	.LVL288:
 2915              	.L273:
 842:ioLIB/socket.c ****          break;
 2916              		.loc 1 842 10 is_stmt 1 view .LVU935
 2917 0090 0126     		movs	r6, #1
 2918 0092 1188     		ldrh	r1, [r2]
 2919 0094 06EB8004 		add	r4, r6, r0, lsl #2
 2920 0098 E400     		lsls	r4, r4, #3
 2921 009a 04F58050 		add	r0, r4, #4096
 2922              	.LVL289:
 842:ioLIB/socket.c ****          break;
 2923              		.loc 1 842 10 is_stmt 0 view .LVU936
 2924 009e 090A     		lsrs	r1, r1, #8
 2925 00a0 FFF7FEFF 		bl	WIZCHIP_WRITE
 2926              	.LVL290:
 842:ioLIB/socket.c ****          break;
 2927              		.loc 1 842 10 is_stmt 1 view .LVU937
 2928 00a4 04F58850 		add	r0, r4, #4352
 2929 00a8 2978     		ldrb	r1, [r5]	@ zero_extendqisi2
 2930 00aa FFF7FEFF 		bl	WIZCHIP_WRITE
 2931              	.LVL291:
 842:ioLIB/socket.c ****          break;
 2932              		.loc 1 842 42 view .LVU938
 843:ioLIB/socket.c **** #if _WIZCHIP_ != 5100
 2933              		.loc 1 843 10 view .LVU939
 872:ioLIB/socket.c **** }
 2934              		.loc 1 872 11 is_stmt 0 view .LVU940
 2935 00ae 3046     		mov	r0, r6
 2936              		.loc 1 873 1 view .LVU941
 2937 00b0 70BD     		pop	{r4, r5, r6, pc}
 2938              	.LVL292:
 2939              	.L272:
 846:ioLIB/socket.c ****          #if _WIZCHIP_ > 5200
 2940              		.loc 1 846 10 is_stmt 1 view .LVU942
 846:ioLIB/socket.c ****          #if _WIZCHIP_ > 5200
 2941              		.loc 1 846 10 view .LVU943
 2942 00b2 4401     		lsls	r4, r0, #5
 2943 00b4 0834     		adds	r4, r4, #8
 2944 00b6 2046     		mov	r0, r4
 2945              	.LVL293:
 846:ioLIB/socket.c ****          #if _WIZCHIP_ > 5200
 2946              		.loc 1 846 10 is_stmt 0 view .LVU944
 2947 00b8 FFF7FEFF 		bl	WIZCHIP_READ
 2948              	.LVL294:
 846:ioLIB/socket.c ****          #if _WIZCHIP_ > 5200
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 78


 2949              		.loc 1 846 10 view .LVU945
 2950 00bc 00F00F00 		and	r0, r0, #15
 2951 00c0 0128     		cmp	r0, #1
 2952 00c2 2FD1     		bne	.L281
 846:ioLIB/socket.c ****          #if _WIZCHIP_ > 5200
 2953              		.loc 1 846 10 is_stmt 1 discriminator 2 view .LVU946
 846:ioLIB/socket.c ****          #if _WIZCHIP_ > 5200
 2954              		.loc 1 846 35 discriminator 2 view .LVU947
 848:ioLIB/socket.c ****          #endif
 2955              		.loc 1 848 13 discriminator 2 view .LVU948
 848:ioLIB/socket.c ****          #endif
 2956              		.loc 1 848 16 is_stmt 0 discriminator 2 view .LVU949
 2957 00c4 04F53C50 		add	r0, r4, #12032
 2958 00c8 FFF7FEFF 		bl	WIZCHIP_READ
 2959              	.LVL295:
 848:ioLIB/socket.c ****          #endif
 2960              		.loc 1 848 15 discriminator 2 view .LVU950
 2961 00cc 68BB     		cbnz	r0, .L284
 850:ioLIB/socket.c ****             while(getSn_CR(sn) != 0)
 2962              		.loc 1 850 13 is_stmt 1 view .LVU951
 2963 00ce 04F58075 		add	r5, r4, #256
 2964              	.LVL296:
 850:ioLIB/socket.c ****             while(getSn_CR(sn) != 0)
 2965              		.loc 1 850 13 is_stmt 0 view .LVU952
 2966 00d2 2221     		movs	r1, #34
 2967 00d4 2846     		mov	r0, r5
 2968 00d6 FFF7FEFF 		bl	WIZCHIP_WRITE
 2969              	.LVL297:
 851:ioLIB/socket.c ****             {
 2970              		.loc 1 851 13 is_stmt 1 view .LVU953
 855:ioLIB/socket.c ****          		{
 2971              		.loc 1 855 20 is_stmt 0 view .LVU954
 2972 00da 04F50074 		add	r4, r4, #512
 851:ioLIB/socket.c ****             {
 2973              		.loc 1 851 18 view .LVU955
 2974 00de 03E0     		b	.L279
 2975              	.L280:
 855:ioLIB/socket.c ****          		{
 2976              		.loc 1 855 20 view .LVU956
 2977 00e0 FFF7FEFF 		bl	WIZCHIP_READ
 2978              	.LVL298:
 855:ioLIB/socket.c ****          		{
 2979              		.loc 1 855 19 view .LVU957
 2980 00e4 0307     		lsls	r3, r0, #28
 2981 00e6 13D4     		bmi	.L291
 2982              	.L279:
 851:ioLIB/socket.c ****             {
 2983              		.loc 1 851 18 is_stmt 1 view .LVU958
 851:ioLIB/socket.c ****             {
 2984              		.loc 1 851 19 is_stmt 0 view .LVU959
 2985 00e8 2846     		mov	r0, r5
 2986 00ea FFF7FEFF 		bl	WIZCHIP_READ
 2987              	.LVL299:
 855:ioLIB/socket.c ****          		{
 2988              		.loc 1 855 16 is_stmt 1 view .LVU960
 851:ioLIB/socket.c ****             {
 2989              		.loc 1 851 19 is_stmt 0 view .LVU961
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 79


 2990 00ee 0346     		mov	r3, r0
 855:ioLIB/socket.c ****          		{
 2991              		.loc 1 855 20 view .LVU962
 2992 00f0 2046     		mov	r0, r4
 851:ioLIB/socket.c ****             {
 2993              		.loc 1 851 18 view .LVU963
 2994 00f2 002B     		cmp	r3, #0
 2995 00f4 F4D1     		bne	.L280
 872:ioLIB/socket.c **** }
 2996              		.loc 1 872 11 view .LVU964
 2997 00f6 0120     		movs	r0, #1
 2998              		.loc 1 873 1 view .LVU965
 2999 00f8 70BD     		pop	{r4, r5, r6, pc}
 3000              	.LVL300:
 3001              	.L276:
 833:ioLIB/socket.c ****          break;
 3002              		.loc 1 833 10 is_stmt 1 view .LVU966
 3003 00fa 0124     		movs	r4, #1
 3004 00fc 04EB8003 		add	r3, r4, r0, lsl #2
 3005 0100 DB00     		lsls	r3, r3, #3
 3006 0102 03F5A850 		add	r0, r3, #5376
 3007              	.LVL301:
 833:ioLIB/socket.c ****          break;
 3008              		.loc 1 833 10 is_stmt 0 view .LVU967
 3009 0106 1178     		ldrb	r1, [r2]	@ zero_extendqisi2
 3010 0108 FFF7FEFF 		bl	WIZCHIP_WRITE
 3011              	.LVL302:
 834:ioLIB/socket.c ****       case SO_MSS:
 3012              		.loc 1 834 10 is_stmt 1 view .LVU968
 872:ioLIB/socket.c **** }
 3013              		.loc 1 872 11 is_stmt 0 view .LVU969
 3014 010c 2046     		mov	r0, r4
 3015              		.loc 1 873 1 view .LVU970
 3016 010e 70BD     		pop	{r4, r5, r6, pc}
 3017              	.LVL303:
 3018              	.L291:
 857:ioLIB/socket.c ****                   return SOCKERR_TIMEOUT;
 3019              		.loc 1 857 13 is_stmt 1 view .LVU971
 3020 0110 2046     		mov	r0, r4
 3021 0112 0821     		movs	r1, #8
 3022 0114 FFF7FEFF 		bl	WIZCHIP_WRITE
 3023              	.LVL304:
 858:ioLIB/socket.c ****          		}
 3024              		.loc 1 858 19 view .LVU972
 858:ioLIB/socket.c ****          		}
 3025              		.loc 1 858 26 is_stmt 0 view .LVU973
 3026 0118 6FF00C00 		mvn	r0, #12
 3027              		.loc 1 873 1 view .LVU974
 3028 011c 70BD     		pop	{r4, r5, r6, pc}
 3029              	.LVL305:
 3030              	.L282:
 3031              	.LCFI43:
 3032              		.cfi_def_cfa_offset 0
 3033              		.cfi_restore 4
 3034              		.cfi_restore 5
 3035              		.cfi_restore 6
 3036              		.cfi_restore 14
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 80


 826:ioLIB/socket.c ****    switch(sotype)
 3037              		.loc 1 826 4 view .LVU975
 3038 011e 4FF0FF30 		mov	r0, #-1
 3039              	.LVL306:
 3040              		.loc 1 873 1 view .LVU976
 3041 0122 7047     		bx	lr
 3042              	.LVL307:
 3043              	.L281:
 3044              	.LCFI44:
 3045              		.cfi_def_cfa_offset 16
 3046              		.cfi_offset 4, -16
 3047              		.cfi_offset 5, -12
 3048              		.cfi_offset 6, -8
 3049              		.cfi_offset 14, -4
 846:ioLIB/socket.c ****          #if _WIZCHIP_ > 5200
 3050              		.loc 1 846 10 view .LVU977
 3051 0124 6FF00400 		mvn	r0, #4
 3052              		.loc 1 873 1 view .LVU978
 3053 0128 70BD     		pop	{r4, r5, r6, pc}
 3054              	.LVL308:
 3055              	.L284:
 848:ioLIB/socket.c ****          #endif
 3056              		.loc 1 848 47 view .LVU979
 3057 012a 6FF00100 		mvn	r0, #1
 3058              		.loc 1 873 1 view .LVU980
 3059 012e 70BD     		pop	{r4, r5, r6, pc}
 3060              	.LVL309:
 3061              	.L283:
 827:ioLIB/socket.c ****    {
 3062              		.loc 1 827 4 view .LVU981
 3063 0130 6FF00900 		mvn	r0, #9
 3064              	.LVL310:
 3065              		.loc 1 873 1 view .LVU982
 3066 0134 70BD     		pop	{r4, r5, r6, pc}
 3067              		.cfi_endproc
 3068              	.LFE10:
 3070 0136 00BF     		.section	.text.getsockopt,"ax",%progbits
 3071              		.align	1
 3072              		.p2align 2,,3
 3073              		.global	getsockopt
 3074              		.syntax unified
 3075              		.thumb
 3076              		.thumb_func
 3078              	getsockopt:
 3079              	.LVL311:
 3080              	.LFB11:
 874:ioLIB/socket.c **** 
 875:ioLIB/socket.c **** int8_t  getsockopt(uint8_t sn, sockopt_type sotype, void* arg)
 876:ioLIB/socket.c **** {
 3081              		.loc 1 876 1 is_stmt 1 view -0
 3082              		.cfi_startproc
 3083              		@ args = 0, pretend = 0, frame = 0
 3084              		@ frame_needed = 0, uses_anonymous_args = 0
 877:ioLIB/socket.c ****    CHECK_SOCKNUM();
 3085              		.loc 1 877 4 view .LVU984
 3086              		.loc 1 877 4 view .LVU985
 3087 0000 0828     		cmp	r0, #8
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 81


 3088 0002 00F2A580 		bhi	.L310
 876:ioLIB/socket.c ****    CHECK_SOCKNUM();
 3089              		.loc 1 876 1 is_stmt 0 view .LVU986
 3090 0006 70B5     		push	{r4, r5, r6, lr}
 3091              	.LCFI45:
 3092              		.cfi_def_cfa_offset 16
 3093              		.cfi_offset 4, -16
 3094              		.cfi_offset 5, -12
 3095              		.cfi_offset 6, -8
 3096              		.cfi_offset 14, -4
 3097 0008 0446     		mov	r4, r0
 3098 000a 1646     		mov	r6, r2
 3099              		.loc 1 877 4 is_stmt 1 view .LVU987
 3100              		.loc 1 877 19 view .LVU988
 878:ioLIB/socket.c ****    switch(sotype)
 3101              		.loc 1 878 4 view .LVU989
 3102 000c 0C29     		cmp	r1, #12
 3103 000e 00F29680 		bhi	.L311
 3104 0012 DFE801F0 		tbb	[pc, r1]
 3105              	.L295:
 3106 0016 15       		.byte	(.L306-.L295)/2
 3107 0017 20       		.byte	(.L305-.L295)/2
 3108 0018 2B       		.byte	(.L304-.L295)/2
 3109 0019 36       		.byte	(.L303-.L295)/2
 3110 001a 49       		.byte	(.L302-.L295)/2
 3111 001b 55       		.byte	(.L301-.L295)/2
 3112 001c 94       		.byte	(.L311-.L295)/2
 3113 001d 61       		.byte	(.L300-.L295)/2
 3114 001e 71       		.byte	(.L299-.L295)/2
 3115 001f 76       		.byte	(.L298-.L295)/2
 3116 0020 7B       		.byte	(.L297-.L295)/2
 3117 0021 86       		.byte	(.L296-.L295)/2
 3118 0022 07       		.byte	(.L294-.L295)/2
 3119 0023 00       		.p2align 1
 3120              	.L294:
 879:ioLIB/socket.c ****    {
 880:ioLIB/socket.c ****       case SO_FLAG:
 881:ioLIB/socket.c ****          *(uint8_t*)arg = getSn_MR(sn) & 0xF0;
 882:ioLIB/socket.c ****          break;
 883:ioLIB/socket.c ****       case SO_TTL:
 884:ioLIB/socket.c ****          *(uint8_t*) arg = getSn_TTL(sn);
 885:ioLIB/socket.c ****          break;
 886:ioLIB/socket.c ****       case SO_TOS:
 887:ioLIB/socket.c ****          *(uint8_t*) arg = getSn_TOS(sn);
 888:ioLIB/socket.c ****          break;
 889:ioLIB/socket.c ****       case SO_MSS:   
 890:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_MSSR(sn);
 891:ioLIB/socket.c ****          break;
 892:ioLIB/socket.c ****       case SO_DESTIP:
 893:ioLIB/socket.c ****          getSn_DIPR(sn, (uint8_t*)arg);
 894:ioLIB/socket.c ****          break;
 895:ioLIB/socket.c ****       case SO_DESTPORT:  
 896:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_DPORT(sn);
 897:ioLIB/socket.c ****          break;
 898:ioLIB/socket.c ****    #if _WIZCHIP_ > 5200   
 899:ioLIB/socket.c ****       case SO_KEEPALIVEAUTO:
 900:ioLIB/socket.c ****          CHECK_SOCKMODE(Sn_MR_TCP);
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 82


 901:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_KPALVTR(sn);
 902:ioLIB/socket.c ****          break;
 903:ioLIB/socket.c ****    #endif      
 904:ioLIB/socket.c ****       case SO_SENDBUF:
 905:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_TX_FSR(sn);
 906:ioLIB/socket.c ****          break;
 907:ioLIB/socket.c ****       case SO_RECVBUF:
 908:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_RX_RSR(sn);
 909:ioLIB/socket.c ****          break;
 910:ioLIB/socket.c ****       case SO_STATUS:
 911:ioLIB/socket.c ****          *(uint8_t*) arg = getSn_SR(sn);
 912:ioLIB/socket.c ****          break;
 913:ioLIB/socket.c ****       case SO_REMAINSIZE:
 914:ioLIB/socket.c ****          if(getSn_MR(sn) & Sn_MR_TCP)
 915:ioLIB/socket.c ****             *(uint16_t*)arg = getSn_RX_RSR(sn);
 916:ioLIB/socket.c ****          else
 917:ioLIB/socket.c ****             *(uint16_t*)arg = sock_remained_size[sn];
 918:ioLIB/socket.c ****          break;
 919:ioLIB/socket.c ****       case SO_PACKINFO:
 920:ioLIB/socket.c ****          //CHECK_SOCKMODE(Sn_MR_TCP);
 921:ioLIB/socket.c **** #if _WIZCHIP_ != 5300
 922:ioLIB/socket.c ****          if((getSn_MR(sn) == Sn_MR_TCP))
 3121              		.loc 1 922 10 view .LVU990
 3122              		.loc 1 922 14 is_stmt 0 view .LVU991
 3123 0024 0125     		movs	r5, #1
 3124 0026 05EB8000 		add	r0, r5, r0, lsl #2
 3125              	.LVL312:
 3126              		.loc 1 922 14 view .LVU992
 3127 002a C000     		lsls	r0, r0, #3
 3128 002c FFF7FEFF 		bl	WIZCHIP_READ
 3129              	.LVL313:
 3130              		.loc 1 922 12 view .LVU993
 3131 0030 A842     		cmp	r0, r5
 3132 0032 00F09080 		beq	.L309
 923:ioLIB/socket.c ****              return SOCKERR_SOCKMODE;
 924:ioLIB/socket.c **** #endif
 925:ioLIB/socket.c ****          *(uint8_t*)arg = sock_pack_info[sn];
 3133              		.loc 1 925 10 is_stmt 1 view .LVU994
 3134              		.loc 1 925 41 is_stmt 0 view .LVU995
 3135 0036 494B     		ldr	r3, .L321
 3136 0038 1B5D     		ldrb	r3, [r3, r4]	@ zero_extendqisi2
 3137              		.loc 1 925 25 view .LVU996
 3138 003a 3370     		strb	r3, [r6]
 926:ioLIB/socket.c ****          break;
 3139              		.loc 1 926 10 is_stmt 1 view .LVU997
 927:ioLIB/socket.c ****       default:
 928:ioLIB/socket.c ****          return SOCKERR_SOCKOPT;
 929:ioLIB/socket.c ****    }
 930:ioLIB/socket.c ****    return SOCK_OK;
 3140              		.loc 1 930 11 is_stmt 0 view .LVU998
 3141 003c 2846     		mov	r0, r5
 931:ioLIB/socket.c **** }
 3142              		.loc 1 931 1 view .LVU999
 3143 003e 70BD     		pop	{r4, r5, r6, pc}
 3144              	.LVL314:
 3145              	.L306:
 881:ioLIB/socket.c ****          break;
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 83


 3146              		.loc 1 881 10 is_stmt 1 view .LVU1000
 881:ioLIB/socket.c ****          break;
 3147              		.loc 1 881 27 is_stmt 0 view .LVU1001
 3148 0040 0125     		movs	r5, #1
 3149 0042 05EB8000 		add	r0, r5, r0, lsl #2
 3150              	.LVL315:
 881:ioLIB/socket.c ****          break;
 3151              		.loc 1 881 27 view .LVU1002
 3152 0046 C000     		lsls	r0, r0, #3
 3153 0048 FFF7FEFF 		bl	WIZCHIP_READ
 3154              	.LVL316:
 881:ioLIB/socket.c ****          break;
 3155              		.loc 1 881 40 view .LVU1003
 3156 004c 20F00F00 		bic	r0, r0, #15
 881:ioLIB/socket.c ****          break;
 3157              		.loc 1 881 25 view .LVU1004
 3158 0050 3070     		strb	r0, [r6]
 882:ioLIB/socket.c ****       case SO_TTL:
 3159              		.loc 1 882 10 is_stmt 1 view .LVU1005
 930:ioLIB/socket.c **** }
 3160              		.loc 1 930 11 is_stmt 0 view .LVU1006
 3161 0052 2846     		mov	r0, r5
 3162              		.loc 1 931 1 view .LVU1007
 3163 0054 70BD     		pop	{r4, r5, r6, pc}
 3164              	.LVL317:
 3165              	.L305:
 884:ioLIB/socket.c ****          break;
 3166              		.loc 1 884 10 is_stmt 1 view .LVU1008
 884:ioLIB/socket.c ****          break;
 3167              		.loc 1 884 28 is_stmt 0 view .LVU1009
 3168 0056 0125     		movs	r5, #1
 3169 0058 05EB8000 		add	r0, r5, r0, lsl #2
 3170              	.LVL318:
 884:ioLIB/socket.c ****          break;
 3171              		.loc 1 884 28 view .LVU1010
 3172 005c C000     		lsls	r0, r0, #3
 3173 005e 00F5B050 		add	r0, r0, #5632
 3174 0062 FFF7FEFF 		bl	WIZCHIP_READ
 3175              	.LVL319:
 884:ioLIB/socket.c ****          break;
 3176              		.loc 1 884 26 view .LVU1011
 3177 0066 3070     		strb	r0, [r6]
 885:ioLIB/socket.c ****       case SO_TOS:
 3178              		.loc 1 885 10 is_stmt 1 view .LVU1012
 930:ioLIB/socket.c **** }
 3179              		.loc 1 930 11 is_stmt 0 view .LVU1013
 3180 0068 2846     		mov	r0, r5
 3181              		.loc 1 931 1 view .LVU1014
 3182 006a 70BD     		pop	{r4, r5, r6, pc}
 3183              	.LVL320:
 3184              	.L304:
 887:ioLIB/socket.c ****          break;
 3185              		.loc 1 887 10 is_stmt 1 view .LVU1015
 887:ioLIB/socket.c ****          break;
 3186              		.loc 1 887 28 is_stmt 0 view .LVU1016
 3187 006c 0125     		movs	r5, #1
 3188 006e 05EB8000 		add	r0, r5, r0, lsl #2
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 84


 3189              	.LVL321:
 887:ioLIB/socket.c ****          break;
 3190              		.loc 1 887 28 view .LVU1017
 3191 0072 C000     		lsls	r0, r0, #3
 3192 0074 00F5A850 		add	r0, r0, #5376
 3193 0078 FFF7FEFF 		bl	WIZCHIP_READ
 3194              	.LVL322:
 887:ioLIB/socket.c ****          break;
 3195              		.loc 1 887 26 view .LVU1018
 3196 007c 3070     		strb	r0, [r6]
 888:ioLIB/socket.c ****       case SO_MSS:   
 3197              		.loc 1 888 10 is_stmt 1 view .LVU1019
 930:ioLIB/socket.c **** }
 3198              		.loc 1 930 11 is_stmt 0 view .LVU1020
 3199 007e 2846     		mov	r0, r5
 3200              		.loc 1 931 1 view .LVU1021
 3201 0080 70BD     		pop	{r4, r5, r6, pc}
 3202              	.LVL323:
 3203              	.L303:
 890:ioLIB/socket.c ****          break;
 3204              		.loc 1 890 10 is_stmt 1 view .LVU1022
 890:ioLIB/socket.c ****          break;
 3205              		.loc 1 890 29 is_stmt 0 view .LVU1023
 3206 0082 0125     		movs	r5, #1
 3207 0084 05EB8004 		add	r4, r5, r0, lsl #2
 3208 0088 E400     		lsls	r4, r4, #3
 3209 008a 04F59050 		add	r0, r4, #4608
 3210              	.LVL324:
 890:ioLIB/socket.c ****          break;
 3211              		.loc 1 890 29 view .LVU1024
 3212 008e FFF7FEFF 		bl	WIZCHIP_READ
 3213              	.LVL325:
 890:ioLIB/socket.c ****          break;
 3214              		.loc 1 890 29 view .LVU1025
 3215 0092 0346     		mov	r3, r0
 3216 0094 04F59850 		add	r0, r4, #4864
 3217              	.L319:
 896:ioLIB/socket.c ****          break;
 3218              		.loc 1 896 29 view .LVU1026
 3219 0098 1C46     		mov	r4, r3
 3220 009a FFF7FEFF 		bl	WIZCHIP_READ
 3221              	.LVL326:
 3222 009e 00EB0420 		add	r0, r0, r4, lsl #8
 896:ioLIB/socket.c ****          break;
 3223              		.loc 1 896 27 view .LVU1027
 3224 00a2 3080     		strh	r0, [r6]	@ movhi
 897:ioLIB/socket.c ****    #if _WIZCHIP_ > 5200   
 3225              		.loc 1 897 10 is_stmt 1 view .LVU1028
 930:ioLIB/socket.c **** }
 3226              		.loc 1 930 11 is_stmt 0 view .LVU1029
 3227 00a4 2846     		mov	r0, r5
 3228              		.loc 1 931 1 view .LVU1030
 3229 00a6 70BD     		pop	{r4, r5, r6, pc}
 3230              	.LVL327:
 3231              	.L302:
 893:ioLIB/socket.c ****          break;
 3232              		.loc 1 893 10 is_stmt 1 view .LVU1031
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 85


 3233 00a8 0422     		movs	r2, #4
 3234              	.LVL328:
 893:ioLIB/socket.c ****          break;
 3235              		.loc 1 893 10 is_stmt 0 view .LVU1032
 3236 00aa 0125     		movs	r5, #1
 3237 00ac 12FB0050 		smlabb	r0, r2, r0, r5
 3238              	.LVL329:
 893:ioLIB/socket.c ****          break;
 3239              		.loc 1 893 10 view .LVU1033
 3240 00b0 C000     		lsls	r0, r0, #3
 3241 00b2 3146     		mov	r1, r6
 3242              	.LVL330:
 893:ioLIB/socket.c ****          break;
 3243              		.loc 1 893 10 view .LVU1034
 3244 00b4 00F54060 		add	r0, r0, #3072
 3245 00b8 FFF7FEFF 		bl	WIZCHIP_READ_BUF
 3246              	.LVL331:
 894:ioLIB/socket.c ****       case SO_DESTPORT:  
 3247              		.loc 1 894 10 is_stmt 1 view .LVU1035
 930:ioLIB/socket.c **** }
 3248              		.loc 1 930 11 is_stmt 0 view .LVU1036
 3249 00bc 2846     		mov	r0, r5
 3250              		.loc 1 931 1 view .LVU1037
 3251 00be 70BD     		pop	{r4, r5, r6, pc}
 3252              	.LVL332:
 3253              	.L301:
 896:ioLIB/socket.c ****          break;
 3254              		.loc 1 896 10 is_stmt 1 view .LVU1038
 896:ioLIB/socket.c ****          break;
 3255              		.loc 1 896 29 is_stmt 0 view .LVU1039
 3256 00c0 0125     		movs	r5, #1
 3257 00c2 05EB8004 		add	r4, r5, r0, lsl #2
 3258 00c6 E400     		lsls	r4, r4, #3
 3259 00c8 04F58050 		add	r0, r4, #4096
 3260              	.LVL333:
 896:ioLIB/socket.c ****          break;
 3261              		.loc 1 896 29 view .LVU1040
 3262 00cc FFF7FEFF 		bl	WIZCHIP_READ
 3263              	.LVL334:
 896:ioLIB/socket.c ****          break;
 3264              		.loc 1 896 29 view .LVU1041
 3265 00d0 0346     		mov	r3, r0
 3266 00d2 04F58850 		add	r0, r4, #4352
 3267 00d6 DFE7     		b	.L319
 3268              	.LVL335:
 3269              	.L300:
 900:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_KPALVTR(sn);
 3270              		.loc 1 900 10 is_stmt 1 view .LVU1042
 900:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_KPALVTR(sn);
 3271              		.loc 1 900 10 view .LVU1043
 3272 00d8 4401     		lsls	r4, r0, #5
 3273 00da 0834     		adds	r4, r4, #8
 3274 00dc 2046     		mov	r0, r4
 3275              	.LVL336:
 900:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_KPALVTR(sn);
 3276              		.loc 1 900 10 is_stmt 0 view .LVU1044
 3277 00de FFF7FEFF 		bl	WIZCHIP_READ
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 86


 3278              	.LVL337:
 900:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_KPALVTR(sn);
 3279              		.loc 1 900 10 view .LVU1045
 3280 00e2 00F00F05 		and	r5, r0, #15
 3281 00e6 012D     		cmp	r5, #1
 3282 00e8 35D1     		bne	.L309
 900:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_KPALVTR(sn);
 3283              		.loc 1 900 10 is_stmt 1 discriminator 2 view .LVU1046
 900:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_KPALVTR(sn);
 3284              		.loc 1 900 35 discriminator 2 view .LVU1047
 901:ioLIB/socket.c ****          break;
 3285              		.loc 1 901 10 discriminator 2 view .LVU1048
 901:ioLIB/socket.c ****          break;
 3286              		.loc 1 901 29 is_stmt 0 discriminator 2 view .LVU1049
 3287 00ea 04F53C50 		add	r0, r4, #12032
 3288 00ee FFF7FEFF 		bl	WIZCHIP_READ
 3289              	.LVL338:
 3290 00f2 3080     		strh	r0, [r6]	@ movhi
 902:ioLIB/socket.c ****    #endif      
 3291              		.loc 1 902 10 is_stmt 1 discriminator 2 view .LVU1050
 930:ioLIB/socket.c **** }
 3292              		.loc 1 930 11 is_stmt 0 discriminator 2 view .LVU1051
 3293 00f4 2846     		mov	r0, r5
 3294              		.loc 1 931 1 discriminator 2 view .LVU1052
 3295 00f6 70BD     		pop	{r4, r5, r6, pc}
 3296              	.LVL339:
 3297              	.L299:
 905:ioLIB/socket.c ****          break;
 3298              		.loc 1 905 10 is_stmt 1 view .LVU1053
 905:ioLIB/socket.c ****          break;
 3299              		.loc 1 905 29 is_stmt 0 view .LVU1054
 3300 00f8 FFF7FEFF 		bl	getSn_TX_FSR
 3301              	.LVL340:
 905:ioLIB/socket.c ****          break;
 3302              		.loc 1 905 27 view .LVU1055
 3303 00fc 3080     		strh	r0, [r6]	@ movhi
 906:ioLIB/socket.c ****       case SO_RECVBUF:
 3304              		.loc 1 906 10 is_stmt 1 view .LVU1056
 930:ioLIB/socket.c **** }
 3305              		.loc 1 930 11 is_stmt 0 view .LVU1057
 3306 00fe 0120     		movs	r0, #1
 3307              		.loc 1 931 1 view .LVU1058
 3308 0100 70BD     		pop	{r4, r5, r6, pc}
 3309              	.LVL341:
 3310              	.L298:
 908:ioLIB/socket.c ****          break;
 3311              		.loc 1 908 10 is_stmt 1 view .LVU1059
 908:ioLIB/socket.c ****          break;
 3312              		.loc 1 908 29 is_stmt 0 view .LVU1060
 3313 0102 FFF7FEFF 		bl	getSn_RX_RSR
 3314              	.LVL342:
 908:ioLIB/socket.c ****          break;
 3315              		.loc 1 908 27 view .LVU1061
 3316 0106 3080     		strh	r0, [r6]	@ movhi
 909:ioLIB/socket.c ****       case SO_STATUS:
 3317              		.loc 1 909 10 is_stmt 1 view .LVU1062
 930:ioLIB/socket.c **** }
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 87


 3318              		.loc 1 930 11 is_stmt 0 view .LVU1063
 3319 0108 0120     		movs	r0, #1
 3320              		.loc 1 931 1 view .LVU1064
 3321 010a 70BD     		pop	{r4, r5, r6, pc}
 3322              	.LVL343:
 3323              	.L297:
 911:ioLIB/socket.c ****          break;
 3324              		.loc 1 911 10 is_stmt 1 view .LVU1065
 911:ioLIB/socket.c ****          break;
 3325              		.loc 1 911 28 is_stmt 0 view .LVU1066
 3326 010c 0125     		movs	r5, #1
 3327 010e 05EB8000 		add	r0, r5, r0, lsl #2
 3328              	.LVL344:
 911:ioLIB/socket.c ****          break;
 3329              		.loc 1 911 28 view .LVU1067
 3330 0112 C000     		lsls	r0, r0, #3
 3331 0114 00F54070 		add	r0, r0, #768
 3332 0118 FFF7FEFF 		bl	WIZCHIP_READ
 3333              	.LVL345:
 911:ioLIB/socket.c ****          break;
 3334              		.loc 1 911 26 view .LVU1068
 3335 011c 3070     		strb	r0, [r6]
 912:ioLIB/socket.c ****       case SO_REMAINSIZE:
 3336              		.loc 1 912 10 is_stmt 1 view .LVU1069
 930:ioLIB/socket.c **** }
 3337              		.loc 1 930 11 is_stmt 0 view .LVU1070
 3338 011e 2846     		mov	r0, r5
 3339              		.loc 1 931 1 view .LVU1071
 3340 0120 70BD     		pop	{r4, r5, r6, pc}
 3341              	.LVL346:
 3342              	.L296:
 914:ioLIB/socket.c ****             *(uint16_t*)arg = getSn_RX_RSR(sn);
 3343              		.loc 1 914 10 is_stmt 1 view .LVU1072
 914:ioLIB/socket.c ****             *(uint16_t*)arg = getSn_RX_RSR(sn);
 3344              		.loc 1 914 13 is_stmt 0 view .LVU1073
 3345 0122 0125     		movs	r5, #1
 3346 0124 05EB8000 		add	r0, r5, r0, lsl #2
 3347              	.LVL347:
 914:ioLIB/socket.c ****             *(uint16_t*)arg = getSn_RX_RSR(sn);
 3348              		.loc 1 914 13 view .LVU1074
 3349 0128 C000     		lsls	r0, r0, #3
 3350 012a FFF7FEFF 		bl	WIZCHIP_READ
 3351              	.LVL348:
 914:ioLIB/socket.c ****             *(uint16_t*)arg = getSn_RX_RSR(sn);
 3352              		.loc 1 914 12 view .LVU1075
 3353 012e C307     		lsls	r3, r0, #31
 3354 0130 08D4     		bmi	.L320
 917:ioLIB/socket.c ****          break;
 3355              		.loc 1 917 13 is_stmt 1 view .LVU1076
 917:ioLIB/socket.c ****          break;
 3356              		.loc 1 917 49 is_stmt 0 view .LVU1077
 3357 0132 0B4B     		ldr	r3, .L321+4
 917:ioLIB/socket.c ****          break;
 3358              		.loc 1 917 29 view .LVU1078
 3359 0134 33F81430 		ldrh	r3, [r3, r4, lsl #1]
 3360 0138 3380     		strh	r3, [r6]	@ movhi
 930:ioLIB/socket.c **** }
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 88


 3361              		.loc 1 930 11 view .LVU1079
 3362 013a 2846     		mov	r0, r5
 3363              		.loc 1 931 1 view .LVU1080
 3364 013c 70BD     		pop	{r4, r5, r6, pc}
 3365              	.LVL349:
 3366              	.L311:
 878:ioLIB/socket.c ****    {
 3367              		.loc 1 878 4 view .LVU1081
 3368 013e 6FF00100 		mvn	r0, #1
 3369              	.LVL350:
 3370              		.loc 1 931 1 view .LVU1082
 3371 0142 70BD     		pop	{r4, r5, r6, pc}
 3372              	.LVL351:
 3373              	.L320:
 915:ioLIB/socket.c ****          else
 3374              		.loc 1 915 13 is_stmt 1 view .LVU1083
 915:ioLIB/socket.c ****          else
 3375              		.loc 1 915 31 is_stmt 0 view .LVU1084
 3376 0144 2046     		mov	r0, r4
 3377 0146 FFF7FEFF 		bl	getSn_RX_RSR
 3378              	.LVL352:
 915:ioLIB/socket.c ****          else
 3379              		.loc 1 915 29 view .LVU1085
 3380 014a 3080     		strh	r0, [r6]	@ movhi
 930:ioLIB/socket.c **** }
 3381              		.loc 1 930 11 view .LVU1086
 3382 014c 2846     		mov	r0, r5
 3383              		.loc 1 931 1 view .LVU1087
 3384 014e 70BD     		pop	{r4, r5, r6, pc}
 3385              	.LVL353:
 3386              	.L310:
 3387              	.LCFI46:
 3388              		.cfi_def_cfa_offset 0
 3389              		.cfi_restore 4
 3390              		.cfi_restore 5
 3391              		.cfi_restore 6
 3392              		.cfi_restore 14
 877:ioLIB/socket.c ****    switch(sotype)
 3393              		.loc 1 877 4 view .LVU1088
 3394 0150 4FF0FF30 		mov	r0, #-1
 3395              	.LVL354:
 3396              		.loc 1 931 1 view .LVU1089
 3397 0154 7047     		bx	lr
 3398              	.LVL355:
 3399              	.L309:
 3400              	.LCFI47:
 3401              		.cfi_def_cfa_offset 16
 3402              		.cfi_offset 4, -16
 3403              		.cfi_offset 5, -12
 3404              		.cfi_offset 6, -8
 3405              		.cfi_offset 14, -4
 900:ioLIB/socket.c ****          *(uint16_t*) arg = getSn_KPALVTR(sn);
 3406              		.loc 1 900 10 view .LVU1090
 3407 0156 6FF00400 		mvn	r0, #4
 3408              		.loc 1 931 1 view .LVU1091
 3409 015a 70BD     		pop	{r4, r5, r6, pc}
 3410              	.LVL356:
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 89


 3411              	.L322:
 3412              		.loc 1 931 1 view .LVU1092
 3413              		.align	2
 3414              	.L321:
 3415 015c 00000000 		.word	.LANCHOR3
 3416 0160 00000000 		.word	.LANCHOR2
 3417              		.cfi_endproc
 3418              	.LFE11:
 3420              		.global	sock_pack_info
 3421              		.section	.bss.sock_io_mode,"aw",%nobits
 3422              		.align	1
 3423              		.set	.LANCHOR0,. + 0
 3426              	sock_io_mode:
 3427 0000 0000     		.space	2
 3428              		.section	.bss.sock_is_sending,"aw",%nobits
 3429              		.align	1
 3430              		.set	.LANCHOR1,. + 0
 3433              	sock_is_sending:
 3434 0000 0000     		.space	2
 3435              		.section	.bss.sock_pack_info,"aw",%nobits
 3436              		.align	2
 3437              		.set	.LANCHOR3,. + 0
 3440              	sock_pack_info:
 3441 0000 00000000 		.space	8
 3441      00000000 
 3442              		.section	.bss.sock_remained_size,"aw",%nobits
 3443              		.align	2
 3444              		.set	.LANCHOR2,. + 0
 3447              	sock_remained_size:
 3448 0000 00000000 		.space	16
 3448      00000000 
 3448      00000000 
 3448      00000000 
 3449              		.section	.data.sock_any_port,"aw"
 3450              		.align	1
 3451              		.set	.LANCHOR4,. + 0
 3454              	sock_any_port:
 3455 0000 00C0     		.short	-16384
 3456              		.text
 3457              	.Letext0:
 3458              		.file 2 "d:\\gcc arm\\10 2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 3459              		.file 3 "d:\\gcc arm\\10 2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 3460              		.file 4 "ioLIB/socket.h"
 3461              		.file 5 "ioLIB/W5500/w5500.h"
ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 90


DEFINED SYMBOLS
                            *ABS*:00000000 socket.c
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:20     .text.close.part.0:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:26     .text.close.part.0:00000000 close.part.0
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:126    .text.close.part.0:00000060 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:134    .text.socket:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:141    .text.socket:00000000 socket
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:439    .text.socket:00000124 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:448    .text.close:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:455    .text.close:00000000 close
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:482    .text.listen:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:489    .text.listen:00000000 listen
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:619    .text.connect:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:626    .text.connect:00000000 connect
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:872    .text.connect:00000100 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:878    .text.disconnect:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:885    .text.disconnect:00000000 disconnect
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1031   .text.disconnect:00000088 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1037   .text.send:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1044   .text.send:00000000 send
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1358   .text.send:00000128 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1364   .text.recv:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1371   .text.recv:00000000 recv
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1638   .text.recv:000000f4 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1643   .text.sendto:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1650   .text.sendto:00000000 sendto
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1985   .text.sendto:00000178 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1990   .text.recvfrom:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:1997   .text.recvfrom:00000000 recvfrom
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2503   .text.recvfrom:00000248 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2510   .text.ctlsocket:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2517   .text.ctlsocket:00000000 ctlsocket
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2547   .text.ctlsocket:00000012 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2555   .text.ctlsocket:0000001a $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2777   .text.ctlsocket:000000f8 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2782   .text.setsockopt:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2789   .text.setsockopt:00000000 setsockopt
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2819   .text.setsockopt:00000016 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3071   .text.getsockopt:00000000 $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3078   .text.getsockopt:00000000 getsockopt
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3106   .text.getsockopt:00000016 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3415   .text.getsockopt:0000015c $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3440   .bss.sock_pack_info:00000000 sock_pack_info
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3422   .bss.sock_io_mode:00000000 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3426   .bss.sock_io_mode:00000000 sock_io_mode
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3429   .bss.sock_is_sending:00000000 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3433   .bss.sock_is_sending:00000000 sock_is_sending
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3436   .bss.sock_pack_info:00000000 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3443   .bss.sock_remained_size:00000000 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3447   .bss.sock_remained_size:00000000 sock_remained_size
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3450   .data.sock_any_port:00000000 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3454   .data.sock_any_port:00000000 sock_any_port
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2826   .text.setsockopt:0000001d $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:2826   .text.setsockopt:0000001e $t
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3119   .text.getsockopt:00000023 $d
C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s:3119   .text.getsockopt:00000024 $t

ARM GAS  C:\Users\clay0\AppData\Local\Temp\ccd0ASe2.s 			page 91


UNDEFINED SYMBOLS
WIZCHIP_WRITE
WIZCHIP_READ
WIZCHIP_READ_BUF
WIZCHIP_WRITE_BUF
getSn_TX_FSR
wiz_send_data
getSn_RX_RSR
wiz_recv_data
wiz_recv_ignore
